<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=2"><meta name=robots content="noodp"><title>Create animations in .NET MAUI for a disco atmosphere - MAUI, c'est clair !</title><meta name=author content="Jean-Emmanuel BAILLAT">
<meta name=author-link content="https://github.com/Kapusch"><meta name=description content="In this final episode, we'll be creating animations with .NET MAUI to set the mood for a crazy night. Put on your sunglasses, because there will be flashes everywhere!"><meta name=keywords content='Animation,AbsoluteLayout,Round Effect,Brush'><meta itemprop=name content="Create animations in .NET MAUI for a disco atmosphere"><meta itemprop=description content="In this final episode, we'll be creating animations with .NET MAUI to set the mood for a crazy night. Put on your sunglasses, because there will be flashes everywhere!"><meta itemprop=datePublished content="2024-01-16T00:00:15+00:00"><meta itemprop=dateModified content="2024-01-16T00:00:15+00:00"><meta itemprop=wordCount content="3111"><meta itemprop=image content="https://www.mauicestclair.fr/posts/tutos/my-first-app/15-add-animations-to-an-app/featured-image-preview-en.png"><meta itemprop=keywords content="Animation,AbsoluteLayout,Round Effect,Brush,"><meta property="og:title" content="Create animations in .NET MAUI for a disco atmosphere"><meta property="og:description" content="In this final episode, we'll be creating animations with .NET MAUI to set the mood for a crazy night. Put on your sunglasses, because there will be flashes everywhere!"><meta property="og:type" content="article"><meta property="og:url" content="https://www.mauicestclair.fr/en/posts/tutos/my-first-app/15-add-animations-to-an-app/"><meta property="og:image" content="https://www.mauicestclair.fr/posts/tutos/my-first-app/15-add-animations-to-an-app/featured-image-preview-en.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-01-16T00:00:15+00:00"><meta property="article:modified_time" content="2024-01-16T00:00:15+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://www.mauicestclair.fr/posts/tutos/my-first-app/15-add-animations-to-an-app/featured-image-preview-en.png"><meta name=twitter:title content="Create animations in .NET MAUI for a disco atmosphere"><meta name=twitter:description content="In this final episode, we'll be creating animations with .NET MAUI to set the mood for a crazy night. Put on your sunglasses, because there will be flashes everywhere!"><meta name=twitter:site content="@kapuschinfo"><meta name=application-name content="MAUI, c'est clair !"><meta name=apple-mobile-web-app-title content="MAUI, c'est clair !"><meta name=theme-color data-light=#f8f8f8 data-dark=#252627 content="#f8f8f8"><meta name=msapplication-TileColor content="#da532c"><link rel=canonical href=https://www.mauicestclair.fr/en/posts/tutos/my-first-app/15-add-animations-to-an-app/><link rel=prev href=https://www.mauicestclair.fr/en/posts/tutos/my-first-app/14-skip-next-or-previous-with-mediaelement/><link rel=stylesheet href=/css/style.min.css><link rel=stylesheet href=/lib/fontawesome-free/all.min.css><link rel=stylesheet href=/lib/animate/animate.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Create animations in .NET MAUI for a disco atmosphere","inLanguage":"en","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/www.mauicestclair.fr\/en\/posts\/tutos\/my-first-app\/15-add-animations-to-an-app\/"},"genre":"posts","keywords":"Animation, AbsoluteLayout, Round Effect, Brush","wordcount":3111,"url":"https:\/\/www.mauicestclair.fr\/en\/posts\/tutos\/my-first-app\/15-add-animations-to-an-app\/","datePublished":"2024-01-16T00:00:15+00:00","dateModified":"2024-01-16T00:00:15+00:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"Jean-Emmanuel BAILLAT"},"description":"In this final episode, we'll be creating animations with .NET MAUI to set the mood for a crazy night. Put on your sunglasses, because there will be flashes everywhere!"}</script></head><body data-header-desktop=sticky data-header-mobile=auto><script>(window.localStorage?.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("data-theme","dark")</script><div class=wrapper data-page-style=wide><header class="desktop animate__faster" id=header-desktop><div class=header-wrapper data-github-corner=left><div class=header-title><a href=/en/ title="MAUI, c'est clair !"><img loading=lazy src=/main_avatar.jpg srcset="/main_avatar.jpg, /main_avatar.jpg 1.5x, /main_avatar.jpg 2x" sizes=auto data-title="MAUI, c'est clair !" data-alt="MAUI, c'est clair !" class=logo style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'><span class=header-title-text>MAUI, c'est clair !</span></a><span class=header-subtitle></span></div><nav><ul class=menu><li class="menu-item has-children"><a class=menu-link href=/en/posts/><i class="fa-solid fa-newspaper fa-fw fa-sm" aria-hidden=true></i> Posts</a><i class="dropdown-icon fa-solid fa-chevron-down" aria-hidden=true></i><ul class=sub-menu><li class=menu-item><a class=menu-link href=/en/posts/tutos/><i class="fa-solid fa-graduation-cap fa-fw fa-sm" aria-hidden=true></i> Tutos</a></li><li class=menu-item><a class=menu-link href=/en/posts/tips/><i class="fa-solid fa-lightbulb fa-fw fa-sm" aria-hidden=true></i> Tips</a></li></ul></li><li class=menu-item><a class=menu-link href=/en/tags/><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden=true></i> Tags</a></li><li class=menu-item><a class=menu-link href=/en/about/><i class="fa-solid fa-info-circle fa-fw fa-sm" aria-hidden=true></i> About</a></li><li class="menu-item delimiter"></li><li class="menu-item search" id=search-desktop><input type=text placeholder="Search titles or contents ..." id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=Search><i class="fa-solid fa-search fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=Clear><i class="fa-solid fa-times-circle fa-fw" aria-hidden=true></i>
</a><span class="search-button search-loading" id=search-loading-desktop><i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></li><li class="menu-item theme-switch" title="Switch Theme"><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></li><li class="menu-item language-switch"><span role=button aria-label="Select Language" title="Select Language"><i class="fa-solid fa-language fa-fw" aria-hidden=true></i></span><ul class=sub-menu><li class=menu-item><a href=/posts/tutos/my-first-app/15-add-animations-to-an-app/ class=menu-link title=Français>Français</a></li><li class=menu-item><span class="menu-link text-secondary" title=English>English</span></li></ul></li></ul></nav></div></header><header class="mobile animate__faster" id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/en/ title="MAUI, c'est clair !"><img loading=lazy src=/main_avatar.jpg srcset="/main_avatar.jpg, /main_avatar.jpg 1.5x, /main_avatar.jpg 2x" sizes=auto data-title=/main_avatar.jpg data-alt=/main_avatar.jpg class=logo style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'><span class=header-title-text>MAUI, c'est clair !</span></a><span class=header-subtitle></span></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><nav><ul class=menu id=menu-mobile><li class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder="Search titles or contents ..." id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=Search><i class="fa-solid fa-search fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=Clear><i class="fa-solid fa-times-circle fa-fw" aria-hidden=true></i>
</a><span class="search-button search-loading" id=search-loading-mobile><i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>Cancel</a></li><li class=menu-item><span class=nested-item><a class=menu-link href=/en/posts/><i class="fa-solid fa-newspaper fa-fw fa-sm" aria-hidden=true></i> Posts</a>
<i class="dropdown-icon fa-solid fa-chevron-right" aria-hidden=true></i></span><ul class=sub-menu><li class=menu-item><a class=menu-link href=/en/posts/tutos/><i class="fa-solid fa-graduation-cap fa-fw fa-sm" aria-hidden=true></i> Tutos</a></li><li class=menu-item><a class=menu-link href=/en/posts/tips/><i class="fa-solid fa-lightbulb fa-fw fa-sm" aria-hidden=true></i> Tips</a></li></ul></li><li class=menu-item><a class=menu-link href=/en/tags/><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden=true></i> Tags</a></li><li class=menu-item><a class=menu-link href=/en/about/><i class="fa-solid fa-info-circle fa-fw fa-sm" aria-hidden=true></i> About</a></li><li class="menu-item menu-system"><span class="menu-system-item theme-switch" title="Switch Theme"><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></span><span class="menu-system-item language-switch">
<span role=button aria-label="Select Language" title="Select Language">English<i class="dropdown-icon fa-solid fa-chevron-down" aria-hidden=true></i></span>
<select class=language-select onchange="location=this.value"><option value=/posts/tutos/my-first-app/15-add-animations-to-an-app/>Français</option><option value=/en/posts/tutos/my-first-app/15-add-animations-to-an-app/ selected disabled>English</option></select></span></li></ul></nav></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><nav aria-label=breadcrumb class="breadcrumb-container sticky"><ol class=breadcrumb><li class=breadcrumb-item><a href=/en/posts/ title=Posts>Posts</a></li><li class=breadcrumb-item><a href=/en/posts/tutos/ title=Tutos>Tutos</a></li><li class=breadcrumb-item><a href=/en/posts/tutos/my-first-app/ title="My first app">My first app</a></li><li class="breadcrumb-item active" aria-current=page>Create animations in .NET MAUI for a disco atmosphere</li></ol></nav><main class=container><aside class=toc id=toc-auto><h2 class=toc-title>Contents&nbsp;<i class="toc-icon fa-solid fa-angle-down fa-fw" aria-hidden=true></i></h2><div class=toc-content id=toc-content-auto></div></aside><aside class=aside-custom></aside><article class="page single"><div class=header><h1 class="single-title animate__animated animate__flipInX"><span>Create animations in .NET MAUI for a disco atmosphere</span></h1></div><div class=post-meta><div class=post-meta-line><span class=post-author><a href=https://github.com/Kapusch target=_blank rel="external nofollow noopener noreferrer author" class=author><img loading=lazy src=/main_avatar.jpg srcset="/main_avatar.jpg, /main_avatar.jpg 1.5x, /main_avatar.jpg 2x" sizes=auto data-title="Jean-Emmanuel BAILLAT" data-alt="Jean-Emmanuel BAILLAT" class=avatar style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'>&nbsp;Jean-Emmanuel BAILLAT</a></span></div><div class=post-meta-line><span title="published on 2024-01-16 00:00:15"><i class="fa-regular fa-calendar-alt fa-fw me-1" aria-hidden=true></i><time datetime=16/01/2024>16/01/2024</time></span>&nbsp;<span title="Updated on 2024-01-16 00:00:15"><i class="fa-regular fa-edit fa-fw me-1" aria-hidden=true></i><time datetime=16/01/2024>16/01/2024</time></span>&nbsp;<span><i class="fa-solid fa-pencil-alt fa-fw me-1" aria-hidden=true></i>3111 words</span>&nbsp;<span><i class="fa-regular fa-clock fa-fw me-1" aria-hidden=true></i>15 minutes</span>&nbsp;</div></div><div class="details toc" id=toc-static data-kept=false><div class="details-summary toc-title"><span>Contents</span>
<span><i class="details-icon fa-solid fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><ul><li><a href=#setting-up-the-spotlights>Setting up the spotlights</a></li><li><a href=#enhance-visuals-for-greater-realism>Enhance visuals for greater realism</a></li><li><a href=#its-the-time-to-disco>It&rsquo;s the time to Disco</a><ul><li><a href=#the-final-touch>The final touch</a></li></ul></li><li><a href=#conclusion>Conclusion</a></li></ul></li></ul></nav></div></div><div class=content id=content><p><div class="details admonition info open"><div class="details-summary admonition-title"><i class="icon fa-solid fa-info-circle fa-fw" aria-hidden=true></i>‎<i class="details-icon fa-solid fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content>This post is part of a series (<a href=..><em>”My First App”</em></a>).
To ease your read, please start from the project containing all the different steps applied so far in this tutorial. To do so, refer to the <a href=../2-setup-the-project/>project setup guide</a> and resume from the sample located in the folder <em>“5 - Music Player”</em>.</div></div></div>Welcome to the final episode of this series! ✌️ If you&rsquo;ve followed the series so far, then you should have an app you can use to listen to a few music tracks.</p><p>But the mood remains a little dull, and I promised you a disco atmosphere <a href=../1-introduction/>at the very beginning of this course</a>! So today we&rsquo;re going to learn how to use <a href=https://learn.microsoft.com/en-us/dotnet/maui/user-interface/animation/basic target=_blank rel="external nofollow noopener noreferrer">.NET MAUI animations<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a> to set the dance floor on fire.</p><p>Now it’s time to put on your sunglasses, because there will be flashes everywhere! 🪩</p><h2 id=setting-up-the-spotlights>Setting up the spotlights</h2><p>As you can see, I want it to look like we&rsquo;re in a nightclub. So to start with, we&rsquo;re going to add a few spotlights to the upper part of the screen, which is represented by our <em>Grid</em> <code>TopLayout</code>.</p><p>Ideally, you&rsquo;d want to place spotlights all over the place, in different sizes and colors&mldr; And this is clearly about parameters of an object! So we&rsquo;re going to define a new dedicated class: <code>Spotlight</code>.</p><p>Start by creating a new <em>Components</em> folder in the project. Then add a new <em>Spotlight.cs</em> file in this folder with the following content:</p><p align=center style=margin-bottom:-10px><strong>Filename:</strong><code>Spotlight.cs</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=k>using</span> <span class=nn>Microsoft.Maui.Layouts</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>namespace</span> <span class=nn>NightClub.Views.Components</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>Spotlight</span> <span class=p>:</span> <span class=n>BoxView</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=n>Spotlight</span><span class=p>(</span><span class=n>Color</span> <span class=n>color</span><span class=p>,</span> <span class=kt>double</span> <span class=n>size</span><span class=p>,</span> <span class=kt>double</span> <span class=n>positionX</span><span class=p>,</span> <span class=kt>double</span> <span class=n>positionY</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=n>Color</span> <span class=p>=</span> <span class=n>color</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>CornerRadius</span> <span class=p>=</span> <span class=n>size</span> <span class=p>/</span> <span class=m>2</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>AbsoluteLayout</span><span class=p>.</span><span class=n>SetLayoutBounds</span><span class=p>(</span><span class=k>this</span><span class=p>,</span> <span class=k>new</span> <span class=n>Rect</span><span class=p>(</span><span class=n>positionX</span><span class=p>,</span> <span class=n>positionY</span><span class=p>,</span> <span class=n>size</span><span class=p>,</span> <span class=n>size</span><span class=p>));</span>
</span></span><span class=line><span class=cl>        <span class=n>AbsoluteLayout</span><span class=p>.</span><span class=n>SetLayoutFlags</span><span class=p>(</span><span class=k>this</span><span class=p>,</span> <span class=n>AbsoluteLayoutFlags</span><span class=p>.</span><span class=n>PositionProportional</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>As you can see, this class takes the following 4 properties as parameters:</p><ul><li><p>the spotlight color (<code>color</code>),</p></li><li><p>its size (<code>size</code>),</p></li><li><p>and then, its horizontal (<code>positionX</code>) and vertical position (<code>positionY</code>).</p></li></ul><p>By the way, did you notice that <code>Spotlight</code> inherits from <a href=https://learn.microsoft.com/en-us/dotnet/maui/user-interface/controls/boxview target=_blank rel="external nofollow noopener noreferrer">BoxView<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a>? Remember, we already have used this object to <a href=../6-arrange-elements-on-a-page/#validating-the-rendering-on-screen>verify the components arrangement</a> of the <em>MusicPlayerView</em>.</p><p><div class="details admonition comment open"><div class="details-summary admonition-title"><i class="icon fa-regular fa-comments fa-fw" aria-hidden=true></i>‎<i class="details-icon fa-solid fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content>🐒‎ ‎ Clear, but a <em>BoxView</em> isn&rsquo;t round at all!</div></div></div>I can guarantee you that our projectors won&rsquo;t be rectangular. We&rsquo;re going to round them off using the <code>CornerRadius</code> property, just as we did with <a href=../8-music-player-display-media-playback/#discovering-imagebutton>the play button</a>! To do this, the <code>CornerRadius</code> value must be half the requested size (<code>size</code>).</p><p>Precisely, let&rsquo;s see how the size and position of the <code>Spotlight</code> have been defined:</p><p align=center style=margin-bottom:-10px><strong>Filename:</strong><code>Spotlight.cs</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=n>AbsoluteLayout</span><span class=p>.</span><span class=n>SetLayoutBounds</span><span class=p>(</span><span class=k>this</span><span class=p>,</span> <span class=k>new</span> <span class=n>Rect</span><span class=p>(</span><span class=n>positionX</span><span class=p>,</span> <span class=n>positionY</span><span class=p>,</span> <span class=n>size</span><span class=p>,</span> <span class=n>size</span><span class=p>));</span>
</span></span></code></pre></td></tr></table></div></div><p>With the <em>SetLayoutBounds()</em> method, we apply the requested position and size to our <em>Spotlight</em> (<code>this</code>), passing it a <a href=https://learn.microsoft.com/en-us/dotnet/api/microsoft.maui.graphics.rect.-ctor#microsoft-maui-graphics-rect-ctor%28system-double-system-double-system-double-system-double%29 target=_blank rel="external nofollow noopener noreferrer">Rect<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a> object. This is a structure representing the coordinates of our component, as well as its dimensions.</p><p>Finally, the <em>SetLayoutFlags()</em> method is used to take this position into account proportionally:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=n>AbsoluteLayout</span><span class=p>.</span><span class=n>SetLayoutFlags</span><span class=p>(</span><span class=k>this</span><span class=p>,</span> <span class=n>AbsoluteLayoutFlags</span><span class=p>.</span><span class=n>PositionProportional</span><span class=p>);</span>
</span></span></code></pre></td></tr></table></div></div><p>In short, the <em>Spotlight</em>&rsquo;s size will be set in absolute values, but its coordinates will be passed in proportional values. However, these methods can only work on elements contained in an <em>AbsoluteLayout</em>.</p><p><div class="details admonition comment open"><div class="details-summary admonition-title"><i class="icon fa-regular fa-comments fa-fw" aria-hidden=true></i>‎<i class="details-icon fa-solid fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content>🐒‎ ‎ Are we not using <em>Grid</em> after all?</div></div></div>Yes, it is! But our <em>Grid</em> <code>TopLayout</code> acts as the main container, while the projectors are added to an intermediate <a href=https://learn.microsoft.com/en-us/dotnet/maui/user-interface/layouts/absolutelayout target=_blank rel="external nofollow noopener noreferrer">AbsoluteLayout<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a> component.</p><p>Indeed, this component also lets you align elements, but in a much freer way. That&rsquo;s why you need coordinates! So you can easily place the objects wherever you like.</p><p><div class="details admonition tip open"><div class="details-summary admonition-title"><i class="icon fa-solid fa-lightbulb fa-fw" aria-hidden=true></i>‎<i class="details-icon fa-solid fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content>Moreover, it is possible to align elements outside the limits of the zone established by <em>AbsoluteLayout</em>.</div></div></div>That&rsquo;s it for the <code>Spotlight</code> class! Now all we need to do is define an <em>AbsoluteLayout</em>, add a few <em>Spotlight</em> to it, and attach the whole thing to the <code>TopLayout</code>.</p><p>To do this, we declare a new <em>InitDanceFloor()</em> method in the <em>MusicPlayerView</em>:</p><p align=center style=margin-bottom:-10px><strong>Filename:</strong><code>MusicPlayerView.cs</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=c1>// Do not forget to add &#34;using NightClub.Views.Components;&#34; !</span>
</span></span><span class=line><span class=cl><span class=cp>#region</span> <span class=n>Dance</span> <span class=n>Floor</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>void</span> <span class=n>InitDanceFloor</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// We define an intermediate container of type AbsoluteLayout... </span>
</span></span><span class=line><span class=cl>    <span class=n>AbsoluteLayout</span> <span class=n>spotlights</span> <span class=p>=</span> <span class=k>new</span> <span class=n>AbsoluteLayout</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>Children</span> <span class=p>=</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=c1>// ... to which we add a few Spotlight...</span>
</span></span><span class=line><span class=cl>            <span class=k>new</span> <span class=n>Spotlight</span><span class=p>(</span><span class=n>Colors</span><span class=p>.</span><span class=n>Blue</span><span class=p>,</span> <span class=m>200</span><span class=p>,</span> <span class=m>0</span><span class=p>,</span> <span class=m>0</span><span class=p>),</span>
</span></span><span class=line><span class=cl>            <span class=k>new</span> <span class=n>Spotlight</span><span class=p>(</span><span class=n>Colors</span><span class=p>.</span><span class=n>Orange</span><span class=p>,</span> <span class=m>150</span><span class=p>,</span> <span class=m>0.8</span><span class=p>,</span> <span class=m>0.9</span><span class=p>),</span>
</span></span><span class=line><span class=cl>            <span class=k>new</span> <span class=n>Spotlight</span><span class=p>(</span><span class=n>Colors</span><span class=p>.</span><span class=n>Pink</span><span class=p>,</span> <span class=m>100</span><span class=p>,</span> <span class=m>0.9</span><span class=p>,</span> <span class=m>0.2</span><span class=p>),</span>
</span></span><span class=line><span class=cl>            <span class=k>new</span> <span class=n>Spotlight</span><span class=p>(</span><span class=n>Colors</span><span class=p>.</span><span class=n>Yellow</span><span class=p>,</span> <span class=m>120</span><span class=p>,</span> <span class=m>0.3</span><span class=p>,</span> <span class=m>0.6</span><span class=p>),</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// ... and it&#39;s all added to the main container!</span>
</span></span><span class=line><span class=cl>    <span class=n>TopLayout</span><span class=p>.</span><span class=n>Add</span><span class=p>(</span><span class=n>spotlights</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cp>#endregion</span>
</span></span></code></pre></td></tr></table></div></div><p>Then call this method from the <em>View</em> constructor:</p><p align=center style=margin-bottom:-10px><strong>Filename:</strong><code>MusicPlayerView.cs</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kd>public</span> <span class=n>MusicPlayerView</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=p>...</span>
</span></span><span class=line><span class=cl>    <span class=n>InitDanceFloor</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>...</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>And finally, for this to work, we need to modify the declaration of <code>TopLayout</code> so that it is no longer immutable:</p><p align=center style=margin-bottom:-10px><strong>Filename:</strong><code>MusicPlayerView.cs</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=n>Grid</span> <span class=n>TopLayout</span> <span class=p>=</span> <span class=k>new</span> <span class=n>Grid</span> <span class=c1>// The “=&gt;” sign has been replaced with “=”</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>BackgroundColor</span> <span class=p>=</span> <span class=n>Colors</span><span class=p>.</span><span class=n>Black</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span></code></pre></td></tr></table></div></div><p>Tadam! Here&rsquo;s how it looks:</p><p align=center><img max-width=100% max-height=100% src=./images/2D84AB449FE9843B02AB40D147939346.png></p><figure><figcaption class=image-caption>A few colourful circles... a far cry from the discotheque!</figcaption></figure><p>What do you mean, you&rsquo;re disappointed?! 🙊</p><p>I know, it&rsquo;s not super convincing&mldr; yet! So let&rsquo;s move on to the next part to get a better visual.</p><h2 id=enhance-visuals-for-greater-realism>Enhance visuals for greater realism</h2><p>Until now, all we had to do to paint our visual elements was define a color and the magic would happen in the background. Now, however, there are different coloring techniques that can help us achieve a better visual effect: these are called <a href=https://learn.microsoft.com/en-us/dotnet/maui/user-interface/brushes/ target=_blank rel="external nofollow noopener noreferrer">Brushes<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a>.</p><p>For example, we&rsquo;ll use <a href=https://learn.microsoft.com/en-us/dotnet/maui/user-interface/brushes/radialgradient target=_blank rel="external nofollow noopener noreferrer">RadialGradientBrush<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a> to apply a nice radial gradient:</p><p align=center style=margin-bottom:-10px><strong>Filename:</strong><code>Spotlight.cs</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kd>public</span> <span class=n>Spotlight</span><span class=p>(</span><span class=n>Color</span> <span class=n>color</span><span class=p>,</span> <span class=kt>double</span> <span class=n>size</span><span class=p>,</span> <span class=kt>double</span> <span class=n>positionX</span><span class=p>,</span> <span class=kt>double</span> <span class=n>positionY</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// You can now remove the following line:</span>
</span></span><span class=line><span class=cl>    <span class=c1>// this.Color = color;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>Background</span> <span class=p>=</span> <span class=k>new</span> <span class=n>RadialGradientBrush</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>GradientStops</span> <span class=p>=</span> <span class=k>new</span> <span class=n>GradientStopCollection</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>new</span> <span class=n>GradientStop</span><span class=p>(</span><span class=n>color</span><span class=p>,</span> <span class=m>0</span><span class=p>),</span>
</span></span><span class=line><span class=cl>            <span class=k>new</span> <span class=n>GradientStop</span><span class=p>(</span><span class=n>Colors</span><span class=p>.</span><span class=n>Transparent</span><span class=p>,</span> <span class=m>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>};</span>
</span></span><span class=line><span class=cl>    <span class=p>...</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>In concrete terms, we defined a color gradient from the center of the <em>Spotlight</em> to its edges, using two <a href=https://learn.microsoft.com/en-us/dotnet/api/microsoft.maui.controls.gradientstop.-ctor/#microsoft-maui-controls-gradientstop-ctor%28microsoft-maui-graphics-color-system-single%29 target=_blank rel="external nofollow noopener noreferrer">GradientStops<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a>:</p><ol><li><p>With the instruction <code>GradientStop(color, 0)</code>, the center of the <em>Spotlight</em> (<code>0</code>) is first painted with the requested color (<code>color</code>),</p></li><li><p>Next, <code>GradientStop(Colors.Transparent, 1)</code> is used to gradient towards total <a href=https://learn.microsoft.com/en-us/dotnet/api/microsoft.maui.graphics.colors.transparent/#microsoft-maui-graphics-colors-transparent target=_blank rel="external nofollow noopener noreferrer">transparency<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a> (<code>Colors.Transparent</code>) at the <em>Spotlight</em> circumference (<code>1</code>).</p></li></ol><p>And thanks to the transparency effect, the black background of the <code>TopLayout</code> will appear.</p><p><div class="details admonition info open"><div class="details-summary admonition-title"><i class="icon fa-solid fa-info-circle fa-fw" aria-hidden=true></i>‎<i class="details-icon fa-solid fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content>No need for the <code>Color</code> property when using the <code>Background</code> property.</div></div></div>Next, we&rsquo;re going to use <a href=https://learn.microsoft.com/en-us/dotnet/maui/user-interface/shadow target=_blank rel="external nofollow noopener noreferrer">Shadow<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a> to give a shiny effect:</p><p align=center style=margin-bottom:-10px><strong>Filename:</strong><code>Spotlight.cs</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kd>public</span> <span class=n>Spotlight</span><span class=p>(</span><span class=n>Color</span> <span class=n>color</span><span class=p>,</span> <span class=kt>double</span> <span class=n>size</span><span class=p>,</span> <span class=kt>double</span> <span class=n>positionX</span><span class=p>,</span> <span class=kt>double</span> <span class=n>positionY</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=p>...</span>
</span></span><span class=line><span class=cl>    <span class=n>Shadow</span> <span class=p>=</span> <span class=k>new</span> <span class=n>Shadow</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>Radius</span> <span class=p>=</span> <span class=p>(</span><span class=kt>float</span><span class=p>)(</span><span class=n>size</span> <span class=p>/</span> <span class=m>2</span><span class=p>),</span>
</span></span><span class=line><span class=cl>        <span class=n>Brush</span> <span class=p>=</span> <span class=k>new</span> <span class=n>SolidColorBrush</span><span class=p>(</span><span class=n>color</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>};</span>
</span></span><span class=line><span class=cl>    <span class=p>...</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>This code adds a shadow to the <em>Spotlight</em> that is both colored and blurred:</p><ul><li><p>It&rsquo;s the <code>Radius</code> property that gives this blurred effect, accentuated according to the object&rsquo;s size (<code>size / 2</code>),</p></li><li><p>And the shadow is painted with a full color, thanks to the use of <a href=https://learn.microsoft.com/en-us/dotnet/maui/user-interface/brushes/solidcolor target=_blank rel="external nofollow noopener noreferrer">SolidColorBrush<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a>.</p></li></ul><p>Let&rsquo;s see again how it looks like:</p><p align=center><img max-width=100% max-height=100% src=./images/0FBBAB1BB2166CA9C695633CA64B8C5E.png></p><figure><figcaption class=image-caption>The spotlights are much more realistic!</figcaption></figure><p>Better there, isn&rsquo;t it? 🙂</p><p>But these new adjustments contrast a little bit with the <code>BottomLayout</code>, and the <em>Grid</em> should be made less opaque.</p><p><div class="details admonition comment open"><div class="details-summary admonition-title"><i class="icon fa-regular fa-comments fa-fw" aria-hidden=true></i>‎<i class="details-icon fa-solid fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content>🐒‎ ‎ Can&rsquo;t you play with the <code>Opacity</code> property?</div></div></div>Not really&mldr; otherwise the entire content of the <code>BottomLayout</code> would become transparent! This means we wouldn&rsquo;t be able to see our controls, and that wouldn&rsquo;t be practical.</p><p>Instead, we&rsquo;ll change its color by adding a little transparency, like this:</p><p align=center style=margin-bottom:-10px><strong>Filename:</strong><code>MusicPlayerView.cs</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=n>Grid</span> <span class=n>BottomLayout</span> <span class=p>=&gt;</span> <span class=k>new</span> <span class=n>Grid</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>BackgroundColor</span> <span class=p>=</span> <span class=n>Colors</span><span class=p>.</span><span class=n>DimGray</span><span class=p>.</span><span class=n>WithAlpha</span><span class=p>(</span><span class=m>0.4f</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=p>...</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span></code></pre></td></tr></table></div></div><p>See, it&rsquo;s still the same color! But it now contains <a href=https://learn.microsoft.com/en-us/dotnet/maui/user-interface/graphics/colors/#modify-a-color target=_blank rel="external nofollow noopener noreferrer">40% transparency<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a>, thanks to the <em>WithAlpha()</em> method.</p><p>And here’s the result!</p><p align=center><img max-width=100% max-height=100% src=./images/1F2D95853E0DF3ADF6894BBC8D808A0F.png></p><figure><figcaption class=image-caption>Transparency makes it more modern!</figcaption></figure><p>Well, it&rsquo;s all very nice, but still very static. What we need is a little madness, some animation! Just in time, we&rsquo;ll be discovering <a href=https://learn.microsoft.com/en-us/dotnet/maui/user-interface/animation/basic target=_blank rel="external nofollow noopener noreferrer">animations in .NET MAUI<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a> right after this.</p><h2 id=its-the-time-to-disco>It&rsquo;s the time to Disco</h2><p>In this part, we&rsquo;ll look at how to bring a little dynamism to our spotlights. After all, what we want is a real nightclub atmosphere 🙂</p><p>To do this, we&rsquo;re going to modify the <em>Spotlight</em> class to make our projectors blink, a bit like flashbulbs, you know? We&rsquo;ll use a <a href=https://learn.microsoft.com/en-us/dotnet/maui/user-interface/animation/basic/#fading target=_blank rel="external nofollow noopener noreferrer">fade animation<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a> to gradually make our spotlights appear and disappear on the screen.</p><p>Let&rsquo;s get to work! Start by applying the following modifications:</p><p align=center style=margin-bottom:-10px><strong>Filename:</strong><code>Spotlight.cs</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>Spotlight</span> <span class=p>:</span> <span class=n>BoxView</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// We&#39;ve added 3 new properties...</span>
</span></span><span class=line><span class=cl>    <span class=kd>const</span> <span class=kt>string</span> <span class=n>AnimationName</span> <span class=p>=</span> <span class=s>&#34;fadeInAndOut&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>uint</span> <span class=n>AnimationLength</span> <span class=p>{</span> <span class=k>get</span><span class=p>;</span> <span class=k>set</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>Animation</span> <span class=n>SpotlightAnimation</span> <span class=p>{</span> <span class=k>get</span><span class=p>;</span> <span class=k>set</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// ... and one more parameter to the constructor! </span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=n>Spotlight</span><span class=p>(</span><span class=n>Color</span> <span class=n>color</span><span class=p>,</span> <span class=kt>double</span> <span class=n>size</span><span class=p>,</span> <span class=kt>double</span> <span class=n>positionX</span><span class=p>,</span> <span class=kt>double</span> <span class=n>positionY</span><span class=p>,</span> <span class=kt>uint</span> <span class=n>animationLength</span> <span class=p>=</span> <span class=m>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=p>...</span>
</span></span><span class=line><span class=cl>        <span class=c1>// Finally, the animation time is persisted.</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=n>AnimationLength</span> <span class=p>=</span> <span class=n>animationLength</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>SetAnimation</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>First of all, we&rsquo;ve added a new parameter: <code>animationLength</code>. This defines the length of time (in milliseconds) over which the animation will repeat in a loop.</p><p>We&rsquo;ve also taken the opportunity to add a few properties that we&rsquo;ll be using a little later. Among them is <code>SpotlightAnimation</code>, which contains the definition of the <em>Spotlight</em> animation.</p><p>Precisely, let&rsquo;s add a new method to the <em>Spotlight</em> class to define this animation:</p><p align=center style=margin-bottom:-10px><strong>Filename:</strong><code>Spotlight.cs</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=k>void</span> <span class=n>SetAnimation</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=n>AnimationLength</span> <span class=p>&lt;=</span> <span class=m>0</span><span class=p>)</span> <span class=k>return</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kt>var</span> <span class=n>fadeInAnimation</span> <span class=p>=</span> <span class=k>new</span> <span class=n>Animation</span><span class=p>(</span><span class=n>v</span> <span class=p>=&gt;</span> <span class=n>Opacity</span> <span class=p>=</span> <span class=n>v</span><span class=p>,</span> <span class=n>start</span><span class=p>:</span> <span class=m>0</span><span class=p>,</span> <span class=n>end</span><span class=p>:</span> <span class=m>1</span><span class=p>,</span> <span class=n>Easing</span><span class=p>.</span><span class=n>CubicOut</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=kt>var</span> <span class=n>fadeOutAnimation</span> <span class=p>=</span> <span class=k>new</span> <span class=n>Animation</span><span class=p>(</span><span class=n>v</span> <span class=p>=&gt;</span> <span class=n>Opacity</span> <span class=p>=</span> <span class=n>v</span><span class=p>,</span> <span class=n>start</span><span class=p>:</span> <span class=m>1</span><span class=p>,</span> <span class=n>end</span><span class=p>:</span> <span class=m>0</span><span class=p>,</span> <span class=n>Easing</span><span class=p>.</span><span class=n>CubicOut</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>SpotlightAnimation</span> <span class=p>=</span> <span class=k>new</span> <span class=n>Animation</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span> <span class=m>0</span><span class=p>,</span> <span class=m>0.5</span><span class=p>,</span> <span class=n>fadeInAnimation</span> <span class=p>},</span> <span class=c1>// In action from 0 to 50% of the execution</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span> <span class=m>0.5</span><span class=p>,</span> <span class=m>1</span><span class=p>,</span> <span class=n>fadeOutAnimation</span> <span class=p>}</span> <span class=c1>// In action from 50 to 100% of the execution</span>
</span></span><span class=line><span class=cl>    <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>StartAnimation</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>It&rsquo;s a bit technical, but not complicated. I&rsquo;ll explain! 🤓</p><p>The <code>SpotlightAnimation</code> property is a <a href=https://learn.microsoft.com/en-us/dotnet/maui/user-interface/animation/custom target=_blank rel="external nofollow noopener noreferrer">custom animation<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a> composed of two underlying animations:</p><ol><li><p>A fade-in that gradually changes the <em>Spotlight</em>&rsquo;s opacity from 0 to 1, throughout the first half of the animation: <code>{ 0, 0.5, fadeInAnimation }</code>,</p></li><li><p>And an outgoing fade, which does exactly the opposite throughout the second half of the animation: <code>{ 0.5, 1, fadeOutAnimation }</code>.</p></li></ol><p>As for the <code>Easing.CubicOut</code> option, it&rsquo;s just a stylish effect to make the animation slow down quickly after it has started.</p><p><div class="details admonition tip open"><div class="details-summary admonition-title"><i class="icon fa-solid fa-lightbulb fa-fw" aria-hidden=true></i>‎<i class="details-icon fa-solid fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content>Going further with the <a href=https://learn.microsoft.com/en-us/dotnet/maui/user-interface/animation/easing target=_blank rel="external nofollow noopener noreferrer">various types of animation rendering<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a>.</div></div></div>That&rsquo;s it for the <em>SetAnimation()</em> method&mldr; well, almost!</p><p><div class="details admonition comment open"><div class="details-summary admonition-title"><i class="icon fa-regular fa-comments fa-fw" aria-hidden=true></i>‎<i class="details-icon fa-solid fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content>🐒‎ ‎ Hey, hey, hey! What did we miss? 🙈</div></div></div>At the end of the method, you&rsquo;ll see the <code>StartAnimation();</code> instruction. This will trigger execution of the freshly initialized animation.</p><p>Here’s its definition:</p><p align=center style=margin-bottom:-10px><strong>Filename:</strong><code>Spotlight.cs</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kd>public</span> <span class=k>void</span> <span class=n>StartAnimation</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=n>AnimationLength</span> <span class=p>&lt;=</span> <span class=m>0</span><span class=p>)</span> <span class=k>return</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>SpotlightAnimation</span><span class=p>.</span><span class=n>Commit</span><span class=p>(</span><span class=k>this</span><span class=p>,</span> <span class=n>AnimationName</span><span class=p>,</span> <span class=n>length</span><span class=p>:</span> <span class=n>AnimationLength</span><span class=p>,</span> <span class=n>repeat</span><span class=p>:</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=kc>true</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>As you can see, it&rsquo;s the <a href=https://learn.microsoft.com/en-us/dotnet/api/microsoft.maui.controls.animation.commit target=_blank rel="external nofollow noopener noreferrer">Commit()<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a> method that launches the animation defined above. Breaking down the parameters passed to <em>Commit</em>, we have:</p><ul><li><p>An animation name (<code>AnimationName</code>), set arbitrarily by a constant,</p></li><li><p>An execution length (<code>AnimationLength</code>), passed as a parameter to the <em>Spotlight</em> class constructor,</p></li><li><p>And a repeat mode (<code>repeat: () => true</code>), to loop the animation indefinitely.</p></li></ul><p>Take a moment to assimilate all these new changes!</p><p><div class="details admonition note open"><div class="details-summary admonition-title"><i class="icon fa-solid fa-pencil-alt fa-fw" aria-hidden=true></i>‎<i class="details-icon fa-solid fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content>In some cases, animations can be disabled by the system. For example, for accessibility or energy-saving reasons.</div></div></div>And when you&rsquo;re ready, return to the <em>MusicPlayerView</em> code to modify the <em>InitDanceFloor()</em> method and adapt the <em>Spotlight</em> initialization, like this:</p><p align=center style=margin-bottom:-10px><strong>Filename:</strong><code>MusicPlayerView.cs</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=n>AbsoluteLayout</span> <span class=n>spotlights</span> <span class=p>=</span> <span class=k>new</span> <span class=n>AbsoluteLayout</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>Children</span> <span class=p>=</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// An animation length is defined for each Spotlight</span>
</span></span><span class=line><span class=cl>        <span class=k>new</span> <span class=n>Spotlight</span><span class=p>(</span><span class=n>Colors</span><span class=p>.</span><span class=n>Blue</span><span class=p>,</span> <span class=m>200</span><span class=p>,</span> <span class=m>0</span><span class=p>,</span> <span class=m>0</span><span class=p>,</span> <span class=m>2000</span><span class=p>),</span>
</span></span><span class=line><span class=cl>        <span class=k>new</span> <span class=n>Spotlight</span><span class=p>(</span><span class=n>Colors</span><span class=p>.</span><span class=n>Orange</span><span class=p>,</span> <span class=m>150</span><span class=p>,</span> <span class=m>0.8</span><span class=p>,</span> <span class=m>0.9</span><span class=p>,</span> <span class=m>1000</span><span class=p>),</span>
</span></span><span class=line><span class=cl>        <span class=k>new</span> <span class=n>Spotlight</span><span class=p>(</span><span class=n>Colors</span><span class=p>.</span><span class=n>Pink</span><span class=p>,</span> <span class=m>100</span><span class=p>,</span> <span class=m>0.9</span><span class=p>,</span> <span class=m>0.2</span><span class=p>,</span> <span class=m>500</span><span class=p>),</span>
</span></span><span class=line><span class=cl>        <span class=k>new</span> <span class=n>Spotlight</span><span class=p>(</span><span class=n>Colors</span><span class=p>.</span><span class=n>Yellow</span><span class=p>,</span> <span class=m>120</span><span class=p>,</span> <span class=m>0.3</span><span class=p>,</span> <span class=m>0.6</span><span class=p>,</span> <span class=m>1500</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span></code></pre></td></tr></table></div></div><p>We simply defined a different animation time to make each of our spotlights unique.</p><p>Quickly rebuild the project to see the results!</p><p align=center><img max-width=100% max-height=100% src=./images/32EED84F7C3FC4031160AAB335312DDF.gif></p><figure><figcaption class=image-caption>The projectors turn on and off at different speeds - now that's disco!</figcaption></figure><p>Tadaaaam! Sounds like the real thing, what do you think?</p><p><div class="details admonition comment open"><div class="details-summary admonition-title"><i class="icon fa-regular fa-comments fa-fw" aria-hidden=true></i>‎<i class="details-icon fa-solid fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content>🐒‎ ‎ Great! But if the animations are repeated over and over again, will it ever stop?</div></div></div>This infinite looping is indeed practical, but it could pose a problem for the user experience. Imagine if the music stopped playing! It would be better if the animation stopped playing too.</p><p>We&rsquo;ll see you right after!</p><h3 id=the-final-touch>The final touch</h3><p>Hang in there! We&rsquo;re going to tackle a few more small improvements and that&rsquo;ll be the end of this tutorial.</p><p>Let&rsquo;s start by looking at how to <a href=https://learn.microsoft.com/en-us/dotnet/maui/user-interface/animation/custom/#cancel-an-animation target=_blank rel="external nofollow noopener noreferrer">stop a running animation<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a>. To do this, go back to the <em>Spotlight</em> class and add the new following method:</p><p align=center style=margin-bottom:-10px><strong>Filename:</strong><code>Spotlight.cs</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kd>public</span> <span class=k>void</span> <span class=n>StopAnimation</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=n>AbortAnimation</span><span class=p>(</span><span class=n>AnimationName</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=n>Opacity</span> <span class=p>=</span> <span class=m>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>All we need to do is call the <em>AbortAnimation()</em> method to cancel a running animation, using its name (<code>AnimationName</code>). Remember, this is one of the parameters we passed to the <em>Commit()</em> method!</p><p><div class="details admonition info open"><div class="details-summary admonition-title"><i class="icon fa-solid fa-info-circle fa-fw" aria-hidden=true></i>‎<i class="details-icon fa-solid fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content>You can&rsquo;t predict the state in which animation will stop. So we set the <em>Spotlight</em> opacity to 0 to hide it completely when the music stops playing.</div></div></div>Next, let&rsquo;s see how to play the animation depending on whether the music is playing or not. To do this, we need to establish a connection between the <em>Spotlight</em> and the <em>MediaElement</em>.</p><p>Let&rsquo;s begin by modifying the <code>Spotlight</code> class:</p><p align=center style=margin-bottom:-10px><strong>Filename:</strong><code>Spotlight.cs</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=c1>// Please note that 3 new using are required!</span>
</span></span><span class=line><span class=cl><span class=k>using</span> <span class=nn>CommunityToolkit.Maui.Core.Primitives</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>using</span> <span class=nn>CommunityToolkit.Maui.Markup</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>using</span> <span class=nn>CommunityToolkit.Maui.Views</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>...</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>Spotlight</span> <span class=p>:</span> <span class=n>BoxView</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=p>...</span>
</span></span><span class=line><span class=cl>    <span class=c1>// A new parameter is added to the constructor...</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=n>Spotlight</span><span class=p>(</span><span class=n>Color</span> <span class=n>color</span><span class=p>,</span> <span class=kt>double</span> <span class=n>size</span><span class=p>,</span> <span class=kt>double</span> <span class=n>positionX</span><span class=p>,</span> <span class=kt>double</span> <span class=n>positionY</span><span class=p>,</span> <span class=kt>uint</span> <span class=n>animationLength</span> <span class=p>=</span> <span class=m>0</span><span class=p>,</span> <span class=n>MediaElement</span> <span class=n>bindableMediaElement</span> <span class=p>=</span> <span class=kc>null</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=p>...</span>
</span></span><span class=line><span class=cl>        <span class=c1>// ... for animation setup purposes.</span>
</span></span><span class=line><span class=cl>        <span class=n>SetAnimation</span><span class=p>(</span><span class=n>bindableMediaElement</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>...</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>To avoid code repetition, we&rsquo;ve added a new <code>bindableMediaElement</code> parameter of type <em>MediaElement</em>. In fact, we&rsquo;re going to pass our <code>MusicPlayer</code> component to the initialization of each <em>Spotlight</em> for animation setup purposes.</p><p>We&rsquo;ll now modify the <em>SetAnimation()</em> method to apply the new animation execution conditions:</p><p align=center style=margin-bottom:-10px><strong>Filename:</strong><code>Spotlight.cs</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=k>void</span> <span class=n>SetAnimation</span><span class=p>(</span><span class=n>MediaElement</span> <span class=n>mediaElement</span> <span class=p>=</span> <span class=kc>null</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=p>...</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span><span class=p>(</span><span class=n>mediaElement</span> <span class=p>!=</span> <span class=kc>null</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=n>Bind</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=n>source</span><span class=p>:</span> <span class=n>mediaElement</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>path</span><span class=p>:</span> <span class=n>nameof</span><span class=p>(</span><span class=n>mediaElement</span><span class=p>.</span><span class=n>CurrentState</span><span class=p>),</span>
</span></span><span class=line><span class=cl>            <span class=n>convert</span><span class=p>:</span> <span class=p>(</span><span class=n>MediaElementState</span> <span class=n>currentState</span><span class=p>)</span> <span class=p>=&gt;</span>
</span></span><span class=line><span class=cl>            <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=p>(</span><span class=n>currentState</span> <span class=p>!=</span> <span class=n>MediaElementState</span><span class=p>.</span><span class=n>Playing</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                    <span class=n>StopAnimation</span><span class=p>();</span>
</span></span><span class=line><span class=cl>                <span class=k>else</span>
</span></span><span class=line><span class=cl>                    <span class=n>StartAnimation</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=kc>true</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=p>});</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>Now that we have access to our <em>MediaElement</em>, we&rsquo;ve applied the <em>Data Binding</em> technique to the <code>CurrentState</code> property so that the animation is :</p><ul><li><p>Started when music is playing,</p></li><li><p>Or stopped if it’s paused.</p></li></ul><p>And as always, don&rsquo;t forget to adapt <em>Spotlight</em> initialization in the <em>InitDanceFloor()</em> method, like this:</p><p align=center style=margin-bottom:-10px><strong>Filename:</strong><code>MusicPlayerView.cs</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=n>AbsoluteLayout</span> <span class=n>spotlights</span> <span class=p>=</span> <span class=k>new</span> <span class=n>AbsoluteLayout</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>Children</span> <span class=p>=</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// We now pass the MusicPlayer to each Spotlight</span>
</span></span><span class=line><span class=cl>        <span class=k>new</span> <span class=n>Spotlight</span><span class=p>(</span><span class=n>Colors</span><span class=p>.</span><span class=n>Blue</span><span class=p>,</span> <span class=m>200</span><span class=p>,</span> <span class=m>0</span><span class=p>,</span> <span class=m>0</span><span class=p>,</span> <span class=m>2000</span><span class=p>,</span> <span class=n>MusicPlayer</span><span class=p>),</span>
</span></span><span class=line><span class=cl>        <span class=k>new</span> <span class=n>Spotlight</span><span class=p>(</span><span class=n>Colors</span><span class=p>.</span><span class=n>Orange</span><span class=p>,</span> <span class=m>150</span><span class=p>,</span> <span class=m>0.8</span><span class=p>,</span> <span class=m>0.9</span><span class=p>,</span> <span class=m>1000</span><span class=p>,</span> <span class=n>MusicPlayer</span><span class=p>),</span>
</span></span><span class=line><span class=cl>        <span class=k>new</span> <span class=n>Spotlight</span><span class=p>(</span><span class=n>Colors</span><span class=p>.</span><span class=n>Pink</span><span class=p>,</span> <span class=m>100</span><span class=p>,</span> <span class=m>0.9</span><span class=p>,</span> <span class=m>0.2</span><span class=p>,</span> <span class=m>500</span><span class=p>,</span> <span class=n>MusicPlayer</span><span class=p>),</span>
</span></span><span class=line><span class=cl>        <span class=k>new</span> <span class=n>Spotlight</span><span class=p>(</span><span class=n>Colors</span><span class=p>.</span><span class=n>Yellow</span><span class=p>,</span> <span class=m>120</span><span class=p>,</span> <span class=m>0.3</span><span class=p>,</span> <span class=m>0.6</span><span class=p>,</span> <span class=m>1500</span><span class=p>,</span> <span class=n>MusicPlayer</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span></code></pre></td></tr></table></div></div><p>Here, we&rsquo;ve simply switched the <code>MusicPlayer</code> to <em>Spotlight</em> initialization, so that each projector can be switched on and off as the music plays.</p><p>I trust you&rsquo;ll check that it&rsquo;s working properly before we add the final touches. Yes, our dance floor is still short of passionate dancers!</p><p>Start by downloading the following two new images in <em>.svg</em> format:</p><ul><li><p>The first shows large speakers (<em>speakers.svg</em>),</p></li><li><p>And the other, our famous dancers (<em>joyful_dancers.svg</em>).</p></li></ul><p><a href=./files/Dance_Floor_-_Images.zip title="Download Dance_Floor_-_Images.zip" class=card-link download=Dance_Floor_-_Images.zip><span class=cl-backdrop style=--cl-bg-url:url(/fixit.min.svg)></span>
<span class=cl-content><span class=cl-text><span class=cl-title>Dance_Floor_-_Images.zip</span>
<span class=cl-meta><svg class="cl-icon-link" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="16" height="16"><path d="M574 665.4c-3.1-3.1-8.2-3.1-11.3.0L446.5 781.6c-53.8 53.8-144.6 59.5-204 0-59.5-59.5-53.8-150.2.0-204l116.2-116.2c3.1-3.1 3.1-8.2.0-11.3l-39.8-39.8c-3.1-3.1-8.2-3.1-11.3.0L191.4 526.5c-84.6 84.6-84.6 221.5.0 306s221.5 84.6 306 0l116.2-116.2c3.1-3.1 3.1-8.2.0-11.3L574 665.4zm258.6-474c-84.6-84.6-221.5-84.6-306 0L410.3 307.6c-3.1 3.1-3.1 8.2.0 11.3l39.7 39.7c3.1 3.1 8.2 3.1 11.3.0l116.2-116.2c53.8-53.8 144.6-59.5 204 0 59.5 59.5 53.8 150.2.0 204L665.3 562.6c-3.1 3.1-3.1 8.2.0 11.3l39.8 39.8c3.1 3.1 8.2 3.1 11.3.0l116.2-116.2c84.5-84.6 84.5-221.5.0-306.1z" fill="#a9a9b3"/><path d="M610.1 372.3c-3.1-3.1-8.2-3.1-11.3.0L372.3 598.7c-3.1 3.1-3.1 8.2.0 11.3l39.6 39.6c3.1 3.1 8.2 3.1 11.3.0l226.4-226.4c3.1-3.1 3.1-8.2.0-11.3l-39.5-39.6z" fill="#a9a9b3"/></svg>
<span class=cl-url>./files/Dance_Floor_-_Images.zip</span>
</span></span><svg class="cl-icon-download" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="64" height="64"><path d="M824.32 473.6c-15.36-2.56-25.6-15.36-25.6-30.72.0-112.64-71.68-217.6-179.2-250.88-148.48-46.08-289.28 38.4-332.8 166.4-2.56 10.24-12.8 17.92-23.04 20.48C143.36 401.92 51.2 509.44 51.2 637.44V640c0 115.2 97.28 204.8 209.92 204.8h524.8c102.4-2.56 184.32-84.48 184.32-186.88 2.56-89.6-61.44-163.84-145.92-184.32zM550.4 698.88c-12.8 12.8-30.72 15.36-46.08 10.24H501.76c-5.12-2.56-10.24-5.12-15.36-10.24L366.08 578.56c-15.36-15.36-15.36-43.52.0-58.88s43.52-15.36 58.88.0l51.2 51.2V352.4608c0-23.04 17.92-40.96 40.96-40.96 23.04.0 40.96 17.92 40.96 40.96V570.88l51.2-51.2c17.92-17.92 43.52-17.92 61.44.0 17.92 15.36 17.92 40.96.0 58.88L550.4 698.88z" fill="#4fc089"/></svg></span></a>
Once you&rsquo;ve unpacked the <em>.zip</em> file, add the images to the <em>Resources/Images</em> folder.</p><p><div class="details admonition info open"><div class="details-summary admonition-title"><i class="icon fa-solid fa-info-circle fa-fw" aria-hidden=true></i>‎<i class="details-icon fa-solid fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content>If any doubts about how to do this, you can refer <a href=../8-music-player-display-media-playback/>to this chapter</a>.</div></div></div>Finally, add them to the <code>TopLayout</code> as follows:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=k>void</span> <span class=n>InitDanceFloor</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=p>...</span>
</span></span><span class=line><span class=cl>    <span class=n>TopLayout</span><span class=p>.</span><span class=n>Add</span><span class=p>(</span><span class=n>spotlights</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=c1>// .NET MAUI converts SVG files to PNG format.</span>
</span></span><span class=line><span class=cl>    <span class=n>TopLayout</span><span class=p>.</span><span class=n>Add</span><span class=p>(</span><span class=k>new</span> <span class=n>Image</span><span class=p>()</span> <span class=p>{</span> <span class=n>Source</span> <span class=p>=</span> <span class=s>&#34;speakers.png&#34;</span> <span class=p>}.</span><span class=n>Bottom</span><span class=p>());</span>
</span></span><span class=line><span class=cl>    <span class=n>TopLayout</span><span class=p>.</span><span class=n>Add</span><span class=p>(</span><span class=k>new</span> <span class=n>Image</span><span class=p>()</span> <span class=p>{</span> <span class=n>Source</span> <span class=p>=</span> <span class=s>&#34;joyful_dancers.png&#34;</span> <span class=p>}.</span><span class=n>Bottom</span><span class=p>());</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>With the <em>Add()</em> method, we add all our objects one after the other to the single cell that makes up the <em>Grid</em> <code>TopLayout</code>.</p><p><div class="details admonition comment open"><div class="details-summary admonition-title"><i class="icon fa-regular fa-comments fa-fw" aria-hidden=true></i>‎<i class="details-icon fa-solid fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content>🐒‎ ‎ A single slot for 3 objects? But how is that possible?</div></div></div>Indeed, if you recall the <a href=https://learn.microsoft.com/en-us/dotnet/maui/user-interface/layouts/grid/#rows-and-columns target=_blank rel="external nofollow noopener noreferrer">documentation<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a>, the <em>Grid</em> has only one row and one column by default. In other words, it&rsquo;s nothing more or less than a grid made up of a single cell.</p><p>As a result, the elements will stack on top of each other! That&rsquo;s exactly what we&rsquo;re aiming for, to create a true sense of depth:</p><ul><li><p>In the background are our projectors (<code>spotlights</code>),</p></li><li><p>Then the loud speakers,</p></li><li><p>And finally, our dancers come to the foreground.</p></li></ul><p>Come on, let&rsquo;s relaunch the app!</p><p align=center><img max-width=100% max-height=100% src=./images/F0A9AB44253D46567E3073BF454BD300.png></p><figure><figcaption class=image-caption>Now that's a party!</figcaption></figure><p>I hope you&rsquo;re happy with the result. In any case, congratulations on your work so far! 🤓</p><div class="details admonition info open"><div class="details-summary admonition-title"><i class="icon fa-solid fa-info-circle fa-fw" aria-hidden=true></i>‎<i class="details-icon fa-solid fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content>If the images don&rsquo;t display, remember to clean up and recompile the entire project.</div></div></div><h2 id=conclusion>Conclusion</h2><p>This post brings us to the end of this course, a total of 2h30 of reading which I hope you&rsquo;ve enjoyed and will inspire you with lots of ideas. And thank you for your loyalty if you&rsquo;ve taken the whole course! If you have a moment, drop me a comment or send me an e-mail to let me know what you thought about it.</p><p>By the way, if you want to have fun going further (and I heartily encourage you to! 🙂 ), you can try generating the projectors completely randomly. You can always compare your solution with mine by looking directly at the final project code!</p><p><div class="details admonition info open"><div class="details-summary admonition-title"><i class="icon fa-solid fa-info-circle fa-fw" aria-hidden=true></i>‎<i class="details-icon fa-solid fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content>To get the project containing all the steps applied so far in this tutorial, refer to the <a href=../2-setup-the-project/>project setup guide</a> and start from the example in the <em>&ldquo;Full Solution&rdquo;</em> folder.</div></div></div>And if you want even more, here are a few other ideas for improvement:</p><ul><li><p>Align the brightness of the spotlights with the volume of the music,</p></li><li><p>Adjust their animation speed to the tempo of the songs,</p></li><li><p>Regenerate all the spotlights when you change songs, etc.</p></li></ul><p>I&rsquo;d love to see your creativity at work, so if you can, share a link to your GitHub repo with me in the comments!</p><p>And that&rsquo;s all for today. See you soon for new tutorials! 👋</p><hr><p>More articles in the series:<ol><div><li hugo-nav=/en/posts/tutos/my-first-app/1-introduction/><a href=https://www.mauicestclair.fr/en/posts/tutos/my-first-app/1-introduction/>My very first app with .NET MAUI</a></li></div><div><li hugo-nav=/en/posts/tutos/my-first-app/2-setup-the-project/><a href=https://www.mauicestclair.fr/en/posts/tutos/my-first-app/2-setup-the-project/>Setup the project .NET MAUI</a></li></div><div><li hugo-nav=/en/posts/tutos/my-first-app/3-first-run-of-the-project/><a href=https://www.mauicestclair.fr/en/posts/tutos/my-first-app/3-first-run-of-the-project/>First run of the app .NET MAUI</a></li></div><div><li hugo-nav=/en/posts/tutos/my-first-app/4-mvvm-for-successful-apps/><a href=https://www.mauicestclair.fr/en/posts/tutos/my-first-app/4-mvvm-for-successful-apps/>MVVM, for a successful application</a></li></div><div><li hugo-nav=/en/posts/tutos/my-first-app/5-navigate-to-a-new-page/><a href=https://www.mauicestclair.fr/en/posts/tutos/my-first-app/5-navigate-to-a-new-page/>Navigate to a new page in .NET MAUI</a></li></div><div><li hugo-nav=/en/posts/tutos/my-first-app/6-arrange-elements-on-a-page/><a href=https://www.mauicestclair.fr/en/posts/tutos/my-first-app/6-arrange-elements-on-a-page/>Arrange elements on a .NET MAUI page</a></li></div><div><li hugo-nav=/en/posts/tutos/my-first-app/7-music-player-display-time-tracker/><a href=https://www.mauicestclair.fr/en/posts/tutos/my-first-app/7-music-player-display-time-tracker/>Music player display - Time tracker</a></li></div><div><li hugo-nav=/en/posts/tutos/my-first-app/8-music-player-display-media-playback/><a href=https://www.mauicestclair.fr/en/posts/tutos/my-first-app/8-music-player-display-media-playback/>Music player display - Media playback</a></li></div><div><li hugo-nav=/en/posts/tutos/my-first-app/9-music-player-display-volume/><a href=https://www.mauicestclair.fr/en/posts/tutos/my-first-app/9-music-player-display-volume/>Music player display - Volume</a></li></div><div><li hugo-nav=/en/posts/tutos/my-first-app/10-play-music-with-mediaelement/><a href=https://www.mauicestclair.fr/en/posts/tutos/my-first-app/10-play-music-with-mediaelement/>Play music in .NET MAUI with MediaElement</a></li></div><div><li hugo-nav=/en/posts/tutos/my-first-app/11-control-playback-position-with-mediaelement/><a href=https://www.mauicestclair.fr/en/posts/tutos/my-first-app/11-control-playback-position-with-mediaelement/>Control the playback position with MediaElement</a></li></div><div><li hugo-nav=/en/posts/tutos/my-first-app/12-control-volume-with-mediaelement/><a href=https://www.mauicestclair.fr/en/posts/tutos/my-first-app/12-control-volume-with-mediaelement/>Control the volume with MediaElement</a></li></div><div><li hugo-nav=/en/posts/tutos/my-first-app/13-download-audio-file/><a href=https://www.mauicestclair.fr/en/posts/tutos/my-first-app/13-download-audio-file/>Download an audio file in .NET MAUI</a></li></div><div><li hugo-nav=/en/posts/tutos/my-first-app/14-skip-next-or-previous-with-mediaelement/><a href=https://www.mauicestclair.fr/en/posts/tutos/my-first-app/14-skip-next-or-previous-with-mediaelement/>Listen to a playlist with MediaElement</a></li></div><div class=current><li hugo-nav=/en/posts/tutos/my-first-app/15-add-animations-to-an-app/ class=nostyle><a href=https://www.mauicestclair.fr/en/posts/tutos/my-first-app/15-add-animations-to-an-app/>Create animations in .NET MAUI for a disco atmosphere</a></li></div></ol></p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span title="Updated on 2024-01-16 00:00:15">Updated on 16/01/2024&nbsp;</span></div><div class=post-info-license><span><a rel="license external nofollow noopener noreferrer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span><a href=javascript:void(0); title="Share on Twitter" data-sharer=twitter data-url=https://www.mauicestclair.fr/en/posts/tutos/my-first-app/15-add-animations-to-an-app/ data-title="Create animations in .NET MAUI for a disco atmosphere" data-via=kapuschinfo data-hashtags="Animation,AbsoluteLayout,Round Effect,Brush"><i class="fa-brands fa-twitter fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); title="Share on Facebook" data-sharer=facebook data-url=https://www.mauicestclair.fr/en/posts/tutos/my-first-app/15-add-animations-to-an-app/ data-hashtag=Animation><i class="fa-brands fa-facebook-square fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); title="Share on Linkedin" data-sharer=linkedin data-url=https://www.mauicestclair.fr/en/posts/tutos/my-first-app/15-add-animations-to-an-app/><i class="fa-brands fa-linkedin fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); title="Share on Blogger" data-sharer=blogger data-url=https://www.mauicestclair.fr/en/posts/tutos/my-first-app/15-add-animations-to-an-app/ data-title="Create animations in .NET MAUI for a disco atmosphere" data-description="In this final episode, we'll be creating animations with .NET MAUI to set the mood for a crazy night. Put on your sunglasses, because there will be flashes everywhere!"><i class="fa-brands fa-blogger fa-fw" aria-hidden=true></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fa-solid fa-tags fa-fw me-1" aria-hidden=true></i><a href=/en/tags/animation/ class=post-tag>Animation</a><a href=/en/tags/absolutelayout/ class=post-tag>AbsoluteLayout</a><a href=/en/tags/round-effect/ class=post-tag>Round Effect</a><a href=/en/tags/brush/ class=post-tag>Brush</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>Back</a></span>&nbsp;|&nbsp;<span><a href=/en/>Home</a></span></section></div><div class=post-nav><a href=/en/posts/tutos/my-first-app/14-skip-next-or-previous-with-mediaelement/ class=post-nav-item rel=prev title="Listen to a playlist with MediaElement"><i class="fa-solid fa-angle-left fa-fw" aria-hidden=true></i>Listen to a playlist with MediaElement</a></div></div><div id=comments><div id=giscus><script src=https://giscus.app/client.js data-repo=Kapusch/blog-dotnet-maui data-repo-id=R_kgDOH_4TbQ data-category="Blog comments" data-category-id=DIC_kwDOH_4Tbc4CSqsZ data-mapping=Title data-strict=0 data-theme=preferred_color_scheme data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-lang=en crossorigin=anonymous async defer></script></div><noscript>Please enable JavaScript to view the comments powered by <a href=https://giscus.app/ rel="external nofollow noopener noreferrer">giscus</a>.</noscript></div></article></main><footer class=footer><div class=footer-container><div class="footer-line custom"><a rel="license external nofollow noopener noreferrer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></div><div class="footer-line powered">Powered by <a href=https://gohugo.io/ target=_blank rel="external nofollow noopener noreferrer" title="Hugo 0.123.3">Hugo</a> | Theme - <a href=https://github.com/hugo-fixit/FixIt target=_blank rel=external title="FixIt v0.2.18"><img class=fixit-icon src=/fixit.min.svg alt="FixIt logo">&nbsp;FixIt</a></div><div class="footer-line copyright" itemscope itemtype=http://schema.org/CreativeWork><i class="fa-regular fa-copyright fa-fw" aria-hidden=true></i>
<span itemprop=copyrightYear>2022 - 2024</span><span class=author itemprop=copyrightHolder>
<a href=https://github.com/Kapusch target=_blank rel="external nofollow noopener noreferrer">Jean-Emmanuel BAILLAT</a></span><span class="license footer-divider"><u><a rel="license external nofollow noopener noreferrer" href=/privacy-policy target=_blank>Privacy</a></u> and <u><a rel="license external nofollow noopener noreferrer" href=/terms-of-use target=_blank>Terms</a></u></span></div><div class="footer-line statistics"></div></div></footer></div><div class=widgets><div class="fixed-buttons animate__faster d-none"><div class="fixed-button back-to-top" role=button aria-label="Back to Top"><i class="fa-solid fa-arrow-up fa-fw" aria-hidden=true></i><span class="variant-numeric d-none">0%</span></div><div class="fixed-button view-comments d-none" role=button aria-label="View Comments"><i class="fa-solid fa-comment fa-fw" aria-hidden=true></i></div></div><a href=https://github.com/Kapusch/blog-dotnet-maui/tree/main/Blog title="View source on GitHub" target=_blank rel="external nofollow" class="github-corner left d-none-mobile"><svg viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115h15l12 27L250 250V0z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentcolor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4l13.9-13.8C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8z" fill="currentcolor" class="octo-body"/></svg></a><div id=mask></div><noscript><div class=noscript-warning>Theme FixIt works best with JavaScript enabled.</div></noscript></div><link rel=stylesheet href=/lib/katex/katex.min.css><link rel=stylesheet href=/lib/cookieconsent/cookieconsent.min.css><script src=/lib/autocomplete/autocomplete.min.js defer></script><script src=/lib/lunr/lunr.min.js defer></script><script src=/lib/lunr/lunr.stemmer.support.min.js defer></script><script src=/lib/lunr/lunr.fr.min.js defer></script><script src=/lib/sharer/sharer.min.js async defer></script><script src=/lib/katex/katex.min.js defer></script><script src=/lib/katex/auto-render.min.js defer></script><script src=/lib/katex/copy-tex.min.js defer></script><script src=/lib/katex/mhchem.min.js defer></script><script src=/lib/cookieconsent/cookieconsent.min.js defer></script><script>window.config={code:{copyTitle:"Copy to clipboard",maxShownLines:50},comment:{enable:!0,expired:!1,giscus:{darkTheme:"dark_dimmed",lightTheme:"light"}},cookieconsent:{content:{dismiss:"Got it!",link:"Learn more",message:"This website uses Cookies to improve your experience."},enable:!0,palette:{button:{background:"#f0f0f0"},popup:{background:"#1aa3ff"}},theme:"edgeless"},math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!0,left:"\\begin{equation}",right:"\\end{equation}"},{display:!0,left:"\\begin{equation*}",right:"\\end{equation*}"},{display:!0,left:"\\begin{align}",right:"\\end{align}"},{display:!0,left:"\\begin{align*}",right:"\\end{align*}"},{display:!0,left:"\\begin{alignat}",right:"\\end{alignat}"},{display:!0,left:"\\begin{alignat*}",right:"\\end{alignat*}"},{display:!0,left:"\\begin{gather}",right:"\\end{gather}"},{display:!0,left:"\\begin{CD}",right:"\\end{CD}"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},search:{highlightTag:"em",lunrIndexURL:"/en/index.json",lunrLanguageCode:"en",maxResultLength:10,noResultsFound:"No results found",snippetLength:110,type:"lunr"}}</script><script src=/js/theme.min.js defer></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-0BB9XCL25S",{anonymize_ip:!0})</script><script src="https://www.googletagmanager.com/gtag/js?id=G-0BB9XCL25S" async></script></body></html>