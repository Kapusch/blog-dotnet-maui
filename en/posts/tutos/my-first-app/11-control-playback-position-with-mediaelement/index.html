<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=2"><meta name=robots content="noodp"><title>Control the playback position with MediaElement - MAUI, c'est clair !</title><meta name=author content="Jean-Emmanuel BAILLAT">
<meta name=author-link content="https://github.com/Kapusch"><meta name=description content="Let's continue with the implementation of playhead control! The idea is to be able to move to a specific frame in the track."><meta name=keywords content='MVVM,Data Binding,MediaElement,Slider'><meta itemprop=name content="Control the playback position with MediaElement"><meta itemprop=description content="Let's continue with the implementation of playhead control! The idea is to be able to move to a specific frame in the track."><meta itemprop=datePublished content="2023-12-01T00:00:11+00:00"><meta itemprop=dateModified content="2023-12-01T00:00:11+00:00"><meta itemprop=wordCount content="1944"><meta itemprop=image content="https://www.mauicestclair.fr/posts/tutos/my-first-app/11-control-playback-position-with-mediaelement/featured-image-preview-en.png"><meta itemprop=keywords content="MVVM,Data Binding,MediaElement,Slider,"><meta property="og:title" content="Control the playback position with MediaElement"><meta property="og:description" content="Let's continue with the implementation of playhead control! The idea is to be able to move to a specific frame in the track."><meta property="og:type" content="article"><meta property="og:url" content="https://www.mauicestclair.fr/en/posts/tutos/my-first-app/11-control-playback-position-with-mediaelement/"><meta property="og:image" content="https://www.mauicestclair.fr/posts/tutos/my-first-app/11-control-playback-position-with-mediaelement/featured-image-preview-en.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-12-01T00:00:11+00:00"><meta property="article:modified_time" content="2023-12-01T00:00:11+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://www.mauicestclair.fr/posts/tutos/my-first-app/11-control-playback-position-with-mediaelement/featured-image-preview-en.png"><meta name=twitter:title content="Control the playback position with MediaElement"><meta name=twitter:description content="Let's continue with the implementation of playhead control! The idea is to be able to move to a specific frame in the track."><meta name=twitter:site content="@kapuschinfo"><meta name=application-name content="MAUI, c'est clair !"><meta name=apple-mobile-web-app-title content="MAUI, c'est clair !"><meta name=theme-color data-light=#f8f8f8 data-dark=#252627 content="#f8f8f8"><meta name=msapplication-TileColor content="#da532c"><link rel=canonical href=https://www.mauicestclair.fr/en/posts/tutos/my-first-app/11-control-playback-position-with-mediaelement/><link rel=prev href=https://www.mauicestclair.fr/en/posts/tutos/my-first-app/10-play-music-with-mediaelement/><link rel=next href=https://www.mauicestclair.fr/en/posts/tutos/my-first-app/12-control-volume-with-mediaelement/><link rel=stylesheet href=/css/style.min.css><link rel=stylesheet href=/lib/fontawesome-free/all.min.css><link rel=stylesheet href=/lib/animate/animate.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Control the playback position with MediaElement","inLanguage":"en","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/www.mauicestclair.fr\/en\/posts\/tutos\/my-first-app\/11-control-playback-position-with-mediaelement\/"},"genre":"posts","keywords":"MVVM, Data Binding, MediaElement, Slider","wordcount":1944,"url":"https:\/\/www.mauicestclair.fr\/en\/posts\/tutos\/my-first-app\/11-control-playback-position-with-mediaelement\/","datePublished":"2023-12-01T00:00:11+00:00","dateModified":"2023-12-01T00:00:11+00:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"Jean-Emmanuel BAILLAT"},"description":"Let's continue with the implementation of playhead control! The idea is to be able to move to a specific frame in the track."}</script></head><body data-header-desktop=sticky data-header-mobile=auto><script>(window.localStorage?.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("data-theme","dark")</script><div class=wrapper data-page-style=wide><header class="desktop animate__faster" id=header-desktop><div class=header-wrapper data-github-corner=left><div class=header-title><a href=/en/ title="MAUI, c'est clair !"><img loading=lazy src=/main_avatar.jpg srcset="/main_avatar.jpg, /main_avatar.jpg 1.5x, /main_avatar.jpg 2x" sizes=auto data-title="MAUI, c'est clair !" data-alt="MAUI, c'est clair !" class=logo style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'><span class=header-title-text>MAUI, c'est clair !</span></a><span class=header-subtitle></span></div><nav><ul class=menu><li class="menu-item has-children"><a class=menu-link href=/en/posts/><i class="fa-solid fa-newspaper fa-fw fa-sm" aria-hidden=true></i> Posts</a><i class="dropdown-icon fa-solid fa-chevron-down" aria-hidden=true></i><ul class=sub-menu><li class=menu-item><a class=menu-link href=/en/posts/tutos/><i class="fa-solid fa-graduation-cap fa-fw fa-sm" aria-hidden=true></i> Tutos</a></li><li class=menu-item><a class=menu-link href=/en/posts/tips/><i class="fa-solid fa-lightbulb fa-fw fa-sm" aria-hidden=true></i> Tips</a></li></ul></li><li class=menu-item><a class=menu-link href=/en/tags/><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden=true></i> Tags</a></li><li class=menu-item><a class=menu-link href=/en/about/><i class="fa-solid fa-info-circle fa-fw fa-sm" aria-hidden=true></i> About</a></li><li class="menu-item delimiter"></li><li class="menu-item search" id=search-desktop><input type=text placeholder="Search titles or contents ..." id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=Search><i class="fa-solid fa-search fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=Clear><i class="fa-solid fa-times-circle fa-fw" aria-hidden=true></i>
</a><span class="search-button search-loading" id=search-loading-desktop><i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></li><li class="menu-item theme-switch" title="Switch Theme"><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></li><li class="menu-item language-switch"><span role=button aria-label="Select Language" title="Select Language"><i class="fa-solid fa-language fa-fw" aria-hidden=true></i></span><ul class=sub-menu><li class=menu-item><a href=/posts/tutos/my-first-app/11-control-playback-position-with-mediaelement/ class=menu-link title=Français>Français</a></li><li class=menu-item><span class="menu-link text-secondary" title=English>English</span></li></ul></li></ul></nav></div></header><header class="mobile animate__faster" id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/en/ title="MAUI, c'est clair !"><img loading=lazy src=/main_avatar.jpg srcset="/main_avatar.jpg, /main_avatar.jpg 1.5x, /main_avatar.jpg 2x" sizes=auto data-title=/main_avatar.jpg data-alt=/main_avatar.jpg class=logo style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'><span class=header-title-text>MAUI, c'est clair !</span></a><span class=header-subtitle></span></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><nav><ul class=menu id=menu-mobile><li class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder="Search titles or contents ..." id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=Search><i class="fa-solid fa-search fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=Clear><i class="fa-solid fa-times-circle fa-fw" aria-hidden=true></i>
</a><span class="search-button search-loading" id=search-loading-mobile><i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>Cancel</a></li><li class=menu-item><span class=nested-item><a class=menu-link href=/en/posts/><i class="fa-solid fa-newspaper fa-fw fa-sm" aria-hidden=true></i> Posts</a>
<i class="dropdown-icon fa-solid fa-chevron-right" aria-hidden=true></i></span><ul class=sub-menu><li class=menu-item><a class=menu-link href=/en/posts/tutos/><i class="fa-solid fa-graduation-cap fa-fw fa-sm" aria-hidden=true></i> Tutos</a></li><li class=menu-item><a class=menu-link href=/en/posts/tips/><i class="fa-solid fa-lightbulb fa-fw fa-sm" aria-hidden=true></i> Tips</a></li></ul></li><li class=menu-item><a class=menu-link href=/en/tags/><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden=true></i> Tags</a></li><li class=menu-item><a class=menu-link href=/en/about/><i class="fa-solid fa-info-circle fa-fw fa-sm" aria-hidden=true></i> About</a></li><li class="menu-item menu-system"><span class="menu-system-item theme-switch" title="Switch Theme"><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></span><span class="menu-system-item language-switch">
<span role=button aria-label="Select Language" title="Select Language">English<i class="dropdown-icon fa-solid fa-chevron-down" aria-hidden=true></i></span>
<select class=language-select onchange="location=this.value"><option value=/posts/tutos/my-first-app/11-control-playback-position-with-mediaelement/>Français</option><option value=/en/posts/tutos/my-first-app/11-control-playback-position-with-mediaelement/ selected disabled>English</option></select></span></li></ul></nav></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><nav aria-label=breadcrumb class="breadcrumb-container sticky"><ol class=breadcrumb><li class=breadcrumb-item><a href=/en/posts/ title=Posts>Posts</a></li><li class=breadcrumb-item><a href=/en/posts/tutos/ title=Tutos>Tutos</a></li><li class=breadcrumb-item><a href=/en/posts/tutos/my-first-app/ title="My first app">My first app</a></li><li class="breadcrumb-item active" aria-current=page>Control the playback position with MediaElement</li></ol></nav><main class=container><aside class=toc id=toc-auto><h2 class=toc-title>Contents&nbsp;<i class="toc-icon fa-solid fa-angle-down fa-fw" aria-hidden=true></i></h2><div class=toc-content id=toc-content-auto></div></aside><aside class=aside-custom></aside><article class="page single"><div class=header><h1 class="single-title animate__animated animate__flipInX"><span>Control the playback position with MediaElement</span></h1></div><div class=post-meta><div class=post-meta-line><span class=post-author><a href=https://github.com/Kapusch target=_blank rel="external nofollow noopener noreferrer author" class=author><img loading=lazy src=/main_avatar.jpg srcset="/main_avatar.jpg, /main_avatar.jpg 1.5x, /main_avatar.jpg 2x" sizes=auto data-title="Jean-Emmanuel BAILLAT" data-alt="Jean-Emmanuel BAILLAT" class=avatar style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'>&nbsp;Jean-Emmanuel BAILLAT</a></span></div><div class=post-meta-line><span title="published on 2023-12-01 00:00:11"><i class="fa-regular fa-calendar-alt fa-fw me-1" aria-hidden=true></i><time datetime=01/12/2023>01/12/2023</time></span>&nbsp;<span title="Updated on 2023-12-01 00:00:11"><i class="fa-regular fa-edit fa-fw me-1" aria-hidden=true></i><time datetime=01/12/2023>01/12/2023</time></span>&nbsp;<span><i class="fa-solid fa-pencil-alt fa-fw me-1" aria-hidden=true></i>1944 words</span>&nbsp;<span><i class="fa-regular fa-clock fa-fw me-1" aria-hidden=true></i>10 minutes</span>&nbsp;</div></div><div class="details toc" id=toc-static data-kept=false><div class="details-summary toc-title"><span>Contents</span>
<span><i class="details-icon fa-solid fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><ul><li><a href=#binding-our-components>Binding our components</a></li><li><a href=#move-the-playhead-control>Move the playhead control</a></li></ul></li></ul></nav></div></div><div class=content id=content><p><div class="details admonition info open"><div class="details-summary admonition-title"><i class="icon fa-solid fa-info-circle fa-fw" aria-hidden=true></i>‎<i class="details-icon fa-solid fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content>To ease your read, please resume <a href=../10-play-music-with-mediaelement/>from this chapter</a> where we have set up the <em>MediaElement</em>.</div></div></div>In the previous article, we discovered the <em><a href=https://learn.microsoft.com/en-us/dotnet/communitytoolkit/maui/views/mediaelement target=_blank rel="external nofollow noopener noreferrer">MediaElement<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a></em> for playing audio files, but with the help of our own controls. Remember the <em>Sliders</em> we set up? They&rsquo;re cool, but they&rsquo;re useless! 😄</p><p>So today, we are going to implement the playhead control, to allow the user to move to a specific frame in the track.</p><h2 id=binding-our-components>Binding our components</h2><p>If you remember, in the <a href=../7-music-player-display-time-tracker/>chapter on timing display</a>, we introduced 3 components:</p><ul><li><p><code>ElapsedTime</code>, a <em>Label</em> for displaying elapsed playback time,</p></li><li><p><code>TotalTime</code>, also a <em>Label</em> but to display the total duration of the audio track,</p></li><li><p>and finally the <em>Slider</em> <code>TimeTracker</code>, to control the track&rsquo;s playback head.</p></li></ul><p>Goodbye dummy data! We are now going to bring these components to life with the help of <strong>Data Binding</strong>. And for this, we will use an initialization method, <em>InitTimeTracker()</em>:</p><p align=center style=margin-bottom:-10px><strong>Filename:</strong><code>MusicPlayerView.cs</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=cp>#region</span> <span class=n>Time</span> <span class=n>Tracker</span> <span class=c1>// Find the region where to add the code below</span>
</span></span><span class=line><span class=cl><span class=p>...</span>
</span></span><span class=line><span class=cl><span class=k>void</span> <span class=n>InitTimeTracker</span><span class=p>()</span> <span class=c1>// And here is the init method</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>TimeTracker</span><span class=p>.</span><span class=n>Bind</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=n>Slider</span><span class=p>.</span><span class=n>ValueProperty</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>nameof</span><span class=p>(</span><span class=n>MusicPlayer</span><span class=p>.</span><span class=n>Position</span><span class=p>),</span>
</span></span><span class=line><span class=cl>            <span class=n>source</span><span class=p>:</span> <span class=n>MusicPlayer</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>convert</span><span class=p>:</span> <span class=p>(</span><span class=n>TimeSpan</span> <span class=n>currentPosition</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=n>currentPosition</span><span class=p>.</span><span class=n>TotalSeconds</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>TimeTracker</span><span class=p>.</span><span class=n>Bind</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=n>Slider</span><span class=p>.</span><span class=n>MaximumProperty</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>nameof</span><span class=p>(</span><span class=n>MusicPlayer</span><span class=p>.</span><span class=n>Duration</span><span class=p>),</span>
</span></span><span class=line><span class=cl>            <span class=n>source</span><span class=p>:</span> <span class=n>MusicPlayer</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>convert</span><span class=p>:</span> <span class=p>(</span><span class=n>TimeSpan</span> <span class=n>duration</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=n>duration</span><span class=p>.</span><span class=n>TotalSeconds</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>ElapsedTime</span><span class=p>.</span><span class=n>Bind</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=n>Label</span><span class=p>.</span><span class=n>TextProperty</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>nameof</span><span class=p>(</span><span class=n>MusicPlayer</span><span class=p>.</span><span class=n>Position</span><span class=p>),</span>
</span></span><span class=line><span class=cl>            <span class=n>source</span><span class=p>:</span> <span class=n>MusicPlayer</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>stringFormat</span><span class=p>:</span> <span class=s>&#34;{0:mm\\:ss}&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>TotalTime</span><span class=p>.</span><span class=n>Bind</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=n>Label</span><span class=p>.</span><span class=n>TextProperty</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>nameof</span><span class=p>(</span><span class=n>MusicPlayer</span><span class=p>.</span><span class=n>Duration</span><span class=p>),</span>
</span></span><span class=line><span class=cl>            <span class=n>source</span><span class=p>:</span> <span class=n>MusicPlayer</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>stringFormat</span><span class=p>:</span> <span class=s>&#34;{0:mm\\:ss}&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=cp>#endregion</span>
</span></span></code></pre></td></tr></table></div></div><p>Yes, I know it&rsquo;s a bit dense, but cheer up! It&rsquo;s all explained below.</p><p>To get started, we have modified the behaviour of the <code>TimeTracker</code> to associate two properties with it:</p><ul><li><p>the current position of the cursor on the <em>Slider</em>,</p></li><li><p>and the maximum value of the cursor (when it’s all to the right).</p></li></ul><p>Let&rsquo;s take a closer look at the <em>MediaElement</em> represented by our <code>MusicPlayer</code> component. It has exactly what we need:</p><ul><li><p>the real time position of the playback head (<code>MusicPlayer.Position</code>), to be associated with the cursor position on the <em>Slider</em> (<code>TimeTracker.Value</code>),</p></li><li><p>and the total duration of the song (<code>MusicPlayer.Duration</code>), to be associated with the maximum value of the <em>Slider</em> (<code>TimeTracker.Maximum</code>).</p></li></ul><p>And now, if you remember, the <em>Slider</em> can only consider values of <em>double</em> type. This is why we need to convert the values obtained from <code>MusicPlayer.Position</code> and <code>MusicPlayer.Duration</code>, from the <em>TimeSpan</em> type to the <em>double</em> type, with the property named <code>TotalSeconds</code>.</p><p><div class="details admonition comment open"><div class="details-summary admonition-title"><i class="icon fa-regular fa-comments fa-fw" aria-hidden=true></i>‎<i class="details-icon fa-solid fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content>🐒‎ ‎ And that mean, users will be able to advance or rewind playback to the nearest second!</div></div></div>Exactly ! 🙂 Now let’s see for the <em>Labels</em>.</p><p>For the <code>ElapsedTime</code> component, we want it to display how long the song has been playing, also based on the property <code>MusicPlayer.Position</code>. But only in a special way! We want to display the duration in minutes and seconds. To do this, we need to apply the desired text format using the code: <code>{0:mm\\:ss}</code>.</p><p>For the <code>TotalTime</code> component, we want to display the total listening time of the song, based on the property <code>MusicPlayer.Duration</code>. In the same way, we apply the identical text format to display a duration in minutes and seconds.</p><div class="details admonition tip open"><div class="details-summary admonition-title"><i class="icon fa-solid fa-lightbulb fa-fw" aria-hidden=true></i>‎<i class="details-icon fa-solid fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content>Going further with <a href=https://learn.microsoft.com/en-us/dotnet/standard/base-types/custom-timespan-format-strings target=_blank rel="external nofollow noopener noreferrer">StringFormat<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a>.</div></div></div><p>By the way, don&rsquo;t forget to replace the “=>” sign with “=” when declaring each of these components! Otherwise it won&rsquo;t work, as the same object will be returned each time you call these variables. You can use this opportunity to remove the dummy values we had defined by default for some properties:</p><ul><li><p><code>Text</code> property for the two <em>Labels</em>,</p></li><li><p><code>Maximum</code> and <code>Value</code> properties for the <em>Slider</em>.</p></li></ul><p>Here is the revised declaration for these 3 components:</p><p align=center style=margin-bottom:-10px><strong>Filename:</strong><code>MusicPlayerView.cs</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=cp>#region</span> <span class=n>Time</span> <span class=n>Tracker</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Label</span> <span class=n>ElapsedTime</span> <span class=p>=</span> <span class=k>new</span> <span class=n>Label</span> <span class=c1>// The “=&gt;” sign has been replaced with “=”</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>FontSize</span> <span class=p>=</span> <span class=m>14</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>TextColor</span> <span class=p>=</span> <span class=n>Colors</span><span class=p>.</span><span class=n>White</span>
</span></span><span class=line><span class=cl><span class=p>}.</span><span class=n>TextCenter</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Slider</span> <span class=n>TimeTracker</span> <span class=p>=</span> <span class=k>new</span> <span class=n>Slider</span> <span class=c1>// The “=&gt;” sign has been replaced with “=”</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>Minimum</span> <span class=p>=</span> <span class=m>0</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>MinimumTrackColor</span> <span class=p>=</span> <span class=n>Colors</span><span class=p>.</span><span class=n>LightSalmon</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>MaximumTrackColor</span> <span class=p>=</span> <span class=n>Colors</span><span class=p>.</span><span class=n>Black</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Label</span> <span class=n>TotalTime</span> <span class=p>=</span> <span class=k>new</span> <span class=n>Label</span> <span class=c1>// The “=&gt;” sign has been replaced with “=”</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>FontSize</span> <span class=p>=</span> <span class=m>14</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>TextColor</span> <span class=p>=</span> <span class=n>Colors</span><span class=p>.</span><span class=n>White</span>
</span></span><span class=line><span class=cl><span class=p>}.</span><span class=n>TextCenter</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=cp>#endregion</span>
</span></span></code></pre></td></tr></table></div></div><p>Finally, the initialization method for these components must be called from the page constructor:</p><p align=center style=margin-bottom:-10px><strong>Filename:</strong><code>MusicPlayerView.cs</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=p>...</span>
</span></span><span class=line><span class=cl><span class=k>namespace</span> <span class=nn>NightClub.Views</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=k>class</span> <span class=nc>MusicPlayerView</span> <span class=p>:</span> <span class=n>ContentPage</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=n>MusicPlayerView</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=p>...</span>
</span></span><span class=line><span class=cl>        <span class=n>InitTimeTracker</span><span class=p>();</span> <span class=c1>// Without this, nothing would work!</span>
</span></span><span class=line><span class=cl>        <span class=p>...</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>...</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>Go on, relaunch the project! I&rsquo;m sure you really want to 😄</p><p>Normally, you should see the texts are correctly initialized with real values. Also, the cursor should move on its own as the song progresses.</p><p><div class="details admonition comment open"><div class="details-summary admonition-title"><i class="icon fa-regular fa-comments fa-fw" aria-hidden=true></i>‎<i class="details-icon fa-solid fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content>🐒‎ ‎ Oh yeah, it works! But I have the impression that the interface moves by itself, isn&rsquo;t there a bug with our <em>Grid</em>?</div></div></div>Well, it&rsquo;s true, the display is a bit jumpy!</p><p align=center><img max-width=100% max-height=100% src=./images/22C49091C491C43AE81103F1197859CE.gif></p><figure></figure><p>We can play around with coloring the <em>Labels</em> background to get a better idea of the situation:</p><p align=center><img max-width=100% max-height=100% src=./images/F4D5A7231779E8E2EE06E4736EF91D43.gif></p><figure><figcaption class=image-caption>By playing with the colors, you can see that the Label changes size each time its text is updated.</figcaption></figure><p>As the song progresses, the text is updated every second and a new value replaces the old one. But it looks like some values require more space than others! 😄</p><p><div class="details admonition comment open"><div class="details-summary admonition-title"><i class="icon fa-regular fa-comments fa-fw" aria-hidden=true></i>‎<i class="details-icon fa-solid fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content>🐒‎ ‎ But didn&rsquo;t we define fixed sizes for the columns?!</div></div></div>You are definitely right! It may be a bug, but I haven&rsquo;t found any good reason for why it happens. But .NET MAUI has only been around for a year, it may hide a few little flaws! We just need patience for Microsoft engineers to fix them (or even open-source contributors!).</p><p><div class="details admonition tip open"><div class="details-summary admonition-title"><i class="icon fa-solid fa-lightbulb fa-fw" aria-hidden=true></i>‎<i class="details-icon fa-solid fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content>After having upgraded the app to .NET 8, I couldn’t reproduce the bug.</div></div></div>No panic, we will woraround this in no time! It&rsquo;s all part of a developer&rsquo;s life. 🤓</p><p>If you remember the <a href=../6-arrange-elements-on-a-page/>scaffolding chapter</a>, we defined there a <em>Grid</em> component named <code>BottomLayout</code>, which we divided into 7 columns of different sizes:</p><p align=center style=margin-bottom:-10px><strong>Filename:</strong><code>MusicPlayerView.cs</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=n>Grid</span> <span class=n>BottomLayout</span> <span class=p>=&gt;</span> <span class=k>new</span> <span class=n>Grid</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=p>...</span>
</span></span><span class=line><span class=cl>    <span class=n>ColumnDefinitions</span> <span class=p>=</span> <span class=n>Columns</span><span class=p>.</span><span class=n>Define</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=n>Stars</span><span class=p>(</span><span class=m>10</span><span class=p>),</span>
</span></span><span class=line><span class=cl>            <span class=n>Stars</span><span class=p>(</span><span class=m>10</span><span class=p>),</span> <span class=c1>// This column contains the ElapsedTime Label</span>
</span></span><span class=line><span class=cl>            <span class=n>Stars</span><span class=p>(</span><span class=m>20</span><span class=p>),</span>
</span></span><span class=line><span class=cl>            <span class=n>Stars</span><span class=p>(</span><span class=m>20</span><span class=p>),</span>
</span></span><span class=line><span class=cl>            <span class=n>Stars</span><span class=p>(</span><span class=m>20</span><span class=p>),</span>
</span></span><span class=line><span class=cl>            <span class=n>Stars</span><span class=p>(</span><span class=m>10</span><span class=p>),</span> <span class=c1>// This column contains the TotalTime Label</span>
</span></span><span class=line><span class=cl>            <span class=n>Stars</span><span class=p>(</span><span class=m>10</span><span class=p>)),</span>
</span></span><span class=line><span class=cl>    <span class=p>...</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span></code></pre></td></tr></table></div></div><p>Let’s rework the structure of our <em>Grid</em> by merging the first two columns, and the last two…</p><p align=center style=margin-bottom:-10px><strong>Filename:</strong><code>MusicPlayerView.cs</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=n>Grid</span> <span class=n>BottomLayout</span> <span class=p>=&gt;</span> <span class=k>new</span> <span class=n>Grid</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=p>...</span>
</span></span><span class=line><span class=cl>    <span class=n>ColumnDefinitions</span> <span class=p>=</span> <span class=n>Columns</span><span class=p>.</span><span class=n>Define</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=n>Stars</span><span class=p>(</span><span class=m>20</span><span class=p>),</span> <span class=c1>// We merge the first two columns...</span>
</span></span><span class=line><span class=cl>            <span class=n>Stars</span><span class=p>(</span><span class=m>20</span><span class=p>),</span>
</span></span><span class=line><span class=cl>            <span class=n>Stars</span><span class=p>(</span><span class=m>20</span><span class=p>),</span>
</span></span><span class=line><span class=cl>            <span class=n>Stars</span><span class=p>(</span><span class=m>20</span><span class=p>),</span>
</span></span><span class=line><span class=cl>            <span class=n>Stars</span><span class=p>(</span><span class=m>20</span><span class=p>)),</span> <span class=c1>// ... and the last two!</span>
</span></span><span class=line><span class=cl>    <span class=p>...</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span></code></pre></td></tr></table></div></div><p>&mldr; then rearrange the positioning of the <code>BottomLayout</code> elements:</p><p align=center style=margin-bottom:-10px><strong>Filename:</strong><code>MusicPlayerView.cs</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=n>Grid</span> <span class=n>BottomLayout</span> <span class=p>=&gt;</span> <span class=k>new</span> <span class=n>Grid</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=p>...</span>
</span></span><span class=line><span class=cl>    <span class=n>Children</span> <span class=p>=</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>ElapsedTime</span><span class=p>.</span><span class=n>Row</span><span class=p>(</span><span class=m>0</span><span class=p>).</span><span class=n>Column</span><span class=p>(</span><span class=m>0</span><span class=p>).</span><span class=n>End</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>        <span class=n>TimeTracker</span><span class=p>.</span><span class=n>Row</span><span class=p>(</span><span class=m>0</span><span class=p>).</span><span class=n>Column</span><span class=p>(</span><span class=m>1</span><span class=p>).</span><span class=n>ColumnSpan</span><span class=p>(</span><span class=m>3</span><span class=p>),</span>
</span></span><span class=line><span class=cl>        <span class=n>TotalTime</span><span class=p>.</span><span class=n>Row</span><span class=p>(</span><span class=m>0</span><span class=p>).</span><span class=n>Column</span><span class=p>(</span><span class=m>4</span><span class=p>).</span><span class=n>Start</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>RepeatOnceButton</span><span class=p>.</span><span class=n>Row</span><span class=p>(</span><span class=m>1</span><span class=p>).</span><span class=n>Column</span><span class=p>(</span><span class=m>0</span><span class=p>).</span><span class=n>End</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>        <span class=n>MediaControlLayout</span><span class=p>.</span><span class=n>Row</span><span class=p>(</span><span class=m>1</span><span class=p>).</span><span class=n>Column</span><span class=p>(</span><span class=m>1</span><span class=p>).</span><span class=n>ColumnSpan</span><span class=p>(</span><span class=m>3</span><span class=p>),</span>
</span></span><span class=line><span class=cl>        <span class=n>DownloadButton</span><span class=p>.</span><span class=n>Row</span><span class=p>(</span><span class=m>1</span><span class=p>).</span><span class=n>Column</span><span class=p>(</span><span class=m>4</span><span class=p>).</span><span class=n>Start</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>MuteButton</span><span class=p>.</span><span class=n>Row</span><span class=p>(</span><span class=m>2</span><span class=p>).</span><span class=n>Column</span><span class=p>(</span><span class=m>0</span><span class=p>).</span><span class=n>End</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>        <span class=n>VolumeTracker</span><span class=p>.</span><span class=n>Row</span><span class=p>(</span><span class=m>2</span><span class=p>).</span><span class=n>Column</span><span class=p>(</span><span class=m>1</span><span class=p>).</span><span class=n>ColumnSpan</span><span class=p>(</span><span class=m>3</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span></code></pre></td></tr></table></div></div><p>As we removed two columns from our initial <em>Grid</em>, we had to readjust the positioning of our components, by modifying their assigned column and their horizontal alignment. To do this, we used the <em><a href=https://learn.microsoft.com/en-us/dotnet/communitytoolkit/maui/markup/extensions/view-extensions#start target=_blank rel="external nofollow noopener noreferrer">Start()<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a></em> and <em><a href=https://learn.microsoft.com/en-us/dotnet/communitytoolkit/maui/markup/extensions/view-extensions#end target=_blank rel="external nofollow noopener noreferrer">End()<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a></em> methods. These respectively align a component horizontally at the beginning or end of the available space.</p><p>And here is the outcome:</p><p align=center><img max-width=100% max-height=100% src=./images/F5988C68A92AF7AC7F41464B2AF8BB08.gif></p><figure><figcaption class=image-caption>The original design has been respected, and the jerkiness has disappeared!</figcaption></figure><p><div class="details admonition comment open"><div class="details-summary admonition-title"><i class="icon fa-regular fa-comments fa-fw" aria-hidden=true></i>‎<i class="details-icon fa-solid fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content>🐒‎ ‎ Perfect! But I can&rsquo;t move forward or backward in the song&mldr; another bug with the <em>Slider</em>?</div></div></div>Not exactly. Actually, this <em>Slider</em> has not yet been configured for that, and it’s time do it in the next section!</p><h2 id=move-the-playhead-control>Move the playhead control</h2><p>To control the playback head, the user must simply drag the <em>Slider</em> cursor from point A to point B. If we break down his gesture, we could say that:</p><ol><li><p>The user first puts his finger on the cursor at point A of the <em>Slider</em>,</p></li><li><p>Then he moves the cursor by keeping his finger pressed down,</p></li><li><p>Finally, he releases it at point B of the <em>Slider</em> by lifting his finger from the screen.</p></li></ol><p>Now you have read this, did it ring a bell?</p><p><div class="details admonition comment open"><div class="details-summary admonition-title"><i class="icon fa-regular fa-comments fa-fw" aria-hidden=true></i>‎<i class="details-icon fa-solid fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content>🐒‎ ‎ I remember we set up some events to detect user gestures&mldr; right?</div></div></div>Well done! Here we will use two events exposed by the <em>Slider</em> in order to:</p><ul><li><p>Detect when user starts moving the cursor,</p></li><li><p>And detect when he releases it.</p></li></ul><p>Let&rsquo;s attach these two events to our <code>TimeTracker</code> using the method <em>InitTimeTracker()</em>:</p><p align=center style=margin-bottom:-10px><strong>Filename:</strong><code>MusicPlayerView.cs</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=k>void</span> <span class=n>InitTimeTracker</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=p>...</span>
</span></span><span class=line><span class=cl>    <span class=n>TimeTracker</span><span class=p>.</span><span class=n>DragStarted</span> <span class=p>+=</span> <span class=n>TimeTracker_DragStarted</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>TimeTracker</span><span class=p>.</span><span class=n>DragCompleted</span> <span class=p>+=</span> <span class=n>TimeTracker_DragCompleted</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><div class="details admonition tip open"><div class="details-summary admonition-title"><i class="icon fa-solid fa-lightbulb fa-fw" aria-hidden=true></i>‎<i class="details-icon fa-solid fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content>We could have used as well the commands provided by the <em>Slider</em> and worked from the <strong>ViewModel</strong>, but we had already explained <a href=../10-play-music-with-mediaelement/>here</a> that it was preferable to keep the logic in the <strong>View</strong> given that the <em>MediaElement</em> is purely a <a href=https://en.wikipedia.org/wiki/User_interface>UI</a> component.</div></div></div><p align=center><img max-width=100% max-height=100% src=./images/734ED6F369BC98755C04A81669DBC22A.png></p><figure></figure><p>Now define these new events in their dedicated region with the following code:</p><p align=center style=margin-bottom:-10px><strong>Filename:</strong><code>MusicPlayerView.cs</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=cp>#region</span> <span class=n>Events</span>
</span></span><span class=line><span class=cl>    <span class=p>...</span>
</span></span><span class=line><span class=cl>    <span class=k>void</span> <span class=n>TimeTracker_DragStarted</span><span class=p>(</span><span class=kt>object</span> <span class=n>sender</span><span class=p>,</span> <span class=n>EventArgs</span> <span class=n>e</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>MusicPlayer</span><span class=p>.</span><span class=n>CurrentState</span> <span class=p>==</span> <span class=n>MediaElementState</span><span class=p>.</span><span class=n>Playing</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>mustResumePlayback</span> <span class=p>=</span> <span class=kc>true</span><span class=p>;</span>
</span></span><span class=line><span class=cl>		        <span class=n>MusicPlayer</span><span class=p>.</span><span class=n>Pause</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>void</span> <span class=n>TimeTracker_DragCompleted</span><span class=p>(</span><span class=kt>object</span> <span class=n>sender</span><span class=p>,</span> <span class=n>EventArgs</span> <span class=n>e</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// We will always refer to the object that is the source</span>
</span></span><span class=line><span class=cl>        <span class=c1>// of the event through the parameter &#34;sender&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>sender</span> <span class=k>is</span> <span class=n>Slider</span> <span class=n>timeTrackerControl</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=c1>// Update the position based on where the User finger ended</span>
</span></span><span class=line><span class=cl>            <span class=n>MusicPlayer</span><span class=p>.</span><span class=n>SeekTo</span><span class=p>(</span><span class=n>TimeSpan</span><span class=p>.</span><span class=n>FromSeconds</span><span class=p>(</span><span class=n>timeTrackerControl</span><span class=p>.</span><span class=n>Value</span><span class=p>));</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=n>mustResumePlayback</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=c1>// Resume playback if it was playing prior dragging the cursor</span>
</span></span><span class=line><span class=cl>                <span class=n>MusicPlayer</span><span class=p>.</span><span class=n>Play</span><span class=p>();</span>
</span></span><span class=line><span class=cl>                <span class=n>mustResumePlayback</span> <span class=p>=</span> <span class=kc>false</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=cp>#endregion</span>
</span></span></code></pre></td></tr></table></div></div><p>The first event <em>TimeTracker_DragStarted()</em> corresponds to the moment when the user starts moving the cursor on the <em>Slider</em>. When this happens, playback is paused to prevent the music from continuing to play. Or else, the slider would continue to move on its own!</p><p>And for a better user experience, the song must resume playback as soon as user has finished his gesture. To achieve this, we must refer to the variable <code>mustResumePlayback</code> to assess if soundtrack must be resumed.</p><p><div class="details admonition comment open"><div class="details-summary admonition-title"><i class="icon fa-regular fa-comments fa-fw" aria-hidden=true></i>‎<i class="details-icon fa-solid fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content>🐒‎ ‎ Where did this variable come from? Never seen it before! 😄</div></div></div>We will add it right away! In a new dedicated region, at the top of the class:</p><p align=center style=margin-bottom:-10px><strong>Filename:</strong><code>MusicPlayerView.cs</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=cp>#region</span> <span class=n>Properties</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=kt>bool</span> <span class=n>mustResumePlayback</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cp>#endregion</span>
</span></span></code></pre></td></tr></table></div></div><p>For the second event <em>TimeTracker_DragCompleted()</em>, this is the moment when the user has finished moving the cursor on the <em>Slider</em>. When this happens, we need to readjust the playback head of the <code>MusicPlayer</code> accordingly to the new cursor position. To do this, we use the <em>SeekTo()</em> method that is exposed by the <em>MediaElement</em> class, with a time reference as parameter (in <em>TimeSpan</em> format).</p><p><div class="details admonition info open"><div class="details-summary admonition-title"><i class="icon fa-solid fa-info-circle fa-fw" aria-hidden=true></i>‎<i class="details-icon fa-solid fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content>This will have an immediate effect on the value of the <code>MusicPlayer.Position</code>.</div></div></div>Finally, playback will resume immediately afterwards, from the newly selected position.</p><p>Relaunch the project and make sure you can move forward or backward in the piece!</p><p align=center><img max-width=100% max-height=100% src=./images/B3744B2F4976B3ADEB7CF5C498642C70.gif></p><figure><figcaption class=image-caption>Hop, I just moved to the start of the track!</figcaption></figure><p>You have just finished implementing a great feature for the user, well done!</p><p><a href=../12-control-volume-with-mediaelement/>Next time</a>, we will see how to implement the volume management. See you soon!</p><hr><p>More articles in the series:<ol><div><li hugo-nav=/en/posts/tutos/my-first-app/1-introduction/><a href=https://www.mauicestclair.fr/en/posts/tutos/my-first-app/1-introduction/>My very first app with .NET MAUI</a></li></div><div><li hugo-nav=/en/posts/tutos/my-first-app/2-setup-the-project/><a href=https://www.mauicestclair.fr/en/posts/tutos/my-first-app/2-setup-the-project/>Setup the project .NET MAUI</a></li></div><div><li hugo-nav=/en/posts/tutos/my-first-app/3-first-run-of-the-project/><a href=https://www.mauicestclair.fr/en/posts/tutos/my-first-app/3-first-run-of-the-project/>First run of the app .NET MAUI</a></li></div><div><li hugo-nav=/en/posts/tutos/my-first-app/4-mvvm-for-successful-apps/><a href=https://www.mauicestclair.fr/en/posts/tutos/my-first-app/4-mvvm-for-successful-apps/>MVVM, for a successful application</a></li></div><div><li hugo-nav=/en/posts/tutos/my-first-app/5-navigate-to-a-new-page/><a href=https://www.mauicestclair.fr/en/posts/tutos/my-first-app/5-navigate-to-a-new-page/>Navigate to a new page in .NET MAUI</a></li></div><div><li hugo-nav=/en/posts/tutos/my-first-app/6-arrange-elements-on-a-page/><a href=https://www.mauicestclair.fr/en/posts/tutos/my-first-app/6-arrange-elements-on-a-page/>Arrange elements on a .NET MAUI page</a></li></div><div><li hugo-nav=/en/posts/tutos/my-first-app/7-music-player-display-time-tracker/><a href=https://www.mauicestclair.fr/en/posts/tutos/my-first-app/7-music-player-display-time-tracker/>Music player display - Time tracker</a></li></div><div><li hugo-nav=/en/posts/tutos/my-first-app/8-music-player-display-media-playback/><a href=https://www.mauicestclair.fr/en/posts/tutos/my-first-app/8-music-player-display-media-playback/>Music player display - Media playback</a></li></div><div><li hugo-nav=/en/posts/tutos/my-first-app/9-music-player-display-volume/><a href=https://www.mauicestclair.fr/en/posts/tutos/my-first-app/9-music-player-display-volume/>Music player display - Volume</a></li></div><div><li hugo-nav=/en/posts/tutos/my-first-app/10-play-music-with-mediaelement/><a href=https://www.mauicestclair.fr/en/posts/tutos/my-first-app/10-play-music-with-mediaelement/>Play music in .NET MAUI with MediaElement</a></li></div><div class=current><li hugo-nav=/en/posts/tutos/my-first-app/11-control-playback-position-with-mediaelement/ class=nostyle><a href=https://www.mauicestclair.fr/en/posts/tutos/my-first-app/11-control-playback-position-with-mediaelement/>Control the playback position with MediaElement</a></li></div><div><li hugo-nav=/en/posts/tutos/my-first-app/12-control-volume-with-mediaelement/><a href=https://www.mauicestclair.fr/en/posts/tutos/my-first-app/12-control-volume-with-mediaelement/>Control the volume with MediaElement</a></li></div><div><li hugo-nav=/en/posts/tutos/my-first-app/13-download-audio-file/><a href=https://www.mauicestclair.fr/en/posts/tutos/my-first-app/13-download-audio-file/>Download an audio file in .NET MAUI</a></li></div><div><li hugo-nav=/en/posts/tutos/my-first-app/14-skip-next-or-previous-with-mediaelement/><a href=https://www.mauicestclair.fr/en/posts/tutos/my-first-app/14-skip-next-or-previous-with-mediaelement/>Listen to a playlist with MediaElement</a></li></div><div><li hugo-nav=/en/posts/tutos/my-first-app/15-add-animations-to-an-app/><a href=https://www.mauicestclair.fr/en/posts/tutos/my-first-app/15-add-animations-to-an-app/>Create animations in .NET MAUI for a disco atmosphere</a></li></div></ol></p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span title="Updated on 2023-12-01 00:00:11">Updated on 01/12/2023&nbsp;</span></div><div class=post-info-license><span><a rel="license external nofollow noopener noreferrer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span><a href=javascript:void(0); title="Share on Twitter" data-sharer=twitter data-url=https://www.mauicestclair.fr/en/posts/tutos/my-first-app/11-control-playback-position-with-mediaelement/ data-title="Control the playback position with MediaElement" data-via=kapuschinfo data-hashtags="MVVM,Data Binding,MediaElement,Slider"><i class="fa-brands fa-twitter fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); title="Share on Facebook" data-sharer=facebook data-url=https://www.mauicestclair.fr/en/posts/tutos/my-first-app/11-control-playback-position-with-mediaelement/ data-hashtag=MVVM><i class="fa-brands fa-facebook-square fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); title="Share on Linkedin" data-sharer=linkedin data-url=https://www.mauicestclair.fr/en/posts/tutos/my-first-app/11-control-playback-position-with-mediaelement/><i class="fa-brands fa-linkedin fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); title="Share on Blogger" data-sharer=blogger data-url=https://www.mauicestclair.fr/en/posts/tutos/my-first-app/11-control-playback-position-with-mediaelement/ data-title="Control the playback position with MediaElement" data-description="Let's continue with the implementation of playhead control! The idea is to be able to move to a specific frame in the track."><i class="fa-brands fa-blogger fa-fw" aria-hidden=true></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fa-solid fa-tags fa-fw me-1" aria-hidden=true></i><a href=/en/tags/mvvm/ class=post-tag>MVVM</a><a href=/en/tags/data-binding/ class=post-tag>Data Binding</a><a href=/en/tags/mediaelement/ class=post-tag>MediaElement</a><a href=/en/tags/slider/ class=post-tag>Slider</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>Back</a></span>&nbsp;|&nbsp;<span><a href=/en/>Home</a></span></section></div><div class=post-nav><a href=/en/posts/tutos/my-first-app/10-play-music-with-mediaelement/ class=post-nav-item rel=prev title="Play music in .NET MAUI with MediaElement"><i class="fa-solid fa-angle-left fa-fw" aria-hidden=true></i>Play music in .NET MAUI with MediaElement</a>
<a href=/en/posts/tutos/my-first-app/12-control-volume-with-mediaelement/ class=post-nav-item rel=next title="Control the volume with MediaElement">Control the volume with MediaElement<i class="fa-solid fa-angle-right fa-fw" aria-hidden=true></i></a></div></div><div id=comments><div id=giscus><script src=https://giscus.app/client.js data-repo=Kapusch/blog-dotnet-maui data-repo-id=R_kgDOH_4TbQ data-category="Blog comments" data-category-id=DIC_kwDOH_4Tbc4CSqsZ data-mapping=Title data-strict=0 data-theme=preferred_color_scheme data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-lang=en crossorigin=anonymous async defer></script></div><noscript>Please enable JavaScript to view the comments powered by <a href=https://giscus.app/ rel="external nofollow noopener noreferrer">giscus</a>.</noscript></div></article></main><footer class=footer><div class=footer-container><div class="footer-line custom"><a rel="license external nofollow noopener noreferrer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></div><div class="footer-line powered">Powered by <a href=https://gohugo.io/ target=_blank rel="external nofollow noopener noreferrer" title="Hugo 0.123.7">Hugo</a> | Theme - <a href=https://github.com/hugo-fixit/FixIt target=_blank rel=external title="FixIt v0.2.18"><img class=fixit-icon src=/fixit.min.svg alt="FixIt logo">&nbsp;FixIt</a></div><div class="footer-line copyright" itemscope itemtype=http://schema.org/CreativeWork><i class="fa-regular fa-copyright fa-fw" aria-hidden=true></i>
<span itemprop=copyrightYear>2022 - 2024</span><span class=author itemprop=copyrightHolder>
<a href=https://github.com/Kapusch target=_blank rel="external nofollow noopener noreferrer">Jean-Emmanuel BAILLAT</a></span><span class="license footer-divider"><u><a rel="license external nofollow noopener noreferrer" href=/privacy-policy target=_blank>Privacy</a></u> and <u><a rel="license external nofollow noopener noreferrer" href=/terms-of-use target=_blank>Terms</a></u></span></div><div class="footer-line statistics"></div></div></footer></div><div class=widgets><div class="fixed-buttons animate__faster d-none"><div class="fixed-button back-to-top" role=button aria-label="Back to Top"><i class="fa-solid fa-arrow-up fa-fw" aria-hidden=true></i><span class="variant-numeric d-none">0%</span></div><div class="fixed-button view-comments d-none" role=button aria-label="View Comments"><i class="fa-solid fa-comment fa-fw" aria-hidden=true></i></div></div><a href=https://github.com/Kapusch/blog-dotnet-maui/tree/main/Blog title="View source on GitHub" target=_blank rel="external nofollow" class="github-corner left d-none-mobile"><svg viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115h15l12 27L250 250V0z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentcolor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4l13.9-13.8C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8z" fill="currentcolor" class="octo-body"/></svg></a><div id=mask></div><noscript><div class=noscript-warning>Theme FixIt works best with JavaScript enabled.</div></noscript></div><link rel=stylesheet href=/lib/katex/katex.min.css><link rel=stylesheet href=/lib/cookieconsent/cookieconsent.min.css><script src=/lib/autocomplete/autocomplete.min.js defer></script><script src=/lib/lunr/lunr.min.js defer></script><script src=/lib/lunr/lunr.stemmer.support.min.js defer></script><script src=/lib/lunr/lunr.fr.min.js defer></script><script src=/lib/sharer/sharer.min.js async defer></script><script src=/lib/katex/katex.min.js defer></script><script src=/lib/katex/auto-render.min.js defer></script><script src=/lib/katex/copy-tex.min.js defer></script><script src=/lib/katex/mhchem.min.js defer></script><script src=/lib/cookieconsent/cookieconsent.min.js defer></script><script>window.config={code:{copyTitle:"Copy to clipboard",maxShownLines:50},comment:{enable:!0,expired:!1,giscus:{darkTheme:"dark_dimmed",lightTheme:"light"}},cookieconsent:{content:{dismiss:"Got it!",link:"Learn more",message:"This website uses Cookies to improve your experience."},enable:!0,palette:{button:{background:"#f0f0f0"},popup:{background:"#1aa3ff"}},theme:"edgeless"},math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!0,left:"\\begin{equation}",right:"\\end{equation}"},{display:!0,left:"\\begin{equation*}",right:"\\end{equation*}"},{display:!0,left:"\\begin{align}",right:"\\end{align}"},{display:!0,left:"\\begin{align*}",right:"\\end{align*}"},{display:!0,left:"\\begin{alignat}",right:"\\end{alignat}"},{display:!0,left:"\\begin{alignat*}",right:"\\end{alignat*}"},{display:!0,left:"\\begin{gather}",right:"\\end{gather}"},{display:!0,left:"\\begin{CD}",right:"\\end{CD}"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},search:{highlightTag:"em",lunrIndexURL:"/en/index.json",lunrLanguageCode:"en",maxResultLength:10,noResultsFound:"No results found",snippetLength:110,type:"lunr"}}</script><script src=/js/theme.min.js defer></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-0BB9XCL25S",{anonymize_ip:!0})</script><script src="https://www.googletagmanager.com/gtag/js?id=G-0BB9XCL25S" async></script></body></html>