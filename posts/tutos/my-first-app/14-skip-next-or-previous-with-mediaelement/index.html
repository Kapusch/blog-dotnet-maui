<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=fr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=2"><meta name=robots content="noodp"><title>Écouter une playlist avec MediaElement - MAUI, c'est clair !</title><meta name=author content="Jean-Emmanuel BAILLAT">
<meta name=author-link content="https://github.com/Kapusch"><meta name=description content="L’application est bien, mais ça serait plus sympa si on pouvait changer de morceau. Ça tombe bien, on va intégrer aujourd’hui une playlist musicale !"><meta name=keywords content='MediaElement,MVVM,ImageButton,Data Binding'><meta itemprop=name content="Écouter une playlist avec MediaElement"><meta itemprop=description content="L’application est bien, mais ça serait plus sympa si on pouvait changer de morceau. Ça tombe bien, on va intégrer aujourd’hui une playlist musicale !"><meta itemprop=datePublished content="2023-12-26T00:00:14+00:00"><meta itemprop=dateModified content="2023-12-26T00:00:14+00:00"><meta itemprop=wordCount content="2374"><meta itemprop=image content="https://www.mauicestclair.fr/posts/tutos/my-first-app/14-skip-next-or-previous-with-mediaelement/featured-image-preview-en.png"><meta itemprop=keywords content="MediaElement,MVVM,ImageButton,Data Binding,"><meta property="og:title" content="Écouter une playlist avec MediaElement"><meta property="og:description" content="L’application est bien, mais ça serait plus sympa si on pouvait changer de morceau. Ça tombe bien, on va intégrer aujourd’hui une playlist musicale !"><meta property="og:type" content="article"><meta property="og:url" content="https://www.mauicestclair.fr/posts/tutos/my-first-app/14-skip-next-or-previous-with-mediaelement/"><meta property="og:image" content="https://www.mauicestclair.fr/posts/tutos/my-first-app/14-skip-next-or-previous-with-mediaelement/featured-image-preview-en.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-12-26T00:00:14+00:00"><meta property="article:modified_time" content="2023-12-26T00:00:14+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://www.mauicestclair.fr/posts/tutos/my-first-app/14-skip-next-or-previous-with-mediaelement/featured-image-preview-en.png"><meta name=twitter:title content="Écouter une playlist avec MediaElement"><meta name=twitter:description content="L’application est bien, mais ça serait plus sympa si on pouvait changer de morceau. Ça tombe bien, on va intégrer aujourd’hui une playlist musicale !"><meta name=twitter:site content="@kapuschinfo"><meta name=application-name content="MAUI, c'est clair !"><meta name=apple-mobile-web-app-title content="MAUI, c'est clair !"><meta name=theme-color data-light=#f8f8f8 data-dark=#252627 content="#f8f8f8"><meta name=msapplication-TileColor content="#da532c"><link rel=canonical href=https://www.mauicestclair.fr/posts/tutos/my-first-app/14-skip-next-or-previous-with-mediaelement/><link rel=prev href=https://www.mauicestclair.fr/posts/tutos/my-first-app/13-download-audio-file/><link rel=next href=https://www.mauicestclair.fr/posts/tutos/my-first-app/15-add-animations-to-an-app/><link rel=stylesheet href=/css/style.min.css><link rel=stylesheet href=/lib/fontawesome-free/all.min.css><link rel=stylesheet href=/lib/animate/animate.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Écouter une playlist avec MediaElement","inLanguage":"fr","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/www.mauicestclair.fr\/posts\/tutos\/my-first-app\/14-skip-next-or-previous-with-mediaelement\/"},"genre":"posts","keywords":"MediaElement, MVVM, ImageButton, Data Binding","wordcount":2374,"url":"https:\/\/www.mauicestclair.fr\/posts\/tutos\/my-first-app\/14-skip-next-or-previous-with-mediaelement\/","datePublished":"2023-12-26T00:00:14+00:00","dateModified":"2023-12-26T00:00:14+00:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"Jean-Emmanuel BAILLAT"},"description":"L’application est bien, mais ça serait plus sympa si on pouvait changer de morceau. Ça tombe bien, on va intégrer aujourd’hui une playlist musicale !"}</script></head><body data-header-desktop=sticky data-header-mobile=auto><script>(window.localStorage?.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("data-theme","dark")</script><div class=wrapper data-page-style=wide><header class="desktop animate__faster" id=header-desktop><div class=header-wrapper data-github-corner=left><div class=header-title><a href=/ title="MAUI, c'est clair !"><img loading=lazy src=/main_avatar.jpg srcset="/main_avatar.jpg, /main_avatar.jpg 1.5x, /main_avatar.jpg 2x" sizes=auto data-title="MAUI, c'est clair !" data-alt="MAUI, c'est clair !" class=logo style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'><span class=header-title-text>MAUI, c'est clair !</span></a><span class=header-subtitle></span></div><nav><ul class=menu><li class="menu-item has-children"><a class=menu-link href=/posts/><i class="fa-solid fa-newspaper fa-fw fa-sm" aria-hidden=true></i> Articles</a><i class="dropdown-icon fa-solid fa-chevron-down" aria-hidden=true></i><ul class=sub-menu><li class=menu-item><a class=menu-link href=/posts/tutos/><i class="fa-solid fa-graduation-cap fa-fw fa-sm" aria-hidden=true></i> Cours</a></li><li class=menu-item><a class=menu-link href=/posts/tips/><i class="fa-solid fa-lightbulb fa-fw fa-sm" aria-hidden=true></i> Astuces</a></li></ul></li><li class=menu-item><a class=menu-link href=/tags/><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden=true></i> Tags</a></li><li class=menu-item><a class=menu-link href=/about/><i class="fa-solid fa-info-circle fa-fw fa-sm" aria-hidden=true></i> À propos</a></li><li class="menu-item delimiter"></li><li class="menu-item search" id=search-desktop><input type=text placeholder="Rechercher des titres, des contenus..." id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=Chercher><i class="fa-solid fa-search fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=Effacer><i class="fa-solid fa-times-circle fa-fw" aria-hidden=true></i>
</a><span class="search-button search-loading" id=search-loading-desktop><i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></li><li class="menu-item theme-switch" title="Changer de Thème"><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></li><li class="menu-item language-switch"><span role=button aria-label="Choisir la langue" title="Choisir la langue"><i class="fa-solid fa-language fa-fw" aria-hidden=true></i></span><ul class=sub-menu><li class=menu-item><span class="menu-link text-secondary" title=Français>Français</span></li><li class=menu-item><a href=/en/posts/tutos/my-first-app/14-skip-next-or-previous-with-mediaelement/ class=menu-link title=English>English</a></li></ul></li></ul></nav></div></header><header class="mobile animate__faster" id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="MAUI, c'est clair !"><img loading=lazy src=/main_avatar.jpg srcset="/main_avatar.jpg, /main_avatar.jpg 1.5x, /main_avatar.jpg 2x" sizes=auto data-title=/main_avatar.jpg data-alt=/main_avatar.jpg class=logo style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'><span class=header-title-text>MAUI, c'est clair !</span></a><span class=header-subtitle></span></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><nav><ul class=menu id=menu-mobile><li class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder="Rechercher des titres, des contenus..." id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=Chercher><i class="fa-solid fa-search fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=Effacer><i class="fa-solid fa-times-circle fa-fw" aria-hidden=true></i>
</a><span class="search-button search-loading" id=search-loading-mobile><i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>Annuler</a></li><li class=menu-item><span class=nested-item><a class=menu-link href=/posts/><i class="fa-solid fa-newspaper fa-fw fa-sm" aria-hidden=true></i> Articles</a>
<i class="dropdown-icon fa-solid fa-chevron-right" aria-hidden=true></i></span><ul class=sub-menu><li class=menu-item><a class=menu-link href=/posts/tutos/><i class="fa-solid fa-graduation-cap fa-fw fa-sm" aria-hidden=true></i> Cours</a></li><li class=menu-item><a class=menu-link href=/posts/tips/><i class="fa-solid fa-lightbulb fa-fw fa-sm" aria-hidden=true></i> Astuces</a></li></ul></li><li class=menu-item><a class=menu-link href=/tags/><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden=true></i> Tags</a></li><li class=menu-item><a class=menu-link href=/about/><i class="fa-solid fa-info-circle fa-fw fa-sm" aria-hidden=true></i> À propos</a></li><li class="menu-item menu-system"><span class="menu-system-item theme-switch" title="Changer de Thème"><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></span><span class="menu-system-item language-switch">
<span role=button aria-label="Choisir la langue" title="Choisir la langue">Français<i class="dropdown-icon fa-solid fa-chevron-down" aria-hidden=true></i></span>
<select class=language-select onchange="location=this.value"><option value=/posts/tutos/my-first-app/14-skip-next-or-previous-with-mediaelement/ selected disabled>Français</option><option value=/en/posts/tutos/my-first-app/14-skip-next-or-previous-with-mediaelement/>English</option></select></span></li></ul></nav></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><nav aria-label=breadcrumb class="breadcrumb-container sticky"><ol class=breadcrumb><li class=breadcrumb-item><a href=/posts/ title=Publications>Publications</a></li><li class=breadcrumb-item><a href=/posts/tutos/ title=Cours>Cours</a></li><li class=breadcrumb-item><a href=/posts/tutos/my-first-app/ title="Ma première app">Ma première app</a></li><li class="breadcrumb-item active" aria-current=page>Écouter une playlist avec MediaElement</li></ol></nav><main class=container><aside class=toc id=toc-auto><h2 class=toc-title>Contenus&nbsp;<i class="toc-icon fa-solid fa-angle-down fa-fw" aria-hidden=true></i></h2><div class=toc-content id=toc-content-auto></div></aside><aside class=aside-custom></aside><article class="page single"><div class=header><h1 class="single-title animate__animated animate__flipInX"><span>Écouter une playlist avec MediaElement</span></h1></div><div class=post-meta><div class=post-meta-line><span class=post-author><a href=https://github.com/Kapusch target=_blank rel="external nofollow noopener noreferrer author" class=author><img loading=lazy src=/main_avatar.jpg srcset="/main_avatar.jpg, /main_avatar.jpg 1.5x, /main_avatar.jpg 2x" sizes=auto data-title="Jean-Emmanuel BAILLAT" data-alt="Jean-Emmanuel BAILLAT" class=avatar style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'>&nbsp;Jean-Emmanuel BAILLAT</a></span></div><div class=post-meta-line><span title="publié le 2023-12-26 00:00:14"><i class="fa-regular fa-calendar-alt fa-fw me-1" aria-hidden=true></i><time datetime=26/12/2023>26/12/2023</time></span>&nbsp;<span title="Mis à jour le 2023-12-26 00:00:14"><i class="fa-regular fa-edit fa-fw me-1" aria-hidden=true></i><time datetime=26/12/2023>26/12/2023</time></span>&nbsp;<span><i class="fa-solid fa-pencil-alt fa-fw me-1" aria-hidden=true></i>2374 mots</span>&nbsp;<span><i class="fa-regular fa-clock fa-fw me-1" aria-hidden=true></i>12 minutes</span>&nbsp;</div></div><div class="details toc" id=toc-static data-kept=false><div class="details-summary toc-title"><span>Contenus</span>
<span><i class="details-icon fa-solid fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><ul><li><a href=#création-de-la-playlist>Création de la playlist</a></li><li><a href=#binding-des-composants>Binding des composants</a></li><li><a href=#rejouer-le-morceau-une-fois>Rejouer le morceau une fois</a></li><li><a href=#conclusion>Conclusion</a></li></ul></li></ul></nav></div></div><div class=content id=content><p><div class="details admonition info open"><div class="details-summary admonition-title"><i class="icon fa-solid fa-info-circle fa-fw" aria-hidden=true></i>‎<i class="details-icon fa-solid fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content>Afin d’assurer le bon déroulement de cet article, je t’invite à repartir depuis <a href=../10-play-music-with-mediaelement/>ce chapitre</a> où l’on a configuré le <em>MediaElement</em>.</div></div></div>La dernière fois, nous avions vu comment télécharger de la musique directement depuis l’app. Seulement, c’est la même chanson depuis le début !</p><p>L’application serait bien plus sympa si on pouvait changer de morceau, non ? Ça tombe bien, on va y intégrer aujourd’hui une playlist musicale.</p><h2 id=création-de-la-playlist>Création de la playlist</h2><p>Pour cela, définissons déjà la liste des morceaux disponibles dans l’application comme ceci :</p><p align=center style=margin-bottom:-10px><strong>Nom du fichier :</strong><code>MusicPlayerViewModel.cs</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kd>static</span> <span class=k>readonly</span> <span class=n>MusicTrack</span><span class=p>[]</span> <span class=n>playlist</span> <span class=p>=</span> <span class=k>new</span> <span class=n>MusicTrack</span><span class=p>[]</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>new</span> <span class=n>MusicTrack</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>AudioURL</span> <span class=p>=</span> <span class=s>&#34;https://prod-1.storage.jamendo.com/?trackid=1890762&amp;format=mp31&amp;from=b5bSbOTAT1kXawaT8EV9IA%3D%3D%7CGcDX%2BeejT3P%2F0CfPwtSyYA%3D%3D&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>AudioDownloadURL</span> <span class=p>=</span> <span class=s>&#34;https://prod-1.storage.jamendo.com/download/track/1890762/mp32/&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>Author</span> <span class=p>=</span> <span class=s>&#34;Alfonso Lugo&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>Title</span> <span class=p>=</span> <span class=s>&#34;Baila&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=k>new</span> <span class=n>MusicTrack</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>AudioURL</span> <span class=p>=</span> <span class=s>&#34;https://prod-1.storage.jamendo.com/?trackid=619144&amp;format=mp31&amp;from=%2BJv5PkdWd%2BvsByBkyrboJA%3D%3D%7Co%2FKvdc5gcd6iQLjnqacjYA%3D%3D&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>AudioDownloadURL</span> <span class=p>=</span> <span class=s>&#34;https://prod-1.storage.jamendo.com/download/track/619144/mp32/&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>Author</span> <span class=p>=</span> <span class=s>&#34;Pablo Gómez&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>Title</span> <span class=p>=</span> <span class=s>&#34;Devastation (remastered)&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=k>new</span> <span class=n>MusicTrack</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>AudioURL</span> <span class=p>=</span> <span class=s>&#34;https://prod-1.storage.jamendo.com/?trackid=1399476&amp;format=mp31&amp;from=LQFaB9%2FDVAE6QaK%2BsXtl%2FA%3D%3D%7CouuozaATpW3zoEvVwprgRw%3D%3D&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>AudioDownloadURL</span> <span class=p>=</span> <span class=s>&#34;https://prod-1.storage.jamendo.com/download/track/1399476/mp32/&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>Author</span> <span class=p>=</span> <span class=s>&#34;Singularity&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>Title</span> <span class=p>=</span> <span class=s>&#34;How many times&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=k>new</span> <span class=n>MusicTrack</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>AudioURL</span> <span class=p>=</span> <span class=s>&#34;https://prod-1.storage.jamendo.com/?trackid=946449&amp;format=mp31&amp;from=blTB635bS8UiDVL%2FzZC2Xw%3D%3D%7CQO1Fj6AWgTrjIu7LELLCLA%3D%3D&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>AudioDownloadURL</span> <span class=p>=</span> <span class=s>&#34;https://prod-1.storage.jamendo.com/download/track/946449/mp32/&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>Author</span> <span class=p>=</span> <span class=s>&#34;Julien Gathy&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>Title</span> <span class=p>=</span> <span class=s>&#34;Octave (HQ)&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=k>new</span> <span class=n>MusicTrack</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>AudioURL</span> <span class=p>=</span> <span class=s>&#34;https://prod-1.storage.jamendo.com/?trackid=1026396&amp;format=mp31&amp;from=nWYOo%2FxFcd1oJBINLSQAXg%3D%3D%7CI8xQbXqZfz2bfgmtqxmqyA%3D%3D&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>AudioDownloadURL</span> <span class=p>=</span> <span class=s>&#34;https://prod-1.storage.jamendo.com/download/track/1026396/mp32/&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>Author</span> <span class=p>=</span> <span class=s>&#34;dj alike&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>Title</span> <span class=p>=</span> <span class=s>&#34;dj alike (new trance edition)&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span></code></pre></td></tr></table></div></div><p>Rien d’extraordinaire ici, si ce n’est la démonstration de l’utilité de notre <strong>Model</strong> !</p><p><div class="details admonition comment open"><div class="details-summary admonition-title"><i class="icon fa-regular fa-comments fa-fw" aria-hidden=true></i>‎<i class="details-icon fa-solid fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content>🐒‎ ‎ Oh oui, 5 chansons, ça va groover !! 🙊</div></div></div>Mais c’est ça oui, moque-toi ! 😂</p><p>Le nombre de chansons est limité à 5 pour les besoins de ce cours, mais imagine si on permettait à l’utilisateur d’explorer des titres du monde entier !</p><p><div class="details admonition info open"><div class="details-summary admonition-title"><i class="icon fa-solid fa-info-circle fa-fw" aria-hidden=true></i>‎<i class="details-icon fa-solid fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content>Il n’est pas improbable que je réfléchisse à une suite de ce cours, peut-être en vidéo !</div></div></div>Mais revenons à nos moutons.</p><p>La logique que l’on va implémenter consiste à passer d’un morceau à un autre parmi notre <code>playlist</code>. C’est un peu comme un pointeur qui glisse sur les cases d’un tableau d’éléments de type <code>MusicTrack</code> pour définir la prochaine musique à jouer.</p><p>Pour cela, nous allons améliorer la logique autour de la propriété <code>CurrentTrack</code> introduite dans <a href=../13-download-audio-file/>le chapitre précédent</a> avec le code suivant :</p><p align=center style=margin-bottom:-10px><strong>Nom du fichier :</strong><code>MusicPlayerViewModel.cs</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=cp>#region</span> <span class=n>Properties</span>
</span></span><span class=line><span class=cl><span class=p>...</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Une nouvelle propriété pour définir la position du &#34;pointeur&#34;</span>
</span></span><span class=line><span class=cl><span class=na>[ObservableProperty]</span>
</span></span><span class=line><span class=cl><span class=na>[NotifyPropertyChangedFor(nameof(CurrentTrack))]</span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=n>currentTrackPosition</span> <span class=p>=</span> <span class=m>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Attention à bien renommer la propriété avec un &#34;C&#34; majuscule</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=n>MusicTrack</span> <span class=n>CurrentTrack</span> <span class=p>=&gt;</span> <span class=n>playlist</span><span class=p>[</span><span class=n>CurrentTrackPosition</span><span class=p>];</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cp>#endregion</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=n>MusicPlayerViewModel</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Nous n&#39;avons plus besoin du code ci-après, à supprimer !</span>
</span></span><span class=line><span class=cl>    <span class=c1>// CurrentTrack = new MusicTrack()</span>
</span></span><span class=line><span class=cl>    <span class=c1>// {</span>
</span></span><span class=line><span class=cl>    <span class=c1>//     ...</span>
</span></span><span class=line><span class=cl>    <span class=c1>// };</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>On a ajouté une nouvelle propriété nommée <code>currentTrackPosition</code> qui correspond en quelque sorte à notre pointeur évoqué plus haut. C’est elle qui va définir la position de la chanson qu’il faut jouer parmi la <code>playlist</code>, grâce à ce nouvel attribut : <a href=https://learn.microsoft.com/fr-fr/dotnet/communitytoolkit/mvvm/generators/observableproperty#notifying-dependent-properties target=_blank rel="external nofollow noopener noreferrer">NotifyPropertyChangedFor()<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a>.</p><p>Concrètement, à chaque changement de valeur de la propriété <code>currentTrackPosition</code>, cet attribut va déclencher une notification vers la <strong>View</strong> pour l’informer que la propriété <code>CurrentTrack</code> vient d’être mise à jour.</p><p>En effet, la propriété <code>CurrentTrack</code> a été adaptée pour retourner un titre musical depuis la <code>playlist</code> à la position demandée (<code>playlist[CurrentTrackPosition]</code>).</p><p><div class="details admonition info open"><div class="details-summary admonition-title"><i class="icon fa-solid fa-info-circle fa-fw" aria-hidden=true></i>‎<i class="details-icon fa-solid fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content>D’ailleurs, nous n’avons plus besoin d’initialiser <code>CurrentTrack</code> depuis le constructeur du <em>MusicPlayerViewModel</em> ! Tu peux donc supprimer ce bout de code.</div></div></div>C’est déjà l’heure de relancer l’application !</p><p><div class="details admonition comment open"><div class="details-summary admonition-title"><i class="icon fa-regular fa-comments fa-fw" aria-hidden=true></i>‎<i class="details-icon fa-solid fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content>🐒‎ ‎ Mais je n’ai vu aucun changement, c’est normal ?</div></div></div>Exact, c’est encore le même morceau de musique qui est joué ! Et c’est tout à fait normal.</p><p>As-tu remarqué la valeur initiale de la propriété <code>currentTrackPosition</code> ? Elle est égale à 0, ce qui correspond donc à la première position du tableau <code>playlist</code>, qui n’est autre que la chanson “Baila” jouée depuis <a href=../10-play-music-with-mediaelement/>le chapitre n°10</a>.</p><p>Mais passons vite à la suite, car on veut écouter les autres morceaux !</p><h2 id=binding-des-composants>Binding des composants</h2><p>Attention, révélation : on va désormais s’attaquer aux derniers composants factices de l’application !</p><p>Si tu te rappelles bien du <a href=../8-music-player-display-media-playback/>chapitre sur l’affichage des contrôles de lecture</a>, il nous reste 3 composants de type <em>ImageButton</em> à implémenter :</p><ul><li><p><code>SkipNextButton</code> pour passer à la chanson suivante,</p></li><li><p><code>SkipPreviousButton</code> pour revenir à la chanson précédente,</p></li><li><p>et <code>RepeatOnceButton</code> pour rejouer la piste musicale (une seule fois).</p></li></ul><p>Pour passer à la prochaine chanson, c’est très simple. Commence par ajouter la commande suivante dans le <strong>ViewModel</strong> :</p><p align=center style=margin-bottom:-10px><strong>Nom du fichier :</strong><code>MusicPlayerViewModel.cs</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=cp>#region</span> <span class=n>Commands</span>
</span></span><span class=line><span class=cl><span class=na>
</span></span></span><span class=line><span class=cl><span class=na>[RelayCommand]</span>
</span></span><span class=line><span class=cl><span class=k>void</span> <span class=n>GoToNextTrack</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=n>CurrentTrackPosition</span> <span class=p>+</span> <span class=m>1</span> <span class=p>&lt;</span> <span class=n>playlist</span><span class=p>.</span><span class=n>Length</span><span class=p>)</span> <span class=n>CurrentTrackPosition</span><span class=p>++;</span>
</span></span><span class=line><span class=cl>    <span class=k>else</span> <span class=n>CurrentTrackPosition</span> <span class=p>=</span> <span class=m>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>...</span>
</span></span><span class=line><span class=cl><span class=cp>#endregion</span>
</span></span></code></pre></td></tr></table></div></div><p>Puis associe la nouvelle commande au bouton <code>SkipNextButton</code> depuis la <strong>View</strong> :</p><p align=center style=margin-bottom:-10px><strong>Nom du fichier :</strong><code>MusicPlayerView.cs</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=cp>#region</span> <span class=n>Media</span> <span class=n>Control</span> <span class=n>Panel</span>
</span></span><span class=line><span class=cl><span class=p>...</span>
</span></span><span class=line><span class=cl><span class=n>ImageButton</span> <span class=n>SkipNextButton</span> <span class=p>=</span> <span class=k>new</span> <span class=n>ImageButton</span> <span class=c1>// Le signe “=&gt;” a été remplacé par “=”</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>HeightRequest</span> <span class=p>=</span> <span class=m>75</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>WidthRequest</span> <span class=p>=</span> <span class=m>75</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>Source</span> <span class=p>=</span> <span class=s>&#34;skip_next.png&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span> <span class=p>.</span><span class=n>BindCommand</span><span class=p>(</span><span class=s>&#34;GoToNextTrackCommand&#34;</span><span class=p>);</span> <span class=c1>// et voilà la commande associée</span>
</span></span><span class=line><span class=cl><span class=p>...</span>
</span></span><span class=line><span class=cl><span class=cp>#endregion</span>
</span></span></code></pre></td></tr></table></div></div><p>Le comportement défini dans la méthode <em>GoToNextTrack()</em> consiste à simplement déplacer d’un cran en avant la position du pointeur sur le tableau. Bien sûr, quand la dernière case du tableau est atteinte, alors on retourne au début de la <code>playlist</code>.</p><p>Et si on testait ?</p><p align=center><img max-width=100% max-height=100% src=./images/65EB486D8A0AC5564134E3CFA92FB507.gif></p><figure><figcaption class=image-caption>Super, on peut enfin écouter d’autres chansons !</figcaption></figure><p><div class="details admonition comment open"><div class="details-summary admonition-title"><i class="icon fa-regular fa-comments fa-fw" aria-hidden=true></i>‎<i class="details-icon fa-solid fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content>🐒‎ ‎ C’était rapide ! Et pour revenir en arrière dans la playlist, on fait juste l’inverse ?</div></div></div>Presque ! Pour revenir à la chanson précédente, on va en effet implémenter une logique similaire à une condition près. En effet, j’aimerais d’abord que la chanson redémarre avant de basculer vers la chanson précédente.</p><p>Je vais t’expliquer comment. Ajoute déjà la commande suivante dans le <strong>ViewModel</strong> :</p><p align=center style=margin-bottom:-10px><strong>Nom du fichier :</strong><code>MusicPlayerViewModel.cs</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=cp>#region</span> <span class=n>Commands</span>
</span></span><span class=line><span class=cl><span class=na>
</span></span></span><span class=line><span class=cl><span class=na>[RelayCommand]</span>
</span></span><span class=line><span class=cl><span class=k>void</span> <span class=n>GoToPreviousTrack</span><span class=p>(</span><span class=kt>double</span> <span class=n>elapsedTimeForCurrentTrack</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=n>elapsedTimeForCurrentTrack</span> <span class=p>&lt;</span> <span class=m>2</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// Soit on revient un cran en arrière dans la playlist</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>CurrentTrackPosition</span> <span class=p>-</span> <span class=m>1</span> <span class=p>&gt;=</span> <span class=m>0</span><span class=p>)</span> <span class=n>CurrentTrackPosition</span><span class=p>--;</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span> <span class=n>CurrentTrackPosition</span> <span class=p>=</span> <span class=n>playlist</span><span class=p>.</span><span class=n>Length</span> <span class=p>-</span> <span class=m>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>else</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// Ou bien on réinitialise le morceau en cours</span>
</span></span><span class=line><span class=cl>        <span class=c1>// en forçant la notification vers la View</span>
</span></span><span class=line><span class=cl>        <span class=n>OnPropertyChanged</span><span class=p>(</span><span class=s>&#34;CurrentTrack&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>...</span>
</span></span><span class=line><span class=cl><span class=cp>#endregion</span>
</span></span></code></pre></td></tr></table></div></div><p>Le comportement défini dans la méthode <em>GoToPreviousTrack()</em> consiste à simplement déplacer d’un cran en arrière la position du pointeur sur le tableau. Bien sûr, quand la première case du tableau est atteinte, alors on bascule à la dernière chanson de la <code>playlist</code>.</p><p>Mais as-tu remarqué la condition imposée dans le <code>if</code>? On ne doit revenir à la chanson précédente que si la chanson en cours a été jouée depuis moins de 2 secondes.</p><p><div class="details admonition comment open"><div class="details-summary admonition-title"><i class="icon fa-regular fa-comments fa-fw" aria-hidden=true></i>‎<i class="details-icon fa-solid fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content>🐒‎ ‎ Mais comment va-t’on faire pour obtenir cette information ?</div></div></div>Jusqu’à présent, nous n’avions vu que des commandes sans paramètre. Mais cette fois-ci, on va partager l’information <code>TimeTracker.Value</code> en paramètre de la commande à associer au <code>SkipPreviousButton</code>.</p><p>Pour cela, applique les changements suivants dans la <strong>View</strong> :</p><p align=center style=margin-bottom:-10px><strong>Nom du fichier :</strong><code>MusicPlayerView.cs</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=cp>#region</span> <span class=n>Media</span> <span class=n>Control</span> <span class=n>Panel</span>
</span></span><span class=line><span class=cl><span class=p>...</span>
</span></span><span class=line><span class=cl><span class=n>ImageButton</span> <span class=n>SkipPreviousButton</span> <span class=p>=</span> <span class=k>new</span> <span class=n>ImageButton</span> <span class=c1>// Le signe “=&gt;” a été remplacé par “=”</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>HeightRequest</span> <span class=p>=</span> <span class=m>75</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>WidthRequest</span> <span class=p>=</span> <span class=m>75</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>Source</span> <span class=p>=</span> <span class=s>&#34;skip_previous.png&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span> <span class=p>.</span><span class=n>BindCommand</span><span class=p>(</span><span class=s>&#34;GoToPreviousTrackCommand&#34;</span><span class=p>,</span> <span class=c1>// et voilà la commande associée, avec un paramètre !</span>
</span></span><span class=line><span class=cl>    <span class=n>parameterPath</span><span class=p>:</span> <span class=n>nameof</span><span class=p>(</span><span class=n>TimeTracker</span><span class=p>.</span><span class=n>Value</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=n>parameterSource</span><span class=p>:</span> <span class=n>TimeTracker</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>...</span>
</span></span><span class=line><span class=cl><span class=cp>#endregion</span>
</span></span></code></pre></td></tr></table></div></div><p>On emploie toujours <em>BindCommand()</em>, mais on utilise deux paramètres supplémentaires pour les besoins de notre méthode <em>GoToPreviousTrack()</em> :</p><ul><li><p>L’information à passer en paramètre (<code>parameterPath</code>), c’est le <code>TimeTracker.Value</code> correspondant au temps de lecture écoulé,</p></li><li><p>Et la source de cette propriété (<code>parameterSource</code>), c’est bien sûr le <code>TimeTracker</code>.</p></li></ul><p>Enfin, dans le cas où l’on doit redémarrer la chanson, on fait preuve d’un peu d’astuce en utilisant la méthode <em>OnPropertyChanged()</em>. En effet, cela va forcer le déclenchement d’une notification vers la <strong>View</strong> pour l’informer que la propriété <code>CurrentTrack</code> vient d’être mise à jour (bien que sa valeur n’ait pas changé du tout !).</p><p>Et ça y’est ! Voyons tout de suite ce que ça donne :</p><p align=center><img max-width=100% max-height=100% src=./images/40805480AF240635975DCC72C674F6B6.gif></p><figure><figcaption class=image-caption>Au premier clic, la chanson redémarre. Et les clics suivants permettent de revenir aux chansons précédentes.</figcaption></figure><p>Eh bien voilà ! Il ne nous reste plus qu’un bouton à implémenter pour permettre la répétition du morceau qui est en cours de lecture.</p><h2 id=rejouer-le-morceau-une-fois>Rejouer le morceau une fois</h2><p>C’est la dernière ligne droite de ce cours, accroche-toi !</p><p>Pour permettre la répétition d’un morceau, nous devons d’abord ajouter la propriété suivante dans le <strong>ViewModel</strong> :</p><p align=center style=margin-bottom:-10px><strong>Nom du fichier :</strong><code>MusicPlayerViewModel.cs</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=cp>#region</span> <span class=n>Properties</span>
</span></span><span class=line><span class=cl><span class=p>...</span>
</span></span><span class=line><span class=cl><span class=na>[ObservableProperty]</span>
</span></span><span class=line><span class=cl><span class=kt>bool</span> <span class=n>mustRepeatCurrentTrackOnce</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cp>#endregion</span>
</span></span></code></pre></td></tr></table></div></div><p>Il s’agit d’un booléen classique dont l’état sera modifié via sa commande dédiée :</p><p align=center style=margin-bottom:-10px><strong>Nom du fichier :</strong><code>MusicPlayerViewModel.cs</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=cp>#region</span> <span class=n>Commands</span>
</span></span><span class=line><span class=cl><span class=na>
</span></span></span><span class=line><span class=cl><span class=na>[RelayCommand]</span>
</span></span><span class=line><span class=cl><span class=k>void</span> <span class=n>ToggleRepeatOnce</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>MustRepeatCurrentTrackOnce</span> <span class=p>=</span> <span class=p>!</span><span class=n>MustRepeatCurrentTrackOnce</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>...</span>
</span></span><span class=line><span class=cl><span class=cp>#endregion</span>
</span></span></code></pre></td></tr></table></div></div><p>L’idée est qu’à chaque clic de l’utilisateur, on inverse l’état du booléen afin d’activer ou désactiver la répétition. Il ne nous reste alors plus qu’à associer cette commande au bouton <code>RepeatOnceButton</code> depuis la <strong>View</strong> :</p><p align=center style=margin-bottom:-10px><strong>Nom du fichier :</strong><code>MusicPlayerView.cs</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=cp>#region</span> <span class=n>Media</span> <span class=n>Control</span> <span class=n>Panel</span>
</span></span><span class=line><span class=cl><span class=p>...</span>
</span></span><span class=line><span class=cl><span class=n>ImageButton</span> <span class=n>RepeatOnceButton</span> <span class=p>=</span> <span class=k>new</span> <span class=n>ImageButton</span> <span class=c1>// Le signe “=&gt;” a été remplacé par “=”</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>CornerRadius</span> <span class=p>=</span> <span class=m>5</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>HeightRequest</span> <span class=p>=</span> <span class=m>25</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>WidthRequest</span> <span class=p>=</span> <span class=m>25</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>Source</span> <span class=p>=</span> <span class=s>&#34;repeat_once.png&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>BackgroundColor</span> <span class=p>=</span> <span class=n>Colors</span><span class=p>.</span><span class=n>Black</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>BorderColor</span> <span class=p>=</span> <span class=n>Colors</span><span class=p>.</span><span class=n>GreenYellow</span> <span class=c1>// On rajoute une bordure colorée au bouton</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span> <span class=p>.</span><span class=n>BindCommand</span><span class=p>(</span><span class=s>&#34;ToggleRepeatOnceCommand&#34;</span><span class=p>);</span> <span class=c1>// Et voilà la commande associée</span>
</span></span><span class=line><span class=cl><span class=p>...</span>
</span></span><span class=line><span class=cl><span class=cp>#endregion</span>
</span></span></code></pre></td></tr></table></div></div><p>Comme tu l’auras peut-être remarqué, j’ai défini une couleur pour le contour du <code>RepeatOnceButton</code> avec la propriété <code>BorderColor</code>. C’est pour améliorer le rendu visuel quand la répétition est enclenchée !</p><p>Pour cela, on va se baser évidemment sur la propriété <code>MustRepeatCurrentTrackOnce</code>. Modifie donc la méthode <em>InitMediaControlPanel()</em> pour appliquer les changements suivants :</p><p align=center style=margin-bottom:-10px><strong>Nom du fichier :</strong><code>MusicPlayerView.cs</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=k>void</span> <span class=n>InitMediaControlPanel</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=p>...</span>
</span></span><span class=line><span class=cl>    <span class=n>RepeatOnceButton</span><span class=p>.</span><span class=n>Bind</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=n>targetProperty</span><span class=p>:</span> <span class=n>ImageButton</span><span class=p>.</span><span class=n>BorderWidthProperty</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>path</span><span class=p>:</span> <span class=n>nameof</span><span class=p>(</span><span class=n>MusicPlayerViewModel</span><span class=p>.</span><span class=n>MustRepeatCurrentTrackOnce</span><span class=p>),</span>
</span></span><span class=line><span class=cl>        <span class=n>convert</span><span class=p>:</span> <span class=p>(</span><span class=kt>bool</span> <span class=n>isEnabled</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=n>isEnabled</span> <span class=p>?</span> <span class=m>2</span> <span class=p>:</span> <span class=m>0</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>Avec ce code, on joue avec l’épaisseur des bordures (<code>BorderWidth</code>) du bouton <code>RepeatOnceButton</code> selon si l’option de répétition est activée ou non. En effet, il faut savoir que l’épaisseur du contour est par défaut négative !</p><p align=center><img max-width=100% max-height=100% src=./images/60DAE0F96E9985F1F116474E43F6167B.png></p><figure><figcaption class=image-caption>On ne risque pas de voir de contour avec une épaisseur négative !</figcaption></figure><p>Autrement dit, on ne verra aucune bordure à moins de modifier nous-mêmes la valeur du <code>BorderWidth</code>.</p><p>C’est pourquoi, dans le <em>convert</em>, on définit une valeur positive pour faire apparaître un contour coloré quand <code>MustRepeatCurrentTrackOnce</code> est égal à <code>True</code>.</p><p align=center><img max-width=100% max-height=100% src=./images/86B48EF1E89B9C492E24323D2F50DE83.gif></p><figure><figcaption class=image-caption>On voit bien quand la répétition est active. Bon après, les goûts et les couleurs, c’est autre chose !</figcaption></figure><p><div class="details admonition comment open"><div class="details-summary admonition-title"><i class="icon fa-regular fa-comments fa-fw" aria-hidden=true></i>‎<i class="details-icon fa-solid fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content>🐒‎ ‎ C’est très bien, mais ça ne va pas nous aider à boucler le morceau, non ?</div></div></div>C’est vrai ! En fait, on va se baser sur le paramètre <code>MustRepeatCurrentTrackOnce</code> pour savoir s’il faut redémarrer la chanson à la fin du morceau, ou passer à la chanson suivante.</p><p>Et cette logique sera définie dans le <strong>ViewModel</strong> avec cette nouvelle méthode publique :</p><p align=center style=margin-bottom:-10px><strong>Nom du fichier :</strong><code>MusicPlayerViewModel.cs</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kd>public</span> <span class=k>void</span> <span class=n>AssessRepeatOrSkip</span><span class=p>()</span> <span class=c1>// La méthode doit être publique</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=n>MustRepeatCurrentTrackOnce</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// Soit on réinitialise le morceau en cours</span>
</span></span><span class=line><span class=cl>        <span class=c1>// en forçant la notification vers la View</span>
</span></span><span class=line><span class=cl>        <span class=n>OnPropertyChanged</span><span class=p>(</span><span class=s>&#34;CurrentTrack&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=n>MustRepeatCurrentTrackOnce</span> <span class=p>=</span> <span class=kc>false</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>else</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// Ou bien on se déplace d&#39;une position vers l&#39;avant dans la playlist</span>
</span></span><span class=line><span class=cl>        <span class=n>GoToNextTrack</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>Selon que <code>MustRepeatCurrentTrackOnce</code> est à <code>True</code> ou <code>False</code>, on fait soit à nouveau appel à la technique du <em>OnPropertyChanged()</em> que l’on a vue plus haut, ou bien on passe à la chanson suivante avec la méthode <em>GoToNextTrack()</em>.</p><p>Au fait, on ne veut répéter la chanson qu’une seule fois ! Alors n’oublie pas de désactiver la répétition en passant la propriété <code>MustRepeatCurrentTrackOnce</code> à <code>False</code>.</p><p>Enfin, pour détecter le moment où la chanson se termine, on va se baser sur l’évènement <em>MediaEnded</em> exposé par le <em>MediaElement</em>, comme ceci :</p><p align=center style=margin-bottom:-10px><strong>Nom du fichier :</strong><code>MusicPlayerView.cs</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=k>void</span> <span class=n>InitMusicPlayer</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=p>...</span>
</span></span><span class=line><span class=cl>    <span class=n>MusicPlayer</span><span class=p>.</span><span class=n>MediaEnded</span> <span class=p>+=</span> <span class=n>MusicPlayer_MediaEnded</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>Et c’est au moment où l’évènement se déclenche que l’on va demander à répéter la chanson en cours ou passer au morceau suivant :</p><p align=center style=margin-bottom:-10px><strong>Nom du fichier :</strong><code>MusicPlayerView.cs</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=cp>#region</span> <span class=n>Events</span>
</span></span><span class=line><span class=cl><span class=p>...</span>
</span></span><span class=line><span class=cl><span class=k>void</span> <span class=n>MusicPlayer_MediaEnded</span><span class=p>(</span><span class=kt>object</span> <span class=n>sender</span><span class=p>,</span> <span class=n>EventArgs</span> <span class=n>e</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=n>BindingContext</span> <span class=k>as</span> <span class=n>MusicPlayerViewModel</span><span class=p>).</span><span class=n>AssessRepeatOrSkip</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cp>#endregion</span>
</span></span></code></pre></td></tr></table></div></div><p>Pour cela, on s’appuie sur le <code>BindingContext</code> de la <em>MusicPlayerView</em> afin d’appeler la méthode <em>AssessRepeatOrSkip()</em> que l’on vient de définir dans le <em>MusicPlayerViewModel</em>.</p><p>C’est l’heure de la démo ! Recompile le projet et vérifie que le morceau en cours redémarre après avoir cliqué sur le bouton de répétition :</p><p align=center><img max-width=100% max-height=100% src=./images/E2F9E7696167B73A0592778C3BF8C004.gif></p><figure><figcaption class=image-caption>Si la répétition a été demandée, alors la chanson redémarre (une seule fois !).</figcaption></figure><p>Puis laisse la chanson se terminer pour vérifier qu’on passe bien à la suivante :</p><p align=center><img max-width=100% max-height=100% src=./images/26C3D60C40D443F7ECB0AA75D9858D53.gif></p><figure><figcaption class=image-caption>Dès que la chanson se termine, ça passe à la suivante !</figcaption></figure><h2 id=conclusion>Conclusion</h2><p>Bon eh bien voilà, est-ce que le résultat te plaît ?</p><p>On peut désormais profiter de l’application et écouter quelques titres à la suite, au volume souhaité, réécouter quelques passages, et même télécharger les morceaux ! 😎</p><p><div class="details admonition info open"><div class="details-summary admonition-title"><i class="icon fa-solid fa-info-circle fa-fw" aria-hidden=true></i>‎<i class="details-icon fa-solid fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content>Pour récupérer le projet reprenant toutes les étapes appliquées jusqu’ici dans ce cours, réfère-toi au <a href=../2-setup-the-project/>guide d’installation du projet</a> et repars de l’exemple situé dans le dossier <em>“5 - Music Player”</em>.</div></div></div>Mais ça manque un peu d’animation pour une ambiance “boîte de nuit”… Or c’était la <a href=../1-introduction/>promesse du début</a> !</p><p>On va remédier à ça dans le <a href=../15-add-animations-to-an-app/>prochain article</a>, et ce sera le dernier de cette série !!</p><hr><p>Plus d&rsquo;articles dans la même série:<ol><div><li hugo-nav=/posts/tutos/my-first-app/1-introduction/><a href=https://www.mauicestclair.fr/posts/tutos/my-first-app/1-introduction/>Ma toute première app en .NET MAUI</a></li></div><div><li hugo-nav=/posts/tutos/my-first-app/2-setup-the-project/><a href=https://www.mauicestclair.fr/posts/tutos/my-first-app/2-setup-the-project/>Installation du projet .NET MAUI</a></li></div><div><li hugo-nav=/posts/tutos/my-first-app/3-first-run-of-the-project/><a href=https://www.mauicestclair.fr/posts/tutos/my-first-app/3-first-run-of-the-project/>Première exécution de l’app .NET MAUI</a></li></div><div><li hugo-nav=/posts/tutos/my-first-app/4-mvvm-for-successful-apps/><a href=https://www.mauicestclair.fr/posts/tutos/my-first-app/4-mvvm-for-successful-apps/>Le MVVM, pour une application réussie</a></li></div><div><li hugo-nav=/posts/tutos/my-first-app/5-navigate-to-a-new-page/><a href=https://www.mauicestclair.fr/posts/tutos/my-first-app/5-navigate-to-a-new-page/>Naviguer vers une nouvelle page en .NET MAUI</a></li></div><div><li hugo-nav=/posts/tutos/my-first-app/6-arrange-elements-on-a-page/><a href=https://www.mauicestclair.fr/posts/tutos/my-first-app/6-arrange-elements-on-a-page/>Agencer les éléments d'une page .NET MAUI</a></li></div><div><li hugo-nav=/posts/tutos/my-first-app/7-music-player-display-time-tracker/><a href=https://www.mauicestclair.fr/posts/tutos/my-first-app/7-music-player-display-time-tracker/>Affichage du lecteur MP3 - Durée d'écoute</a></li></div><div><li hugo-nav=/posts/tutos/my-first-app/8-music-player-display-media-playback/><a href=https://www.mauicestclair.fr/posts/tutos/my-first-app/8-music-player-display-media-playback/>Affichage du lecteur MP3 - Contrôles de lecture</a></li></div><div><li hugo-nav=/posts/tutos/my-first-app/9-music-player-display-volume/><a href=https://www.mauicestclair.fr/posts/tutos/my-first-app/9-music-player-display-volume/>Affichage du lecteur MP3 - Volume</a></li></div><div><li hugo-nav=/posts/tutos/my-first-app/10-play-music-with-mediaelement/><a href=https://www.mauicestclair.fr/posts/tutos/my-first-app/10-play-music-with-mediaelement/>Écouter de la musique en .NET MAUI avec MediaElement</a></li></div><div><li hugo-nav=/posts/tutos/my-first-app/11-control-playback-position-with-mediaelement/><a href=https://www.mauicestclair.fr/posts/tutos/my-first-app/11-control-playback-position-with-mediaelement/>Contrôler la tête de lecture avec MediaElement</a></li></div><div><li hugo-nav=/posts/tutos/my-first-app/12-control-volume-with-mediaelement/><a href=https://www.mauicestclair.fr/posts/tutos/my-first-app/12-control-volume-with-mediaelement/>Contrôler le volume avec MediaElement</a></li></div><div><li hugo-nav=/posts/tutos/my-first-app/13-download-audio-file/><a href=https://www.mauicestclair.fr/posts/tutos/my-first-app/13-download-audio-file/>Télécharger un fichier audio en .NET MAUI</a></li></div><div class=current><li hugo-nav=/posts/tutos/my-first-app/14-skip-next-or-previous-with-mediaelement/ class=nostyle><a href=https://www.mauicestclair.fr/posts/tutos/my-first-app/14-skip-next-or-previous-with-mediaelement/>Écouter une playlist avec MediaElement</a></li></div><div><li hugo-nav=/posts/tutos/my-first-app/15-add-animations-to-an-app/><a href=https://www.mauicestclair.fr/posts/tutos/my-first-app/15-add-animations-to-an-app/>Créer des animations avec .NET MAUI pour une ambiance disco</a></li></div></ol></p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span title="Mis à jour le 2023-12-26 00:00:14">Mis à jour le 26/12/2023&nbsp;</span></div><div class=post-info-license><span><a rel="license external nofollow noopener noreferrer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span><a href=javascript:void(0); title="Partager via Twitter" data-sharer=twitter data-url=https://www.mauicestclair.fr/posts/tutos/my-first-app/14-skip-next-or-previous-with-mediaelement/ data-title="Écouter une playlist avec MediaElement" data-via=kapuschinfo data-hashtags="MediaElement,MVVM,ImageButton,Data Binding"><i class="fa-brands fa-twitter fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); title="Partager via Facebook" data-sharer=facebook data-url=https://www.mauicestclair.fr/posts/tutos/my-first-app/14-skip-next-or-previous-with-mediaelement/ data-hashtag=MediaElement><i class="fa-brands fa-facebook-square fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); title="Partager via Linkedin" data-sharer=linkedin data-url=https://www.mauicestclair.fr/posts/tutos/my-first-app/14-skip-next-or-previous-with-mediaelement/><i class="fa-brands fa-linkedin fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); title="Partager via Blogger" data-sharer=blogger data-url=https://www.mauicestclair.fr/posts/tutos/my-first-app/14-skip-next-or-previous-with-mediaelement/ data-title="Écouter une playlist avec MediaElement" data-description="L’application est bien, mais ça serait plus sympa si on pouvait changer de morceau. Ça tombe bien, on va intégrer aujourd’hui une playlist musicale !"><i class="fa-brands fa-blogger fa-fw" aria-hidden=true></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fa-solid fa-tags fa-fw me-1" aria-hidden=true></i><a href=/tags/mediaelement/ class=post-tag>MediaElement</a><a href=/tags/mvvm/ class=post-tag>MVVM</a><a href=/tags/imagebutton/ class=post-tag>ImageButton</a><a href=/tags/data-binding/ class=post-tag>Data Binding</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>Retour</a></span>&nbsp;|&nbsp;<span><a href=/>Accueil</a></span></section></div><div class=post-nav><a href=/posts/tutos/my-first-app/13-download-audio-file/ class=post-nav-item rel=prev title="Télécharger un fichier audio en .NET MAUI"><i class="fa-solid fa-angle-left fa-fw" aria-hidden=true></i>Télécharger un fichier audio en .NET MAUI</a>
<a href=/posts/tutos/my-first-app/15-add-animations-to-an-app/ class=post-nav-item rel=next title="Créer des animations avec .NET MAUI pour une ambiance disco">Créer des animations avec .NET MAUI pour une ambiance disco<i class="fa-solid fa-angle-right fa-fw" aria-hidden=true></i></a></div></div><div id=comments><div id=giscus><script src=https://giscus.app/client.js data-repo=Kapusch/blog-dotnet-maui data-repo-id=R_kgDOH_4TbQ data-category="Blog comments" data-category-id=DIC_kwDOH_4Tbc4CSqsZ data-mapping=Title data-strict=0 data-theme=preferred_color_scheme data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-lang=fr crossorigin=anonymous async defer></script></div><noscript>Please enable JavaScript to view the comments powered by <a href=https://giscus.app/ rel="external nofollow noopener noreferrer">giscus</a>.</noscript></div></article></main><footer class=footer><div class=footer-container><div class="footer-line custom"><a rel="license external nofollow noopener noreferrer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></div><div class="footer-line powered">Propulsé par <a href=https://gohugo.io/ target=_blank rel="external nofollow noopener noreferrer" title="Hugo 0.123.0">Hugo</a> | Thème - <a href=https://github.com/hugo-fixit/FixIt target=_blank rel=external title="FixIt v0.2.18"><img class=fixit-icon src=/fixit.min.svg alt="FixIt logo">&nbsp;FixIt</a></div><div class="footer-line copyright" itemscope itemtype=http://schema.org/CreativeWork><i class="fa-regular fa-copyright fa-fw" aria-hidden=true></i>
<span itemprop=copyrightYear>2022 - 2024</span><span class=author itemprop=copyrightHolder>
<a href=https://github.com/Kapusch target=_blank rel="external nofollow noopener noreferrer">Jean-Emmanuel BAILLAT</a></span><span class="license footer-divider"><u><a rel="license external nofollow noopener noreferrer" href=/privacy-policy target=_blank>Confidentialité</a></u> et <u><a rel="license external nofollow noopener noreferrer" href=/terms-of-use target=_blank>CGU</a></u></span></div><div class="footer-line statistics"></div></div></footer></div><div class=widgets><div class="fixed-buttons animate__faster d-none"><div class="fixed-button back-to-top" role=button aria-label="Retour en Haut"><i class="fa-solid fa-arrow-up fa-fw" aria-hidden=true></i><span class="variant-numeric d-none">0%</span></div><div class="fixed-button view-comments d-none" role=button aria-label="Afficher les Commentaires"><i class="fa-solid fa-comment fa-fw" aria-hidden=true></i></div></div><a href=https://github.com/Kapusch/blog-dotnet-maui/tree/main/Blog title="View source on GitHub" target=_blank rel="external nofollow" class="github-corner left d-none-mobile"><svg viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115h15l12 27L250 250V0z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentcolor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4l13.9-13.8C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8z" fill="currentcolor" class="octo-body"/></svg></a><div id=mask></div><noscript><div class=noscript-warning>Le thème FixIt fonctionne mieux quand JavaScript est activé.</div></noscript></div><link rel=stylesheet href=/lib/katex/katex.min.css><link rel=stylesheet href=/lib/cookieconsent/cookieconsent.min.css><script src=/lib/autocomplete/autocomplete.min.js defer></script><script src=/lib/lunr/lunr.min.js defer></script><script src=/lib/lunr/lunr.stemmer.support.min.js defer></script><script src=/lib/lunr/lunr.fr.min.js defer></script><script src=/lib/sharer/sharer.min.js async defer></script><script src=/lib/katex/katex.min.js defer></script><script src=/lib/katex/auto-render.min.js defer></script><script src=/lib/katex/copy-tex.min.js defer></script><script src=/lib/katex/mhchem.min.js defer></script><script src=/lib/cookieconsent/cookieconsent.min.js defer></script><script>window.config={code:{copyTitle:"Copier dans le presse-papiers",maxShownLines:50},comment:{enable:!0,expired:!1,giscus:{darkTheme:"dark_dimmed",lightTheme:"light"}},cookieconsent:{content:{dismiss:"J'ai compris !",link:"En apprendre plus",message:"Ce site Web utilise des Cookies pour améliorer votre expérience."},enable:!0,palette:{button:{background:"#f0f0f0"},popup:{background:"#1aa3ff"}},theme:"edgeless"},math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!0,left:"\\begin{equation}",right:"\\end{equation}"},{display:!0,left:"\\begin{equation*}",right:"\\end{equation*}"},{display:!0,left:"\\begin{align}",right:"\\end{align}"},{display:!0,left:"\\begin{align*}",right:"\\end{align*}"},{display:!0,left:"\\begin{alignat}",right:"\\end{alignat}"},{display:!0,left:"\\begin{alignat*}",right:"\\end{alignat*}"},{display:!0,left:"\\begin{gather}",right:"\\end{gather}"},{display:!0,left:"\\begin{CD}",right:"\\end{CD}"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},search:{highlightTag:"em",lunrIndexURL:"/index.json",lunrLanguageCode:"fr",maxResultLength:10,noResultsFound:"Aucun résultat trouvé",snippetLength:110,type:"lunr"}}</script><script src=/js/theme.min.js defer></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-0BB9XCL25S",{anonymize_ip:!0})</script><script src="https://www.googletagmanager.com/gtag/js?id=G-0BB9XCL25S" async></script></body></html>