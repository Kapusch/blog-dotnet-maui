<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=fr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=2"><meta name=robots content="noodp"><title>Cibler différents environnements avec .NET MAUI - MAUI, c'est clair !</title><meta name=author content="Jean-Emmanuel BAILLAT"><meta name=author-link content="https://github.com/Kapusch"><meta name=description content="Pour valider les nouvelles fonctionnalités d’une application, il vaut mieux les tester dans un environnement isolé. En effet, tu ne voudrais pas risquer les données de tes utilisateurs ! Découvre alors comment configurer différents environnements pour ton application mobile."><meta name=keywords content="Visual Studio,Setup"><meta itemprop=name content="Cibler différents environnements avec .NET MAUI"><meta itemprop=description content="Pour valider les nouvelles fonctionnalités d’une application, il vaut mieux les tester dans un environnement isolé. En effet, tu ne voudrais pas risquer les données de tes utilisateurs ! Découvre alors comment configurer différents environnements pour ton application mobile."><meta itemprop=datePublished content="2023-06-08T00:00:00+00:00"><meta itemprop=dateModified content="2023-06-08T00:00:00+00:00"><meta itemprop=wordCount content="2421"><meta itemprop=image content="https://www.mauicestclair.fr/posts/tips/multi-environments-project-configuration/featured-image-preview-en.png"><meta itemprop=keywords content="Visual Studio,Setup,"><meta property="og:title" content="Cibler différents environnements avec .NET MAUI"><meta property="og:description" content="Pour valider les nouvelles fonctionnalités d’une application, il vaut mieux les tester dans un environnement isolé. En effet, tu ne voudrais pas risquer les données de tes utilisateurs ! Découvre alors comment configurer différents environnements pour ton application mobile."><meta property="og:type" content="article"><meta property="og:url" content="https://www.mauicestclair.fr/posts/tips/multi-environments-project-configuration/"><meta property="og:image" content="https://www.mauicestclair.fr/posts/tips/multi-environments-project-configuration/featured-image-preview-en.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-06-08T00:00:00+00:00"><meta property="article:modified_time" content="2023-06-08T00:00:00+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://www.mauicestclair.fr/posts/tips/multi-environments-project-configuration/featured-image-preview-en.png"><meta name=twitter:title content="Cibler différents environnements avec .NET MAUI"><meta name=twitter:description content="Pour valider les nouvelles fonctionnalités d’une application, il vaut mieux les tester dans un environnement isolé. En effet, tu ne voudrais pas risquer les données de tes utilisateurs ! Découvre alors comment configurer différents environnements pour ton application mobile."><meta name=application-name content="MAUI, c'est clair !"><meta name=apple-mobile-web-app-title content="MAUI, c'est clair !"><meta name=theme-color data-light=#f8f8f8 data-dark=#252627 content="#f8f8f8"><meta name=msapplication-TileColor content="#da532c"><link rel=canonical href=https://www.mauicestclair.fr/posts/tips/multi-environments-project-configuration/><link rel=prev href=https://www.mauicestclair.fr/posts/tips/maui-app-with-no-shell/><link rel=stylesheet href=/css/style.min.css><link rel=stylesheet href=/lib/fontawesome-free/all.min.css><link rel=stylesheet href=/lib/animate/animate.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Cibler différents environnements avec .NET MAUI","inLanguage":"fr","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/www.mauicestclair.fr\/posts\/tips\/multi-environments-project-configuration\/"},"genre":"posts","keywords":"Visual Studio, Setup","wordcount":2421,"url":"https:\/\/www.mauicestclair.fr\/posts\/tips\/multi-environments-project-configuration\/","datePublished":"2023-06-08T00:00:00+00:00","dateModified":"2023-06-08T00:00:00+00:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"Jean-Emmanuel BAILLAT"},"description":"Pour valider les nouvelles fonctionnalités d’une application, il vaut mieux les tester dans un environnement isolé. En effet, tu ne voudrais pas risquer les données de tes utilisateurs ! Découvre alors comment configurer différents environnements pour ton application mobile."}</script></head><body data-header-desktop=sticky data-header-mobile=auto><script>(window.localStorage?.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("data-theme","dark")</script><div class=wrapper data-page-style=wide><header class="desktop animate__faster" id=header-desktop><div class=header-wrapper data-github-corner=left><div class=header-title><a href=/ title="MAUI, c'est clair !"><img loading=lazy src=/main_avatar.jpg srcset="/main_avatar.jpg, /main_avatar.jpg 1.5x, /main_avatar.jpg 2x" sizes=auto data-title="MAUI, c'est clair !" data-alt="MAUI, c'est clair !" class=logo style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'><span class=header-title-text>MAUI, c'est clair !</span></a><span class=header-subtitle></span></div><nav><ul class=menu><li class="menu-item has-children"><a class=menu-link href=/posts/><i class="fa-solid fa-newspaper fa-fw fa-sm" aria-hidden=true></i> Articles</a><i class="dropdown-icon fa-solid fa-chevron-down" aria-hidden=true></i><ul class=sub-menu><li class=menu-item><a class=menu-link href=/posts/tutos/><i class="fa-solid fa-graduation-cap fa-fw fa-sm" aria-hidden=true></i> Cours</a></li><li class=menu-item><a class=menu-link href=/posts/tips/><i class="fa-solid fa-lightbulb fa-fw fa-sm" aria-hidden=true></i> Astuces</a></li></ul></li><li class=menu-item><a class=menu-link href=/tags/><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden=true></i> Tags</a></li><li class=menu-item><a class=menu-link href=/about/><i class="fa-solid fa-info-circle fa-fw fa-sm" aria-hidden=true></i> À propos</a></li><li class="menu-item delimiter"></li><li class="menu-item search" id=search-desktop><input type=text placeholder="Rechercher des titres, des contenus..." id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=Chercher><i class="fa-solid fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=Effacer><i class="fa-solid fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-desktop><i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></li><li class="menu-item theme-switch" title="Changer de Thème"><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></li><li class="menu-item language-switch"><span role=button aria-label="Choisir la langue" title="Choisir la langue"><i class="fa-solid fa-language fa-fw" aria-hidden=true></i></span><ul class=sub-menu><li class=menu-item><span class="menu-link text-secondary" title=Français>Français</span></li><li class=menu-item><a href=/en/posts/tips/multi-environments-project-configuration/ class=menu-link title=English>English</a></li></ul></li></ul></nav></div></header><header class="mobile animate__faster" id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="MAUI, c'est clair !"><img loading=lazy src=/main_avatar.jpg srcset="/main_avatar.jpg, /main_avatar.jpg 1.5x, /main_avatar.jpg 2x" sizes=auto data-title=/main_avatar.jpg data-alt=/main_avatar.jpg class=logo style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'><span class=header-title-text>MAUI, c'est clair !</span></a><span class=header-subtitle></span></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><nav><ul class=menu id=menu-mobile><li class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder="Rechercher des titres, des contenus..." id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=Chercher><i class="fa-solid fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=Effacer><i class="fa-solid fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-mobile><i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>Annuler</a></li><li class=menu-item><span class=nested-item><a class=menu-link href=/posts/><i class="fa-solid fa-newspaper fa-fw fa-sm" aria-hidden=true></i> Articles</a>
<i class="dropdown-icon fa-solid fa-chevron-right" aria-hidden=true></i></span><ul class=sub-menu><li class=menu-item><a class=menu-link href=/posts/tutos/><i class="fa-solid fa-graduation-cap fa-fw fa-sm" aria-hidden=true></i> Cours</a></li><li class=menu-item><a class=menu-link href=/posts/tips/><i class="fa-solid fa-lightbulb fa-fw fa-sm" aria-hidden=true></i> Astuces</a></li></ul></li><li class=menu-item><a class=menu-link href=/tags/><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden=true></i> Tags</a></li><li class=menu-item><a class=menu-link href=/about/><i class="fa-solid fa-info-circle fa-fw fa-sm" aria-hidden=true></i> À propos</a></li><li class="menu-item menu-system"><span class="menu-system-item theme-switch" title="Changer de Thème"><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></span><span class="menu-system-item language-switch">
<span role=button aria-label="Choisir la langue" title="Choisir la langue">Français<i class="dropdown-icon fa-solid fa-chevron-down" aria-hidden=true></i></span>
<select class=language-select onchange="location=this.value"><option value=/posts/tips/multi-environments-project-configuration/ selected disabled>Français</option><option value=/en/posts/tips/multi-environments-project-configuration/>English</option></select></span></li></ul></nav></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><nav aria-label=breadcrumb class="breadcrumb-container sticky"><ol class=breadcrumb><li class=breadcrumb-item><a href=/posts/ title=Publications>Publications</a></li><li class=breadcrumb-item><a href=/posts/tips/ title=Astuces>Astuces</a></li><li class="breadcrumb-item active" aria-current=page>Cibler différents environnements avec .NET MAUI</li></ol></nav><main class=container><aside class=toc id=toc-auto><h2 class=toc-title>Contenus&nbsp;<i class="toc-icon fa-solid fa-angle-down fa-fw" aria-hidden=true></i></h2><div class=toc-content id=toc-content-auto></div></aside><aside class=aside-custom></aside><article class="page single"><div class=header><h1 class="single-title animate__animated animate__flipInX"><span>Cibler différents environnements avec .NET MAUI</span></h1></div><div class=post-meta><div class=post-meta-line><span class=post-author><a href=https://github.com/Kapusch target=_blank rel="external nofollow noopener noreferrer author" class=author><img loading=lazy src=/main_avatar.jpg srcset="/main_avatar.jpg, /main_avatar.jpg 1.5x, /main_avatar.jpg 2x" sizes=auto data-title="Jean-Emmanuel BAILLAT" data-alt="Jean-Emmanuel BAILLAT" class=avatar style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'>&nbsp;Jean-Emmanuel BAILLAT</a></span></div><div class=post-meta-line><span title="publié le 2023-06-08 00:00:00"><i class="fa-regular fa-calendar-alt fa-fw me-1" aria-hidden=true></i><time datetime=08/06/2023>08/06/2023</time></span>&nbsp;<span title="Mis à jour le 2023-06-08 00:00:00"><i class="fa-regular fa-edit fa-fw me-1" aria-hidden=true></i><time datetime=08/06/2023>08/06/2023</time></span>&nbsp;<span><i class="fa-solid fa-pencil-alt fa-fw me-1" aria-hidden=true></i>2421 mots</span>&nbsp;<span><i class="fa-regular fa-clock fa-fw me-1" aria-hidden=true></i>12 minutes</span>&nbsp;</div></div><div class="details toc" id=toc-static data-kept=false><div class="details-summary toc-title"><span>Contenus</span>
<span><i class="details-icon fa-solid fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#identifier-toutes-les-configurations-nécessaires-au-projet>Identifier toutes les configurations nécessaires au projet</a></li><li><a href=#créer-les-différentes-configurations-du-projet-dans-visual-studio>Créer les différentes configurations du projet dans Visual Studio</a></li><li><a href=#définir-un-nom-dapplication-pour-chaque-environnement-ciblé>Définir un nom d’application pour chaque environnement ciblé</a></li><li><a href=#définir-une-icône-dapplication-pour-chaque-environnement-ciblé>Définir une icône d’application pour chaque environnement ciblé</a></li><li><a href=#démonstration>Démonstration</a></li></ul></nav></div></div><div class=content id=content><p>Que ce soit pour le développement d’applications mobiles, de logiciels ou de sites Web, il est courant de mettre en place plusieurs environnements pour son projet. En effet, cela facilite le test de nouvelles fonctionnalités sans risquer d’impacter les données de nos utilisateurs.</p><p>Dans le cadre de cet article, nous verrons comment une application .NET MAUI peut cibler différents environnements, grâce à plusieurs configurations de projet.</p><div class="details admonition info open"><div class="details-summary admonition-title"><i class="icon fa-solid fa-info-circle fa-fw" aria-hidden=true></i>‎<i class="details-icon fa-solid fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content>Pour simplifier la lecture de cet article, nous nous concentrerons uniquement sur les plateformes iOS & Android. Cependant, le procédé est similaire pour les autres plateformes.</div></div></div><h1 id=identifier-toutes-les-configurations-nécessaires-au-projet>Identifier toutes les configurations nécessaires au projet</h1><p>Dans un premier temps, tu dois déterminer combien de configurations différentes tu as besoin selon le nombre d’environnements créés pour ton projet.</p><p>Cependant, si tu n’es qu’au début de ton projet, tu ne disposes peut-être que d’un environnement de développement. Voici donc quelques pistes de réflexion pour t’aider :</p><ul><li>Es-tu seul·e à développer cette application ? Y-a-t’il des testeurs dans ton équipe ?</li><li>Ton projet est-il soumis à des critères de sécurité ou de performance ?</li><li>Est-ce que tu dois l’exposer au client avant sa publication ?</li></ul><div class="details admonition tip open"><div class="details-summary admonition-title"><i class="icon fa-solid fa-lightbulb fa-fw" aria-hidden=true></i>‎<i class="details-icon fa-solid fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content>Par défaut, il est important d’isoler l’environnement de production de ton environnement de développement.</div></div></div><p>Pour notre démonstration, nous nous référerons aux 3 environnements suivants :</p><ul><li>une configuration “DEV” pour travailler de manière totalement isolée sur sa machine (i.e. “en local”) et ne pas impacter l’activité des autres développeurs de son équipe,</li><li>une configuration “TEST” pour faire valider tous les développements avant leur publication,</li><li>et une configuration “PROD” qui représente l’état final de l’application, une fois disponible sur les stores.</li></ul><p>Allez, il est temps de passer à la pratique ! Dans la prochaine section, nous allons créer ces 3 configurations pour exécuter notre application mobile dans 3 environnements distincts.</p><div class="details admonition info open"><div class="details-summary admonition-title"><i class="icon fa-solid fa-info-circle fa-fw" aria-hidden=true></i>‎<i class="details-icon fa-solid fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content>Je t’invite à sauter la partie suivante dans le cas où tu aurais déjà défini toutes les configurations nécessaires à ton projet dans Visual Studio.</div></div></div><h1 id=créer-les-différentes-configurations-du-projet-dans-visual-studio>Créer les différentes configurations du projet dans Visual Studio</h1><p>Maintenant que nous avons identifié tous les environnements ciblés, voyons comment créer les différentes configurations pour notre application.</p><p>Commence par ouvrir le fichier de configuration du projet dans Visual Studio.</p><div class="details admonition tip"><div class="details-summary admonition-title"><i class="icon fa-solid fa-lightbulb fa-fw" aria-hidden=true></i>Comment accéder au fichier de configuration du projet ?<i class="details-icon fa-solid fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content><p align=center><img max-width=100% max-height=100% src=./images/B735E0084C43426F685F6A5946BE7000.png></p><figure><figcaption class=image-caption>Il est possible d’accéder au fichier de configuration à l’aide d’un clic droit sur le projet dans Visual Studio.</figcaption></figure>Le fichier de configuration d’un projet se termine par l’extension .csproj et peut être édité par n’importe quel éditeur de texte (e.g. Visual Studio Code). On le retrouve généralement via l’explorateur de fichiers à la racine du projet.</div></div></div><p>Une fois le fichier <em>.csproj</em> ouvert, ajoute à la fin du fichier le code suivant :</p><p align=center style=margin-bottom:-10px><strong>Nom du fichier :</strong><code>MultiEnvMauiApp.csproj</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=nt>&lt;Project</span> <span class=na>Sdk=</span><span class=s>&#34;Microsoft.NET.Sdk&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>...
</span></span><span class=line><span class=cl>	<span class=nt>&lt;PropertyGroup&gt;</span>
</span></span><span class=line><span class=cl>		<span class=nt>&lt;Configurations&gt;</span>DEV;TEST;PROD<span class=nt>&lt;/Configurations&gt;</span>
</span></span><span class=line><span class=cl>	<span class=nt>&lt;/PropertyGroup&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/Project&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>Nous venons d’ajouter un paramètre qui, comme son nom l’indique, définit les 3 nouvelles configurations possibles du projet : “DEV”, “TEST” et “PROD”.</p><p>Nous pouvons alors personnaliser la configuration du projet pour chacun des environnements ciblés. Pour cela, rajoute le code suivant à la fin du fichier <em>.csproj</em> :</p><p align=center style=margin-bottom:-10px><strong>Nom du fichier :</strong><code>MultiEnvMauiApp.csproj</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=nt>&lt;Project</span> <span class=na>Sdk=</span><span class=s>&#34;Microsoft.NET.Sdk&#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>...
</span></span><span class=line><span class=cl>	<span class=nt>&lt;PropertyGroup</span> <span class=na>Condition=</span><span class=s>&#34; &#39;$(Configuration)&#39; == &#39;DEV&#39; &#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>	<span class=nt>&lt;/PropertyGroup&gt;</span>
</span></span><span class=line><span class=cl>	
</span></span><span class=line><span class=cl>	<span class=nt>&lt;PropertyGroup</span> <span class=na>Condition=</span><span class=s>&#34; &#39;$(Configuration)&#39; == &#39;TEST&#39; &#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>	<span class=nt>&lt;/PropertyGroup&gt;</span>
</span></span><span class=line><span class=cl>	
</span></span><span class=line><span class=cl>	<span class=nt>&lt;PropertyGroup</span> <span class=na>Condition=</span><span class=s>&#34; &#39;$(Configuration)&#39; == &#39;PROD&#39; &#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>	<span class=nt>&lt;/PropertyGroup&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/Project&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>Comme tu l’auras remarqué, nous avons ajouté une condition d’exécution à chacun de ces nouveaux groupes de propriétés. De cette façon, Visual Studio pourra appliquer la bonne configuration selon l’environnement ciblé.</p><p>Voyons maintenant pour ce qui est du contenu en lui-même (à adapter selon tes besoins) :</p><p align=center style=margin-bottom:-10px><strong>Nom du fichier :</strong><code>MultiEnvMauiApp.csproj</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=nt>&lt;PropertyGroup</span> <span class=na>Condition=</span><span class=s>&#34; &#39;$(Configuration)&#39; == &#39;DEV&#39; &#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>	<span class=nt>&lt;DebugSymbols&gt;</span>true<span class=nt>&lt;/DebugSymbols&gt;</span>
</span></span><span class=line><span class=cl>	<span class=nt>&lt;Optimize&gt;</span>false<span class=nt>&lt;/Optimize&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=nt>&lt;MtouchDebug&gt;</span>true<span class=nt>&lt;/MtouchDebug&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/PropertyGroup&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nt>&lt;PropertyGroup</span> <span class=na>Condition=</span><span class=s>&#34; &#39;$(Configuration)&#39; == &#39;TEST&#39; &#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>	<span class=nt>&lt;DebugSymbols&gt;</span>false<span class=nt>&lt;/DebugSymbols&gt;</span>
</span></span><span class=line><span class=cl>	<span class=nt>&lt;Optimize&gt;</span>true<span class=nt>&lt;/Optimize&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/PropertyGroup&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nt>&lt;PropertyGroup</span> <span class=na>Condition=</span><span class=s>&#34; &#39;$(Configuration)&#39; == &#39;PROD&#39; &#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>	<span class=nt>&lt;DebugSymbols&gt;</span>false<span class=nt>&lt;/DebugSymbols&gt;</span>
</span></span><span class=line><span class=cl>	<span class=nt>&lt;Optimize&gt;</span>true<span class=nt>&lt;/Optimize&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/PropertyGroup&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>Dans notre cas, on veut pouvoir débogguer l’application quand elle tourne en “DEV”, mais pas quand elle tourne en “TEST” ou en “PROD”. On a donc recours au paramètre <code>DebugSymbols</code> pour activer le déboggage de l’application, tandis que le paramètre <code>Optimize</code> permet d’optimiser les performances de l’app et son poids.</p><div class="details admonition info open"><div class="details-summary admonition-title"><i class="icon fa-solid fa-info-circle fa-fw" aria-hidden=true></i>‎<i class="details-icon fa-solid fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content>En raison d’un problème connu des équipes de Visual Studio, au moment de l’écriture de cet article, il est nécessaire d’appliquer <code>&lt;MtouchDebug>true&lt;/MtouchDebug></code> pour chaque configuration de déboggage.</div></div></div><hr><p>Voilà, on en a fini avec le fichier <em>.csproj</em> !</p><p>Mais après avoir sauvegardé ce fichier, il est fort possible que Visual Studio affiche une petite icône rouge. Heureusement, c’est tout à fait normal !</p><p align=center><img max-width=100% max-height=100% src=./images/DDC53ADBD178B2ECF8ACDFA29C763587.png></p><figure><figcaption class=image-caption>Visual Studio est rarement content qu’on bidouille les réglages du projet sans passer par son interface graphique.</figcaption></figure><p>Le message indique qu’il y a un problème d’association des configurations. En effet, Visual Studio ne sait pas encore quoi faire de nos configurations “DEV”, “TEST” et “PROD”. Il nous faut donc aller un peu plus loin en définissant leur comportement au niveau de la solution.</p><p>Pour Visual Studio, une solution est comme un espace de travail : elle peut contenir plusieurs projets en même temps. Or il est possible de gérer des configurations pour la solution, comme pour les projets ! Et pour que cela fonctionne, chaque configuration de la solution doit être associée à une configuration de chaque projet présent dans l’espace de travail.</p><p>Tu vas vite comprendre. Commence par ouvrir les paramètres de la solution dans Visual Studio.</p><div class="details admonition tip"><div class="details-summary admonition-title"><i class="icon fa-solid fa-lightbulb fa-fw" aria-hidden=true></i>Comment accéder aux paramètres de la solution ?<i class="details-icon fa-solid fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content><p align=center><img max-width=100% max-height=100% src=./images/6A9E6DE543D25D292182188D9DBFBB20.png></p><figure><figcaption class=image-caption>On peut également accéder aux paramètres de la solution à l’aide d’un double-clic sur le premier des items listés par Visual Studio.</figcaption></figure></div></div></div><p>Lorsque la fenêtre des paramètres de la solution s’affiche à l’écran, rends-toi dans la section des configurations de compilation.</p><p>Puis, ajoute une nouvelle configuration pour “DEV”, “TEST” et enfin “PROD” comme ci-dessous :</p><p align=center><img max-width=100% max-height=100% src=./images/EF92D0ABC03FD8A16F097CD8EAAC5310.gif></p><figure><figcaption class=image-caption>Par défaut, Visual Studio définit deux configurations de base : Debug and Release.</figcaption></figure><p>Maintenant que nos configurations existent au niveau de la solution, on doit les associer à la bonne configuration du projet, comme présenté dans le tableau suivant :</p><table><thead><tr><th>Configuration au niveau de la solution</th><th>Configuration au niveau du projet</th></tr></thead><tbody><tr><td>DEV</td><td>DEV</td></tr><tr><td>TEST</td><td>TEST</td></tr><tr><td>PROD</td><td>PROD</td></tr></tbody></table><p>Rien de plus facile !</p><p>Pour cela, toujours dans la fenêtre des paramètres de la solution, défile vers le bas pour afficher la section d’association des configurations. Puis, sélectionne la configuration au niveau de la solution avant de l’associer à la bonne configuration du projet :</p><p align=center><img max-width=100% max-height=100% src=./images/B2800A27E74376F99CB02CA29DE2402F.gif></p><figure></figure><p>Finalement, tu peux aussi supprimer les configurations <em>Debug</em> et <em>Release</em> qui ont été créées par défaut par Visual Studio :</p><p align=center><img max-width=100% max-height=100% src=./images/FA295D76F0B0CB2D08C23577F761F441.gif></p><figure></figure><p>Une fois que tu as suivi toutes ces étapes, ferme la fenêtre en cliquant sur OK et vérifie que tu n’as plus l’erreur signalée par la petite icône rouge.</p><p>Plus d’erreur ? Bravo ! Tu peux maintenant facilement exécuter ton application dans n’importe quel environnement !</p><p align=center><img max-width=100% max-height=100% src=./images/41548D29C314A62E5633F5A5D4E95A93.gif></p><figure><figcaption class=image-caption>Visual Studio peut maintenant compiler le projet avec les configurations que l’on vient de créer.</figcaption></figure><p>Voyons maintenant comment installer l’application sur ton téléphone pour chacun des environnements de ton projet !</p><div class="details admonition info open"><div class="details-summary admonition-title"><i class="icon fa-solid fa-info-circle fa-fw" aria-hidden=true></i>‎<i class="details-icon fa-solid fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content>La prochaine fois que tu rouvriras le projet dans Visual Studio, il se peut que les configurations <em>Debug</em> et <em>Release</em> soient re-créées automatiquement. C’est sans conséquence pour ton projet.</div></div></div><h1 id=définir-un-nom-dapplication-pour-chaque-environnement-ciblé>Définir un nom d’application pour chaque environnement ciblé</h1><p>Maintenant que les configurations de ton projet sont prêtes, nous allons donner un nom d’application spécifique pour chacun des environnements ciblés, afin d’éviter toute confusion entre l’application de développement et celle de production.</p><p>Le nom de l’application peut être modifié via le fichier de configuration du projet. Par défaut, tu y verras normalement un titre et un identifiant d’application déjà définis pour chaque nouveau projet .NET MAUI :</p><p align=center style=margin-bottom:-10px><strong>Nom du fichier :</strong><code>MultiEnvMauiApp.csproj</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=nt>&lt;PropertyGroup&gt;</span>
</span></span><span class=line><span class=cl>...
</span></span><span class=line><span class=cl>	<span class=c>&lt;!-- Display name --&gt;</span>
</span></span><span class=line><span class=cl>	<span class=nt>&lt;ApplicationTitle&gt;</span>My App<span class=nt>&lt;/ApplicationTitle&gt;</span>
</span></span><span class=line><span class=cl>	
</span></span><span class=line><span class=cl>	<span class=c>&lt;!-- App Identifier --&gt;</span>
</span></span><span class=line><span class=cl>	<span class=nt>&lt;ApplicationId&gt;</span>com.companyname.multienvmauiapp<span class=nt>&lt;/ApplicationId&gt;</span>
</span></span><span class=line><span class=cl>...
</span></span><span class=line><span class=cl><span class=nt>&lt;/PropertyGroup&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>Dans l’exemple ci-dessus, ”My App” correspond au nom de base de l’application, et notre but est de le personnaliser pour chacune des configurations du projet.</p><p>Dans notre cas, nous allons inclure la dénomination de l’environnement ciblé dans le titre et dans l’identifiant d’application :</p><p align=center style=margin-bottom:-10px><strong>Nom du fichier :</strong><code>MultiEnvMauiApp.csproj</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=nt>&lt;PropertyGroup</span> <span class=na>Condition=</span><span class=s>&#34; &#39;$(Configuration)&#39; == &#39;DEV&#39; &#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>...
</span></span><span class=line><span class=cl>	<span class=c>&lt;!-- Display name (Overridden) --&gt;</span>
</span></span><span class=line><span class=cl>	<span class=nt>&lt;ApplicationTitle&gt;</span>(DEV) My App<span class=nt>&lt;/ApplicationTitle&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=c>&lt;!-- App Identifier (Overridden) --&gt;</span>
</span></span><span class=line><span class=cl>	<span class=nt>&lt;ApplicationId&gt;</span>com.companyname.multienvmauiapp.dev<span class=nt>&lt;/ApplicationId&gt;</span>
</span></span><span class=line><span class=cl>...
</span></span><span class=line><span class=cl><span class=nt>&lt;/PropertyGroup&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nt>&lt;PropertyGroup</span> <span class=na>Condition=</span><span class=s>&#34; &#39;$(Configuration)&#39; == &#39;TEST&#39; &#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>...
</span></span><span class=line><span class=cl>	<span class=c>&lt;!-- Display name (Overridden) --&gt;</span>
</span></span><span class=line><span class=cl>	<span class=nt>&lt;ApplicationTitle&gt;</span>(TEST) My App<span class=nt>&lt;/ApplicationTitle&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=c>&lt;!-- App Identifier (Overridden) --&gt;</span>
</span></span><span class=line><span class=cl>	<span class=nt>&lt;ApplicationId&gt;</span>com.companyname.multienvmauiapp.test<span class=nt>&lt;/ApplicationId&gt;</span>
</span></span><span class=line><span class=cl>...
</span></span><span class=line><span class=cl><span class=nt>&lt;/PropertyGroup&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>Désormais, pour les configurations “DEV” et “TEST”, l’appellation de l’environnement ciblé apparaîtra au début du nom d’application et à la fin de l’identifiant d’application. Cette mesure n&rsquo;est pas nécessaire pour la configuration &ldquo;PROD&rdquo;, car le titre et l&rsquo;identifiant de base seront utilisés par défaut pour toutes les configurations.</p><div class="details admonition info open"><div class="details-summary admonition-title"><i class="icon fa-solid fa-info-circle fa-fw" aria-hidden=true></i>‎<i class="details-icon fa-solid fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content>C’est parce que le paramètre <em>ApplicationId</em> a une valeur différente pour chaque configuration qu’il est possible d&rsquo;installer plusieurs versions de l&rsquo;application.</div></div></div><p>Tu peux maintenant différencier l’application de développement de celle de production sur ton téléphone. Cool ! Et si on allait un peu plus loin ?</p><p>Dans la section suivante, tu apprendras à personnaliser l’icône de l’app.</p><h1 id=définir-une-icône-dapplication-pour-chaque-environnement-ciblé>Définir une icône d’application pour chaque environnement ciblé</h1><p>En plus de nommer l’application selon l’environnement ciblé, nous allons voir comment définir une icône pour chacune des configurations du projet.</p><p>Pour cela, il te faut d’abord concevoir une icône pour chaque environnement. Une fois que c’est fait, ajoute-les au projet dans un dossier adapté.</p><p align=center><img max-width=100% max-height=100% src=./images/245F3DA8314905E811BD461326F3C1A6.png></p><figure><figcaption class=image-caption>Par défaut, tout projet .NET MAUI comporte un dossier AppIcon.</figcaption></figure><p>Tout comme pour le nom de l’application, tu auras peut-être remarqué que <a href="https://learn.microsoft.com/fr-fr/dotnet/maui/user-interface/images/app-icons?tabs=android#change-the-icon" target=_blank rel="external nofollow noopener noreferrer">l’icône se définit aussi dans le fichier de configuration du projet<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a>, avec la propriété <code>MauiIcon</code>.</p><p>Commence par supprimer ce paramètre du fichier <em>.csproj</em>, puis ajoute le code suivant :</p><p align=center style=margin-bottom:-10px><strong>Nom du fichier :</strong><code>MultiEnvMauiApp.csproj</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=nt>&lt;ItemGroup&gt;</span>
</span></span><span class=line><span class=cl>		<span class=c>&lt;!-- App Icon --&gt;</span>
</span></span><span class=line><span class=cl>		<span class=nt>&lt;MauiIcon</span> <span class=na>Include=</span><span class=s>&#34;Resources\AppIcon\icon_dev.png&#34;</span> <span class=na>Condition=</span><span class=s>&#34; &#39;$(Configuration)&#39; == &#39;DEV&#39; &#34;</span> <span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl>		<span class=nt>&lt;MauiIcon</span> <span class=na>Include=</span><span class=s>&#34;Resources\AppIcon\icon_test.png&#34;</span> <span class=na>Condition=</span><span class=s>&#34; &#39;$(Configuration)&#39; == &#39;TEST&#39; &#34;</span> <span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl>		<span class=nt>&lt;MauiIcon</span> <span class=na>Include=</span><span class=s>&#34;Resources\AppIcon\icon.png&#34;</span> <span class=na>Condition=</span><span class=s>&#34; &#39;$(Configuration)&#39; == &#39;PROD&#39; &#34;</span> <span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/ItemGroup&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>Et hop ! Ça y’est, on a défini une icône différente en fonction de la configuration choisie !</p><p>Enfin… presque ! Comme tu le sais, chaque application .NET MAUI s’appuie sur des fichiers de configuration liés à la plateforme cible. Il est également nécessaire de définir l&rsquo;icône de l&rsquo;application dans ces fichiers :</p><ul><li>dans le fichier <a href=https://learn.microsoft.com/fr-fr/dotnet/maui/android/manifest target=_blank rel="external nofollow noopener noreferrer">AndroidManifest.xml sur Android<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a>,</li><li>et dans le fichier <a href="https://learn.microsoft.com/fr-fr/dotnet/maui/macios/info-plist?tabs=vs" target=_blank rel="external nofollow noopener noreferrer">Info.plist sur iOS<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a>.</li></ul><div class="details admonition info open"><div class="details-summary admonition-title"><i class="icon fa-solid fa-info-circle fa-fw" aria-hidden=true></i>‎<i class="details-icon fa-solid fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content>À l’heure où j’écris cet article, il n’est pas possible de générer automatiquement l’icône sur <a href=https://github.com/xamarin/xamarin-macios/issues/12790 target=_blank rel="external nofollow noopener noreferrer">iOS<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a> et <a href=https://github.com/xamarin/xamarin-android/issues/7147 target=_blank rel="external nofollow noopener noreferrer">Android<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a> sans modifier ces fichiers. Peut-être une fonctionnalité pour .NET 8 ?</div></div></div><p>Tout d’abord, nous devons associer chacun de ces fichiers à une configuration différente. Dans notre cas, nous aurons besoin de 3 fichiers <em>.plist</em> sur iOS et de 3 fichiers <em>.xml</em> sur Android :</p><table><thead><tr><th></th><th>Android</th><th>iOS</th></tr></thead><tbody><tr><td>DEV</td><td>AndroidManifest.dev.xml</td><td>Info.dev.plist</td></tr><tr><td>TEST</td><td>AndroidManifest.test.xml</td><td>Info.test.plist</td></tr><tr><td>PROD</td><td>AndroidManifest.xml</td><td>Info.plist</td></tr></tbody></table><p>Commençons par iOS, rends-toi dans le dossier <em>Platforms/iOS</em> et crée deux copies du fichier <em>Info.plist</em> d’origine. Puis, renomme-les en <em>Info.dev.plist</em> et <em>Info.test.plist</em>.</p><p align=center><img max-width=100% max-height=100% src=./images/55C14B4B3667E40789E2599946E7D78F.gif></p><figure></figure><p>Pour chaque fichier <em>.plist</em>, nous allons modifier la valeur du paramètre <code>XSAppIconAssets</code> de sorte à définir une icône par configuration. La <a href="https://learn.microsoft.com/fr-fr/dotnet/maui/user-interface/images/app-icons?tabs=macios#platform-specific-configuration" target=_blank rel="external nofollow noopener noreferrer">documentation<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a> indique que la valeur suit le format <code>Assets.xcassets/{name}.appiconset</code> et qu’il nous faut remplacer <code>{name}</code> par le nom de l’icône souhaitée (sans mentionner son chemin d’accès, ni son extension).</p><p>Dans notre cas, voici ce que cela donne pour le fichier <em>Info.dev.plist</em> :</p><p align=center style=margin-bottom:-10px><strong>Nom du fichier :</strong><code>Info.dev.plist</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=nt>&lt;key&gt;</span>XSAppIconAssets<span class=nt>&lt;/key&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;string&gt;</span>Assets.xcassets/icon_dev.appiconset<span class=nt>&lt;/string&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>Enfin, lorsque tu as modifié l’icône dans tous les fichiers <em>.plist</em>, retourne dans le fichier de configuration du projet. En effet, nous devons lui indiquer quel fichier <em>.plist</em> considérer selon la configuration choisie :</p><p align=center style=margin-bottom:-10px><strong>Nom du fichier :</strong><code>MultiEnvMauiApp.csproj</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=nt>&lt;ItemGroup</span> <span class=na>Condition=</span><span class=s>&#34; &#39;$(TargetFramework)&#39; == &#39;net7.0-ios&#39; &#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>	<span class=nt>&lt;PartialAppManifest</span> <span class=na>Include=</span><span class=s>&#34;Platforms\iOS\Info.dev.plist&#34;</span> <span class=na>Condition=</span><span class=s>&#34; &#39;$(Configuration)&#39; == &#39;DEV&#39; &#34;</span> <span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl>	<span class=nt>&lt;PartialAppManifest</span> <span class=na>Include=</span><span class=s>&#34;Platforms\iOS\Info.test.plist&#34;</span> <span class=na>Condition=</span><span class=s>&#34; &#39;$(Configuration)&#39; == &#39;TEST&#39; &#34;</span> <span class=nt>/&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/ItemGroup&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>Par défaut, Visual Studio choisira le fichier <em>Info.plist</em>. On doit donc uniquement préciser quel fichier considérer pour les configurations “DEV” et “TEST”.</p><div class="details admonition tip open"><div class="details-summary admonition-title"><i class="icon fa-solid fa-lightbulb fa-fw" aria-hidden=true></i>‎<i class="details-icon fa-solid fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content>Aller plus loin avec la propriété <a href=https://github.com/xamarin/xamarin-macios/wiki/Project-file-properties#partialappmanifest target=_blank rel="external nofollow noopener noreferrer">PartialAppManifest<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a>.</div></div></div><p>Enfin, même chose pour Android. Rends-toi dans le dossier <em>Platforms/Android</em> et crée deux copies du fichier <em>AndroidManifest.xml</em>. Puis, renomme-les en <em>AndroidManifest.dev.xml</em> et <em>AndroidManifest.test.xml</em>.</p><p>Cependant, ici nous devons renommer le <em>AndroidManifest.xml</em> d’origine en <em>AndroidManifest.prod.xml</em>. Sans quoi, tu aurais des soucis à la compilation de l’app.</p><p align=center><img max-width=100% max-height=100% src=./images/1513061CE38579812AB18375494170C3.gif></p><figure></figure><p>Pour chaque fichier <em>.xml</em>, nous allons modifier la valeur des paramètres <code>android:icon</code> et <code>android:roundIcon</code> de sorte à définir une icône par configuration. La <a href="https://learn.microsoft.com/fr-fr/dotnet/maui/user-interface/images/app-icons?tabs=android#platform-specific-configuration" target=_blank rel="external nofollow noopener noreferrer">documentation<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a> indique que les valeurs suivent respectivement le format <code>@mipmap/{name}</code> et <code>@mipmap/{name}_round</code> et qu’il nous faut remplacer <code>{name}</code> par le nom de l’icône souhaitée (sans mentionner son chemin d’accès, ni son extension).</p><p>Dans notre cas, voici ce que cela donne pour le fichier <em>AndroidManifest.dev.xml</em> :</p><p align=center style=margin-bottom:-10px><strong>Nom du fichier :</strong><code>AndroidManifest.dev.xml</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=nt>&lt;application</span> <span class=na>android:icon=</span><span class=s>&#34;@mipmap/icon_dev&#34;</span> <span class=na>android:roundIcon=</span><span class=s>&#34;@mipmap/icon_dev_round&#34;</span><span class=nt>&gt;&lt;/application&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>Lorsque tu as modifié l’icône dans tous les fichiers <em>.xml</em>, retourne dans le fichier de configuration du projet. En effet, nous devons lui indiquer quel fichier <em>.xml</em> considérer selon la configuration choisie :</p><p align=center style=margin-bottom:-10px><strong>Nom du fichier :</strong><code>MultiEnvMauiApp.csproj</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-xml data-lang=xml><span class=line><span class=cl><span class=nt>&lt;PropertyGroup</span> <span class=na>Condition=</span><span class=s>&#34; &#39;$(TargetFramework)&#39; == &#39;net7.0-android&#39; &#34;</span><span class=nt>&gt;</span>
</span></span><span class=line><span class=cl>		<span class=nt>&lt;AndroidManifest</span> <span class=na>Condition=</span><span class=s>&#34; &#39;$(Configuration)&#39; == &#39;DEV&#39; &#34;</span><span class=nt>&gt;</span>Platforms\Android\AndroidManifest.dev.xml<span class=nt>&lt;/AndroidManifest&gt;</span>
</span></span><span class=line><span class=cl>		<span class=nt>&lt;AndroidManifest</span> <span class=na>Condition=</span><span class=s>&#34; &#39;$(Configuration)&#39; == &#39;TEST&#39; &#34;</span><span class=nt>&gt;</span>Platforms\Android\AndroidManifest.test.xml<span class=nt>&lt;/AndroidManifest&gt;</span>
</span></span><span class=line><span class=cl>		<span class=nt>&lt;AndroidManifest</span> <span class=na>Condition=</span><span class=s>&#34; &#39;$(Configuration)&#39; == &#39;PROD&#39; &#34;</span><span class=nt>&gt;</span>Platforms\Android\AndroidManifest.prod.xml<span class=nt>&lt;/AndroidManifest&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>&lt;/PropertyGroup&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>Comme tu l’auras remarqué, nous avons du préciser quel fichier considérer pour les toutes les configurations.</p><p>Ouf ! Ça y’est c’est vraiment fini cette fois. Passons vite à la démo !</p><h1 id=démonstration>Démonstration</h1><p>Il est grand temps de vérifier que toute cette mise en place fonctionne. Tu peux maintenant déployer l’app pour chaque configuration, et pour chaque plateforme !</p><div class="details admonition info open"><div class="details-summary admonition-title"><i class="icon fa-solid fa-info-circle fa-fw" aria-hidden=true></i><i class="details-icon fa-solid fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content><p>Pour les configurations n’autorisant pas le déboggage, tu dois démarrer l’application sans déboggage pour qu’elle se déploie sur le simulateur.</p><p align=center><img max-width=100% max-height=100% src=./images/35B1B096226DA369C0C7116E434C83F9.png></p><figure><figcaption class=image-caption>On doit passer par cette option pour les configurations “TEST” et “PROD”.</figcaption></figure></div></div></div><table><tr><td><p align=center><img max-width=100% max-height=100% src=./images/057714498935BB630D97070485D3EB1B.png></p><figure><figcaption class=image-caption>Il y a bien 3 applications installées sur mon simulateur iOS avec chacune un nom et une icône différents.</figcaption></figure></td><td><p align=center><img max-width=100% max-height=100% src=./images/E96FBE59D3C81E61A57F260ECA547C33.png></p><figure><figcaption class=image-caption>Il y a bien 3 applications installées sur mon émulateur Android avec chacune un nom et une icône différents.</figcaption></figure></td></tr></table><p>Bravo ! 👏 Tu vas pouvoir maintenant développer de nouvelles fonctionnalités sans risquer les données de tes utilisateurs ! Et puis, c’est quand même pratique de pouvoir comparer le comportement de l’application entre l’environnement de développement et de production.</p><div class="details admonition tip open"><div class="details-summary admonition-title"><i class="icon fa-solid fa-lightbulb fa-fw" aria-hidden=true></i>‎<i class="details-icon fa-solid fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content>Si tu rencontres des problèmes, il se peut que cela soit lié aux données en mémoire sur le téléphone ou dans Visual Studio. Aussi, pense à nettoyer la solution et à supprimer l’application de ton téléphone avant tout déploiement !</div></div></div><p>Mais d’ailleurs, et s’il était possible d’installer une application pour chaque nouveau développement ? Tu pourrais alors tester séparément chaque nouvelle fonctionnalité (ou correctif) sans avoir besoin de désinstaller les anciennes versions de ton app !</p><p>Ça sera l’objet d’un prochain article 🤓</p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span title="Mis à jour le 2023-06-08 00:00:00">Mis à jour le 08/06/2023&nbsp;</span></div><div class=post-info-license><span><a rel="license external nofollow noopener noreferrer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span><a href=javascript:void(0); title="Partager via Twitter" data-sharer=twitter data-url=https://www.mauicestclair.fr/posts/tips/multi-environments-project-configuration/ data-title="Cibler différents environnements avec .NET MAUI" data-via=kapuschinfo data-hashtags="Visual Studio,Setup"><i class="fa-brands fa-twitter fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); title="Partager via Facebook" data-sharer=facebook data-url=https://www.mauicestclair.fr/posts/tips/multi-environments-project-configuration/ data-hashtag="Visual Studio"><i class="fa-brands fa-facebook-square fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); title="Partager via Linkedin" data-sharer=linkedin data-url=https://www.mauicestclair.fr/posts/tips/multi-environments-project-configuration/><i class="fa-brands fa-linkedin fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); title="Partager via Blogger" data-sharer=blogger data-url=https://www.mauicestclair.fr/posts/tips/multi-environments-project-configuration/ data-title="Cibler différents environnements avec .NET MAUI" data-description="Pour valider les nouvelles fonctionnalités d’une application, il vaut mieux les tester dans un environnement isolé. En effet, tu ne voudrais pas risquer les données de tes utilisateurs ! Découvre alors comment configurer différents environnements pour ton application mobile."><i class="fa-brands fa-blogger fa-fw" aria-hidden=true></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fa-solid fa-tags fa-fw me-1" aria-hidden=true></i><a href=/tags/visual-studio/ class=post-tag>Visual Studio</a><a href=/tags/setup/ class=post-tag>Setup</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>Retour</a></span>&nbsp;|&nbsp;<span><a href=/>Accueil</a></span></section></div><div class=post-nav><a href=/posts/tips/maui-app-with-no-shell/ class=post-nav-item rel=prev title="Créer une app .NET MAUI sans Shell"><i class="fa-solid fa-angle-left fa-fw" aria-hidden=true></i>Créer une app .NET MAUI sans Shell</a></div></div><div id=comments><div id=giscus><script src=https://giscus.app/client.js data-repo=Kapusch/blog-dotnet-maui data-repo-id=R_kgDOH_4TbQ data-category="Blog comments" data-category-id=DIC_kwDOH_4Tbc4CSqsZ data-mapping=Title data-strict=0 data-theme=preferred_color_scheme data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-lang=fr crossorigin=anonymous async defer></script></div><noscript>Please enable JavaScript to view the comments powered by <a href=https://giscus.app/ rel="external nofollow noopener noreferrer">giscus</a>.</noscript></div></article></main><footer class=footer><div class=footer-container><div class="footer-line custom"><a rel="license external nofollow noopener noreferrer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></div><div class="footer-line powered">Propulsé par <a href=https://gohugo.io/ target=_blank rel="external nofollow noopener noreferrer" title="Hugo 0.115.0">Hugo</a> | Thème - <a href=https://github.com/hugo-fixit/FixIt target=_blank rel=external title="FixIt v0.2.18"><img class=fixit-icon src=/fixit.min.svg alt="FixIt logo">&nbsp;FixIt</a></div><div class="footer-line copyright" itemscope itemtype=http://schema.org/CreativeWork><i class="fa-regular fa-copyright fa-fw" aria-hidden=true></i>
<span itemprop=copyrightYear>2022 - 2023</span><span class=author itemprop=copyrightHolder>
<a href=https://github.com/Kapusch target=_blank rel="external nofollow noopener noreferrer">Jean-Emmanuel BAILLAT</a></span><span class="license footer-divider"><u><a rel="license external nofollow noopener noreferrer" href=/privacy-policy target=_blank>Confidentialité</a></u> et <u><a rel="license external nofollow noopener noreferrer" href=/terms-of-use target=_blank>CGU</a></u></span></div><div class="footer-line statistics"></div></div></footer></div><div class=widgets><div class="fixed-buttons animate__faster d-none"><div class="fixed-button back-to-top" role=button aria-label="Retour en Haut"><i class="fa-solid fa-arrow-up fa-fw" aria-hidden=true></i><span class="variant-numeric d-none">0%</span></div><div class="fixed-button view-comments d-none" role=button aria-label="Afficher les Commentaires"><i class="fa-solid fa-comment fa-fw" aria-hidden=true></i></div></div><a href=https://github.com/Kapusch/blog-dotnet-maui/tree/main/Blog title="View source on GitHub" target=_blank rel="external nofollow" class="github-corner left d-none-mobile"><svg viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115h15l12 27L250 250V0z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentcolor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4l13.9-13.8C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8z" fill="currentcolor" class="octo-body"/></svg></a><div id=mask></div><noscript><div class=noscript-warning>Le thème FixIt fonctionne mieux quand JavaScript est activé.</div></noscript></div><link rel=stylesheet href=/lib/katex/katex.min.css><link rel=stylesheet href=/lib/cookieconsent/cookieconsent.min.css><script src=/lib/autocomplete/autocomplete.min.js defer></script><script src=/lib/lunr/lunr.min.js defer></script><script src=/lib/lunr/lunr.stemmer.support.min.js defer></script><script src=/lib/lunr/lunr.fr.min.js defer></script><script src=/lib/sharer/sharer.min.js async defer></script><script src=/lib/katex/katex.min.js defer></script><script src=/lib/katex/auto-render.min.js defer></script><script src=/lib/katex/copy-tex.min.js defer></script><script src=/lib/katex/mhchem.min.js defer></script><script src=/lib/cookieconsent/cookieconsent.min.js defer></script><script>window.config={code:{copyTitle:"Copier dans le presse-papiers",maxShownLines:50},comment:{enable:!0,expired:!1,giscus:{darkTheme:"dark_dimmed",lightTheme:"light"}},cookieconsent:{content:{dismiss:"J'ai compris !",link:"En apprendre plus",message:"Ce site Web utilise des Cookies pour améliorer votre expérience."},enable:!0,palette:{button:{background:"#f0f0f0"},popup:{background:"#1aa3ff"}},theme:"edgeless"},math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!0,left:"\\begin{equation}",right:"\\end{equation}"},{display:!0,left:"\\begin{equation*}",right:"\\end{equation*}"},{display:!0,left:"\\begin{align}",right:"\\end{align}"},{display:!0,left:"\\begin{align*}",right:"\\end{align*}"},{display:!0,left:"\\begin{alignat}",right:"\\end{alignat}"},{display:!0,left:"\\begin{alignat*}",right:"\\end{alignat*}"},{display:!0,left:"\\begin{gather}",right:"\\end{gather}"},{display:!0,left:"\\begin{CD}",right:"\\end{CD}"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},search:{highlightTag:"em",lunrIndexURL:"/index.json",lunrLanguageCode:"fr",maxResultLength:10,noResultsFound:"Aucun résultat trouvé",snippetLength:110,type:"lunr"}}</script><script src=/js/theme.min.js defer></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-0BB9XCL25S",{anonymize_ip:!0})</script><script src="https://www.googletagmanager.com/gtag/js?id=G-0BB9XCL25S" async></script></body></html>